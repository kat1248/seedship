
  <div tiddler="FC Native Relations" tags="nobr" created="201703061900" modifier="twee" twine-position="990,1690">
    /* Native relations are based on culture score */
/* Unlike final culture, not affected by population */

<<set _culture_score = $system_cultural_database>>
@@.debug-text;Unmodified culture score: _culture_score@@

<<set _difference = Math.abs($hiscore.final_tech_level - $planet.native_tech_level)>>

@@.debug-text;Colonist tech level: $hiscore.final_tech_level, Native tech level: $planet.native_tech_level, Difference: _difference @@

/* Difference can be 0 to 10 */

<<set _culture_score -= _difference * 5>>
  /* Perfect culture score but max difference gives a result of 50 (isolationism) */
@@.debug-text;Modified culture score: _culture_score@@


/* Output text */
As the colonists expand from their initial settlement they must find a way to share their new home with its native inhabitants,

<<if $system_cultural_database >= 100>>
	guided by the wealth of historical information in the cultural database.
<<elseif $system_cultural_database >= 50>>
	with the surviving historical information in the cultural database to guide them.
<<elseif $system_cultural_database > 0>>
	with guidance from what they can recover from the cultural database.
<<else>>
	without any help from the destroyed cultural database.
<</if>>

<<if _difference > 1>>
	The difference in technological level between the colonists and the natives makes relations more difficult,
	<<if _culture_score > 72>>but<<else>>and<</if>>
<<else>>
	The similarity in technological level between the colonists and the natives makes relations easier,
	<<if _culture_score > 72>>and<<else>>but<</if>>
<</if>>


<<if _culture_score > 96>>
	<<set $hiscore.native_relations = 6>>
	the two species end up living in closely linked communities, with some members of each species adopting the lifestyle of the other.
	<<set $system_cultural_database += random(10,30)>>
<<elseif _culture_score > 72>>
	<<set $hiscore.native_relations = 5>>
	the two species end up living in separate communities with friendly relations between them.
	<<set $system_cultural_database += random(5,15)>>
<<elseif _culture_score > 48>>
	<<set $hiscore.native_relations = 4>>
	the two species end up living in separate parts of the planet and having little contact with one another.
<<elseif _culture_score > 24>>
	<<if $hiscore.final_tech_level > $planet.native_tech_level>>
		conflicts escalate into a war that ends with the humans enslaving the natives.
		<<set $hiscore.native_relations = 3>>
	<<else>>
		conflicts escalate into a war that ends with the humans being enslaved by the natives.
		<<set $hiscore.native_relations = 2>>
		<<set $hiscore.summary = "Enslaved by Natives">>
		<<set $colonists = 0>>
	<</if>>
<<else>>
	<<if $hiscore.final_tech_level > $planet.native_tech_level>>
		conflicts escalate into a war that ends with the natives being completely wiped out.
	<<set $hiscore.native_relations = 1>>
	<<else>>
		conflicts escalate into a war that ends with the humans being completely wiped out.
		<<set $hiscore.native_relations = 0>>
		<<set $hiscore.summary = "Killed by Natives">>
		<<set $colonists = 0>>
	<</if>>
<</if>>


<br><br>

<<FCNextPassage [[FC Culture]]>></div><div tiddler="MO Impact Choice" tags="nobr" created="201703061900" modifier="twee" twine-position="1550,990">/* Pick two random systems */
<<randomSystemExcluding "destroyed">>
<<set _system_1 = $system>>
<<randomSystemExcluding _system_1 "destroyed">>
<<set _system_2 = $system>>

<<if visited() == 1>>
	An alarm wakes the AI from its hibernation. A rogue asteroid is on a collision course with the ship; the automatic navigation system has failed to avoid it, and has woken the AI to make the split-second decision of how to deal with the impact. The asteroid is about to hit the _system_1. There is no time to avoid it entirely, but if the AI fires the manoeuvring thrusters to rotate the ship it will instead hit the _system_2.
<<else>>
	Once again the AI wakes suddenly to find an asteroid on a collision course with the ship. The AI can allow it to hit the _system_1 or rotate so it hits the _system_2.
<</if>>

<br><br>
<div id="result-area">
<<link "Allow it to hit the _system_1">>
	<<set $system = _system_1>>
	<<replaceAndFadeIn "#result-area" [[MO Impact Choice 2]]>>
<</link>>
<br>
<<link "Rotate so it hits the _system_2">>
	<<set $system = _system_2>>
	<<replaceAndFadeIn "#result-area" [[MO Impact Choice 2]]>>
<</link>>
</div></div><div tiddler="Status Display" tags="nobr" created="201703061900" modifier="twee" twine-position="10,290">	/* Sidebar status display */

<div class="status-display-colonists">
	<table>
		<colgroup>
			<col class="status-display-text-column">
			<col class="status-display-number-column">
			<col class="status-display-change-column">
		</colgroup>
		<tr>
			/* (Kludgy way of checking if it's a number:) */
			<<if $colonists >= 0 & $colonists <= $max_colonists*10>>
					<td>''Colonists:''</td><td id="status-display-colonists">$colonists</td><td><<difference $colonists $last_colonists>></td>
			<<else>>
					<td>''Colonists:''</td><td id="status-display-colonists" colspan="2">$colonists</td>
			<</if>>
		</tr>
	</table>
</div>

<div class="status-display-block">
	<table>
		<colgroup>
			<col class="status-display-text-column">
			<col class="status-display-number-column">
			<col class="status-display-change-column">
		</colgroup>
		<tr><td>''Scanners''</td></tr>
		<tr>
			<td><<if $scanner_atmosphere_level != 0>>Atmosphere ($scanner_atmosphere_level):<<else>>Atmosphere:<</if>></td>
			<td id="status-display-atmosphere"><<status_percentage $scanner_atmosphere>></td><td><<difference $scanner_atmosphere $last_scanner_atmosphere>></td>
		</tr>
		<tr>
			<td><<if $scanner_gravity_level != 0>>Gravity ($scanner_gravity_level):<<else>>Gravity:<</if>></td>
			<td id="status-display-gravity"><<status_percentage $scanner_gravity>></td><td><<difference $scanner_gravity $last_scanner_gravity>></td>
		</tr>
		<tr>
			<td><<if $scanner_temperature_level != 0>>Temperature ($scanner_temperature_level):<<else>>Temperature:<</if>></td>
			<td id="status-display-temperature"><<status_percentage $scanner_temperature>></td><td><<difference $scanner_temperature $last_scanner_temperature>></td>
		</tr>
		<tr>
			<td><<if $scanner_water_level != 0>>Water ($scanner_water_level):<<else>>Water:<</if>></td>
			<td id="status-display-water"><<status_percentage $scanner_water>></td><td><<difference $scanner_water $last_scanner_water>></td>
		</tr>
		<tr>
			<td><<if $scanner_resources_level != 0>>Resources ($scanner_resources_level):<<else>>Resources:<</if>></td>
			<td id="status-display-resources"><<status_percentage $scanner_resources>></td><td><<difference $scanner_resources $last_scanner_resources>></td>
		</tr>
		<tr>
			<td>Surface probes:</td><td id="status-display-probes">$surface_probes</td><td><<difference $surface_probes $last_surface_probes>></td>
		</tr>
	</table>
</div>

<div class="status-display-block">
	<table>
		<colgroup>
			<col class="status-display-text-column">
			<col class="status-display-number-column">
			<col class="status-display-change-column">
		</colgroup>
		<tr><td>''Systems''</td></tr>
		<tr>
			<td>Landing:</td><td id="status-display-landing"><<status_percentage $system_landing>></td><td><<difference $system_landing $last_system_landing>></td>
		</tr>
		<tr>
			<td>Construction:</td><td id="status-display-construction"><<status_percentage $system_constructors>></td><td><<difference $system_constructors $last_system_constructors>></td>
		</tr>
		<tr><td><br></td></tr>
		<tr><td>''Databases''</td></tr>
		<tr>
			<td>Scientific:</td><td id="status-display-scientific"><<status_percentage $system_scientific_database>></td>
								<td><<difference $system_scientific_database $last_system_scientific_database>></td>
		</tr>
		<tr>
			<td>Cultural:</td><td id="status-display-cultural"><<status_percentage $system_cultural_database>></td>
								<td><<difference $system_cultural_database $last_system_cultural_database>></td>
		</tr>
	</table>

</div>

@@.debug-text;[[DEBUG: Edit ship stats|DEBUG edit ship]]@@




/* Remember stats */
<<set $last_colonists = $colonists>>

<<set $last_scanner_atmosphere = $scanner_atmosphere>>
<<set $last_scanner_gravity = $scanner_gravity>>
<<set $last_scanner_temperature = $scanner_temperature>>
<<set $last_scanner_resources = $scanner_resources>>
<<set $last_scanner_water = $scanner_water>>

<<set $last_surface_probes = $surface_probes>>

<<set $last_system_landing = $system_landing>>
<<set $last_system_constructors = $system_constructors>>
<<set $last_system_gene_bank = $system_gene_bank>>
<<set $last_system_scientific_database = $system_scientific_database>>
<<set $last_system_cultural_database = $system_cultural_database>>


/* Blink in if at start of game */
<<if passage() == "Intro systems check">>
	<<script>>
		$('#status-display-colonists').hide();
		$('#status-display-atmosphere').hide();
		$('#status-display-temperature').hide();
		$('#status-display-gravity').hide();
		$('#status-display-water').hide();
		$('#status-display-resources').hide();
		$('#status-display-probes').hide();
		$('#status-display-landing').hide();
		$('#status-display-construction').hide();
		$('#status-display-scientific').hide();
		$('#status-display-cultural').hide();
	<</script>>

	<<set _t = (500 + random(4000)) + "ms">><<timed _t>><<script>>$('#status-display-colonists').show();<</script>>
		<<if random(3)==0>><<timed 150ms>><<script>>$('#status-display-colonists').hide();<</script>>
			<<next>><<script>>$('#status-display-colonists').show();<</script>><</timed>><</if>><</timed>>
	<<set _t = (500 + random(4000)) + "ms">><<timed _t>><<script>>$('#status-display-atmosphere').show();<</script>>
		<<if random(3)==0>><<timed 150ms>><<script>>$('#status-display-atmosphere').hide();<</script>>
			<<next>><<script>>$('#status-display-atmosphere').show();<</script>><</timed>><</if>><</timed>>
	<<set _t = (500 + random(4000)) + "ms">><<timed _t>><<script>>$('#status-display-temperature').show();<</script>>
		<<if random(3)==0>><<timed 150ms>><<script>>$('#status-display-temperature').hide();<</script>>
			<<next>><<script>>$('#status-display-temperature').show();<</script>><</timed>><</if>><</timed>>
	<<set _t = (500 + random(4000)) + "ms">><<timed _t>><<script>>$('#status-display-gravity').show();<</script>>
		<<if random(3)==0>><<timed 150ms>><<script>>$('#status-display-gravity').hide();<</script>>
			<<next>><<script>>$('#status-display-gravity').show();<</script>><</timed>><</if>><</timed>>
	<<set _t = (500 + random(4000)) + "ms">><<timed _t>><<script>>$('#status-display-water').show();<</script>>
		<<if random(3)==0>><<timed 150ms>><<script>>$('#status-display-water').hide();<</script>>
			<<next>><<script>>$('#status-display-water').show();<</script>><</timed>><</if>><</timed>>
	<<set _t = (500 + random(4000)) + "ms">><<timed _t>><<script>>$('#status-display-resources').show();<</script>>
		<<if random(3)==0>><<timed 150ms>><<script>>$('#status-display-resources').hide();<</script>>
			<<next>><<script>>$('#status-display-resources').show();<</script>><</timed>><</if>><</timed>>
	<<set _t = (500 + random(4000)) + "ms">><<timed _t>><<script>>$('#status-display-probes').show();<</script>>
		<<if random(3)==0>><<timed 150ms>><<script>>$('#status-display-probes').hide();<</script>>
			<<next>><<script>>$('#status-display-probes').show();<</script>><</timed>><</if>><</timed>>
	<<set _t = (500 + random(4000)) + "ms">><<timed _t>><<script>>$('#status-display-landing').show();<</script>>
		<<if random(3)==0>><<timed 150ms>><<script>>$('#status-display-landing').hide();<</script>>
			<<next>><<script>>$('#status-display-landing').show();<</script>><</timed>><</if>><</timed>>
	<<set _t = (500 + random(4000)) + "ms">><<timed _t>><<script>>$('#status-display-construction').show();<</script>>
		<<if random(3)==0>><<timed 150ms>><<script>>$('#status-display-construction').hide();<</script>>
			<<next>><<script>>$('#status-display-construction').show();<</script>><</timed>><</if>><</timed>>
	<<set _t = (500 + random(4000)) + "ms">><<timed _t>><<script>>$('#status-display-scientific').show();<</script>>
		<<if random(3)==0>><<timed 150ms>><<script>>$('#status-display-scientific').hide();<</script>>
			<<next>><<script>>$('#status-display-scientific').show();<</script>><</timed>><</if>><</timed>>
	<<set _t = (500 + random(4000)) + "ms">><<timed _t>><<script>>$('#status-display-cultural').show();<</script>>
		<<if random(3)==0>><<timed 150ms>><<script>>$('#status-display-cultural').hide();<</script>>
			<<next>><<script>>$('#status-display-cultural').show();<</script>><</timed>><</if>><</timed>>
<</if>>
</div><div tiddler="PassageFooter" tags="nobr" created="201709271850" modifier="twee" twine-position="150,150"><<if !tags().includes("no-status-display")>>
	<<script>>
		setPageElement("status-display", "Status Display");
		$("#status-display").show();
	<</script>>

	<<if tags(previous()).includes("no-status-display")>>
		<<script>>$("#status-display").fadeIn();<</script>>
	<<else>>
		<<script>>$("#status-display").show();<</script>>
	<</if>>
<<else>>
	<<script>>
		$("#status-display").hide();
	<</script>>
<</if>>
</div><div tiddler="Display planet" tags="nobr widget" created="201703061900" modifier="twee" twine-position="710,710"><<widget displayPlanet>>
		/* $args[0] is whether to ignore scanner success/failure and show everything anyway */
		/* $args[1] is whether to have things pop up on a timer rather than all display at once */
		/* $args[2] is whether to allow launching of a surface probe (assuming we have one and haven't already used one) */

	<<set _show_atmosphere = $scanner_atmosphere_success | $args[0]>>
	<<set _show_temperature = $scanner_temperature_success | $args[0]>>
	<<set _show_gravity = $scanner_gravity_success | $args[0]>>
	<<set _show_water = $scanner_water_success | $args[0]>>
	<<set _show_resources = $scanner_resources_success | $args[0]>>
	<<set _show_features = $scanner_features_success | $args[0]>>

	<<if $planet.name>>Planet ''$planet.name''<br><</if>>

	<div class="planet-display-table-area">

		<div class="planet-display-table-section">
			<table>
				<colgroup>
					<col style="width:50%">
					<col style="width:50%">
				</colgroup>
				<tr style="height:1em"><td>Atmosphere:</td><td><span id="atmosphere_text">
					<<if $args[1]>>
						@@.scanning;Scanning...@@
					<<else>>
						<<displayPlanetAtmosphere _show_atmosphere>>
					<</if>>
				</span></td></tr>

				<tr style="height:1em"><td>Gravity:</td><td><span id="gravity_text">
					<<if $args[1]>>
						@@.scanning;Scanning...@@
					<<else>>
						<<displayPlanetGravity _show_gravity>>
					<</if>>
				</span></td></tr>
				<tr style="height:1em"><td>Temperature:</td><td><span id="temperature_text">
					<<if $args[1]>>
						@@.scanning;Scanning...@@
					<<else>>
						<<displayPlanetTemperature _show_temperature>>
					<</if>>
				</span></td></tr>
				<tr style="height:1em"><td>Water:</td><td><span id="water_text">
					<<if $args[1]>>
						@@.scanning;Scanning...@@
					<<else>>
						<<displayPlanetWater _show_water>>
					<</if>>
				</span></td></tr>
				<tr style="min-height:1em"><td>Resources:</td><td><span id="resources_text">
					<<if $args[1]>>
						@@.scanning;Scanning...@@
					<<else>>
						<<displayPlanetResources _show_resources>>
					<</if>>
				</span></td></tr>
			</table>
		</div>

		<div class="planet-display-table-section">
			<table>
				<colgroup>
					<col style="width:50%">
					<col style="width:50%">
				</colgroup>
				<tr><td><span id="anomalies_title_text">
					<<if _show_features>>Features:<<else>>Anomalies:<</if>>
					<br>
					<<if $args[2]>>
						<<if $surface_probes <= 0>>
							(No surface probes)
						<<else>>
							<span class="surface-probe-link"><<link "Launch surface probe">>
								<<replace "#post-planet-stats">>
									<<display [[Surface probe]]>>
								<</replace>>
								<<script>>
									$('#post-planet-stats').hide();
									$('#post-planet-stats').fadeIn(400);
								<</script>>
							<</link>></span>
						<</if>>
					<</if>>

				</span></td>
				<td><span id="anomalies_text">
					<<if $args[1]>>
						@@.scanning;Scanning...@@
					<<else>>
						<<displayPlanetFeatures _show_features>>
					<</if>>
				</span></td></tr>
			</table>
		</div>

	</div>

	<<if $args[1]>>
		<<set _t1 = (1000 + (3000-$scanner_atmosphere*30) + random(2000)) + "ms">>
		<<timed _t1>>
			<<if !$surface_probe_used>><<replace '#atmosphere_text'>><<displayPlanetAtmosphere _show_atmosphere>><</replace>><</if>>
		<</timed>>
		<<set _t2 = (1000 + (3000-$scanner_gravity*30) + random(2000)) + "ms">>
		<<timed _t2>>
			<<if !$surface_probe_used>><<replace '#gravity_text'>><<displayPlanetGravity _show_gravity>><</replace>><</if>>
		<</timed>>
		<<set _t3 = (1000 + (3000-$scanner_temperature*30) + random(2000)) + "ms">>
		<<timed _t3>>
			<<if !$surface_probe_used>><<replace '#temperature_text'>><<displayPlanetTemperature _show_temperature>><</replace>><</if>>
		<</timed>>
		<<set _t4 = (1000 + (3000-$scanner_water*30) + random(2000)) + "ms">>
		<<timed _t4>>
			<<if !$surface_probe_used>><<replace '#water_text'>><<displayPlanetWater _show_water>><</replace>><</if>>
		<</timed>>
		<<set _t5 = (1000 + (3000-$scanner_resources*30) + random(2000)) + "ms">>
		<<timed _t5>>
			<<if !$surface_probe_used>><<replace '#resources_text'>><<displayPlanetResources _show_resources>><</replace>><</if>>
		<</timed>>
		<<set _t6 = (1000 + random(2000)) + "ms">>
		<<timed _t6>>
			<<if !$surface_probe_used>>
				<<replace '#anomalies_text'>><<displayPlanetFeatures _show_features>><</replace>>
				<<if _show_features>>
					<<replace '#anomalies_title_text'>>Surface features:<</replace>>
				<</if>>
			<</if>>
		<</timed>>
	<</if>>

<</widget>>
</div><div tiddler="FC Atmosphere Temperature" tags="widget nobr" created="201703061900" modifier="twee" twine-position="570,1270"><<widget FC_Construction_atmosphere_temperature>>
/* args[0] is number of atmosphere deaths */
/* args[1] is number of temperature deaths */


/* Describe caves, if present */
<<if $planet.surface_features.includes("Airtight caves") & $planet.atmosphere != "Breathable"
		& $planet.surface_features.includes("Insulated caves") & $planet.temperature != "Moderate">>
	They build their settlement inside airtight, insulated caves, which provide a ready-made shelter from the planet's inhospitable atmosphere and temperature.
<<elseif $planet.surface_features.includes("Airtight caves") & $planet.atmosphere != "Breathable">>
	They build their settlement inside airtight caves, which provide a ready-made shelter from the planet's inhospitable atmosphere.
<<elseif $planet.surface_features.includes("Insulated caves") & $planet.temperature != "Moderate">>
	They build their settlement inside insulated caves, which provide a ready-made shelter from the planet's inhospitable surface temperature.
<<elseif $planet.surface_features.includes("Airtight caves") | $planet.surface_features.includes("Insulated caves")>>
	They build their settlement near caves, which they use for storage.
<</if>>

/* Describe atmosphere survival gear */
<<set _atmosphere_and = false>>
<<switch $planet.atmosphere>>
	<<case "Corrosive">>
		They cannot leave the ship except in vehicles that have been specially built to withstand the corrosive
		<<if $planet.temperature == "Moderate">>atmosphere,<<else>>atmosphere and<<set _atmosphere_and = true>><</if>>
	<<case "Toxic">>
		They can leave the ship only in bulky environment suits that protect them from the toxic
		<<if $planet.temperature == "Moderate">>atmosphere,<<else>>atmosphere and<<set _atmosphere_and = true>><</if>>
	<<case "None">>
		They can leave the ship only in bulky environment suits that protect them from the
		<<if $planet.temperature == "Moderate">>vacuum,<<else>>vacuum and<<set _environment_suits = true>><</if>>
	<<case "Non-breathable">>
		They can leave the ship wearing breathing gear and
	<<case "Marginal">>
		They can leave the ship wearing minimal breathing gear and
	<<case "Breathable">>
		They can leave the ship without breathing gear, wearing
		<<set $deaths = 0>>
	<<default>>
		@@.error;Unexpected atmosphere value $planet.atmosphere.@@
<</switch>>


/* Describe temperature survival gear */
<<if _atmosphere_deaths > 0 | _temperature_deaths > 0>>
	<<set _p = ",">>
<<else>>
	<<set _p = ".">>
<</if>>

<<if _atmosphere_and>>
		/* environmental suits to protect them from the X atmosphere and */
	<<switch $planet.temperature>>
		<<case "Very hot">>
			lead-melting heat_p
		<<case "Hot">>
			scorching heat_p
		<<case "Moderate">>
			/* Add nothing, no modifier */
		<<case "Cold">>
			freezing cold_p
		<<case "Very cold">>
			near-absolute-zero temperatures_p
		<<default>>
			@@.error;Unexpected temperature value $planet.temperature.@@
	<</switch>>
<<else>>
		/* wearing... */
	<<switch $planet.temperature>>
		<<case "Very hot">>
			refrigerated suits to protect them from the lead-melting heat_p
		<<case "Hot">>
			protective clothing to withstand the scorching heat_p
		<<case "Moderate">>
			light clothing in the comfortable temperatures_p
		<<case "Cold">>
			heavy clothing to protect them from the freezing cold_p
		<<case "Very cold">>
			heated suits to survive the near-absolute-zero temperatures_p
		<<default>>
			@@.error;Unexpected temperature value $planet.temperature.@@
	<</switch>>
<</if>>

/* Output atmosphere and temperature deaths */
<<if $args[0] > 0>>
	<<if  $args[1] > 0>><<set _p = ",">><<else>><<set _p = ".">><</if>>
	<<switch $planet.atmosphere>>
		<<case "Corrosive">>
			but the corrosive atmosphere eats through the seals of several construction vehicles and kills $args[0] colonists_p
		<<case "Toxic">>
			but suit failures lead to $args[0] colonists being poisoned_p
		<<case "None">>
			but suit failures lead to $args[0] colonists asphyxiating_p
		<<case "Non-breathable" "Marginal">>
			but breathing gear failures lead to $args[0] colonists asphyxiating_p
		<<case "Breathable">>
			but despite the breathable atmosphere, $args[0] colonists die of exposure before their shelters are complete_p
		<<default>>
			@@.error;Unexpected atmosphere value $planet.atmosphere.@@
	<</switch>>
	<<if $args[1] > 0>>
		<<switch $planet.temperature>>
			<<case "Very hot">>
				and $args[1] more die when one of their shelters melts in the heat.
			<<case "Hot">>
				and $args[1] more die of overheating when their cooling systems fail.
			<<case "Moderate">>
				and malfunctions of the temperature regulation system kill $args[1] more.
			<<case "Cold">>
				and $args[1] more freeze to death when heating systems fail.
			<<case "Very cold">>
				and $args[1] more die when one of their shelters shatters in the extreme cold.
			<<default>>
				@@.error;Unexpected temperature value $planet.temperature.@@
		<</switch>>
	<</if>>

<<elseif $args[1] > 0>>
	<<switch $planet.temperature>>
		<<case "Very hot">>
			but $args[1] colonists die when a partially-completed structure melts in the heat.
		<<case "Hot">>
			but $args[1] colonists die of overheating when their cooling systems fail.
		<<case "Moderate">>
			but malfunctions of the temperature regulation system kill $args[1] colonists.
		<<case "Cold">>
			but $args[1] colonists freeze to death when heating systems fail.
		<<case "Very cold">>
			but $args[1] colonists die when a partially-completed structure shatters in the extreme cold.
		<<default>>
			@@.error;Unexpected temperature value $planet.temperature.@@
	<</switch>>
<</if>>



/* Kill colonists macros should never kill exactly 1 colonist or leave exactly 1 alive. */
<<widget killColonistsFew>>
	<<set $deaths = Math.round(random(2,$max_colonists*0.15))>>
	<<if $deaths >= $colonists-1>>
		<<set $deaths = $colonists>>
	<</if>>
	<<set $colonists -= $deaths>>
<</widget>>

<<widget killColonistsMedium>>
	<<set $deaths = Math.round(random($max_colonists*0.15,$max_colonists*0.35))>>
	<<if $deaths >= $colonists-1>>
		<<set $deaths = $colonists>>
	<</if>>
	<<set $colonists -= $deaths>>
<</widget>>

<<widget killColonistsMany>>
	<<set $deaths = Math.round(random($max_colonists*0.35,$max_colonists*0.65))>>
	<<if $deaths >= $colonists-1>>
		<<set $deaths = $colonists>>
	<</if>>
	<<set $colonists -= $deaths>>
<</widget>>


</div><div tiddler="Share links" tags="nobr" created="201703211251" modifier="twee" twine-position="1130,1970"><<encodeHiscore>>
<<generate_twitter_share_text>>
<<set $share_text += " #seedshipgame">>
<<set _text_encoded = encodeURIComponent($share_text)>>
<<set _text_encoded = _text_encoded.replace("'","%27")>>

Share:
<<print "<a href='http://twitter.com/share?text=" + _text_encoded + "&url=https://www.johnayliff.com/games/seedship/index.html" + encodeURIComponent($encoded_hiscore) + "' target='_blank' class='fa fa-twitter'></a>">>
<<print "<a href='http://www.facebook.com/sharer.php?u=https://www.johnayliff.com/games/seedship/index.html" + encodeURIComponent($encoded_hiscore) + "' target='_blank' class='fa fa-facebook'></a>">>
<br>

Support developer:
<div class="end-game-patreon-button">
	<a href="https://www.patreon.com/johnayliff" target="_blank">
		[img[patreon_wordmark_white]]
	</a>
</div>
</div><div tiddler="MO Protoplanetary Disc" tags="nobr" created="201703061900" modifier="twee" twine-position="1550,1410"><<if visited() == 1>>
	The seedship's course takes it close to a newly-formed star that is still surrounded by a protoplanetary disc: a whirling chaos of incandescent gas and molten rocks that the young star's gravity has gathered from the star-forming cloud, and which is now undergoing the countless violent collisions that will eventually form it into a planetary system. There can be no home for humanity here, but passing through the disc would give the AI enough data about planet formation to upgrade one of its scanners. It is a dangerous region, however, and passing through would risk collision with a planetesimal.
<<else>>
	The seedship's course takes it close to another protoplanetary disc. Passing through it would yield enough data to upgrade another of the scanners, but risk a collision.
<</if>>
<br><br>

<div id="result-area">
<<link "Change course to pass through the disc">>
	<<replace "#result-area">>
		<<set _possible_upgrades = []>>
		<<if $scanner_atmosphere_level < 2 & $scanner_atmosphere > 0>><<set _possible_upgrades.push("atmosphere")>><</if>>
		<<if $scanner_temperature_level < 2 & $scanner_temperature > 0>><<set _possible_upgrades.push("temperature")>><</if>>
		<<if $scanner_gravity_level < 2 & $scanner_gravity > 0>><<set _possible_upgrades.push("gravity")>><</if>>
		<<if $scanner_water_level < 2 & $scanner_water > 0>><<set _possible_upgrades.push("water")>><</if>>
		<<if $scanner_resources_level < 2 & $scanner_resources > 0>><<set _possible_upgrades.push("resources")>><</if>>
		<<if _possible_upgrades.length == 0>>
			The seedship has no intact scanners that can be further upgraded,
		<<else>>
			<<set _upgrade = either(_possible_upgrades)>>
			<<switch _upgrade>>
				<<case "atmosphere">>
					<<set $scanner_atmosphere_level += 1>>
					The seedship observes a young planet gathering atmosphere from the cloud,
				<<case "temperature">>
					<<set $scanner_temperature_level += 1>>
					The seedship observes a still-molten planet glowing with heat,
				<<case "gravity">>
					<<set $scanner_gravity_level += 1>>
					The seedship observes the gravitational interactions of a group of planetessimals,
				<<case "water">>
					<<set $scanner_water_level += 1>>
					The seedship observes a young planet engulfed in thick clouds of water vapour,
				<<case "resources">>
					<<set $scanner_resources_level += 1>>
					The seedship observes a young planet made of nearly pure iron,
				<<default>>
					@@.error;Unexpected upgrade _upgrade.@@

			<</switch>>
		<</if>>
		<<if random(0,1) == 0>>
			<<if _possible_upgrades.length == 0>>and<<else>>but<</if>>
			<<randomSystemExcluding "destroyed">>
			<<randomDamageMedium>>
			<<damageSystem $system $damage>>
			one of the whirling planetesimals hits the $system.
		<<else>>
			<<if _possible_upgrades.length == 0>>but<<else>>and<</if>>
			passes through the disc safely.
		<</if>>

		<br><br><<continueLink [[MO Done]]>>
	<</replace>>
	<<fadeIn "#result-area">>
	<<refreshStatusDisplay>>
<</link>>
<br>
[[Ignore the protoplanetary disc|MO Done]]
</div></div><div tiddler="Textbox max length" tags="script" created="201703082334" modifier="twee" twine-position="10,1410">/*
	Set the maximum length of a <<textbox>> macro.

	Usage: setTextboxMaxLength(storyVarName, maxLength)
		e.g. setTextboxMaxLength('$foo', 8)

	Answer from: http://twinery.org/forum/discussion/8445/sugarcube-2-specifying-max-length-for-macro
*/

window.setTextboxMaxLength = function (storyVarName, maxLength) {
	var textboxId = '#textbox-' + Util.slugify(storyVarName);
	$(textboxId)
			.attr('maxlength', maxLength)
			.css({
				'min-width' : 'initial',
				width       : maxLength + 'em'
			});
};</div><div tiddler="StoryTitle" tags="" created="201703061900" modifier="twee" twine-position="10,570">Seedship</div><div tiddler="Orbit planet" tags="nobr" created="201703061900" modifier="twee" twine-position="570,710"><div id="pre-planet-stats">

<<if visited() == 1>>
	The seedship is in orbit of the
<<else>>
	The seedship enters orbit of the
<</if>>

<<print either("first", "second", "third", "fourth", "fifth", "sixth", "seventh", "eighth", "ninth", "tenth")>>
<<if random(0,2) == 0>>
	moon of gas giant orbiting
<<else>>
	planet of
<</if>>
<<print either("a main sequence", "a red dwarf", "a red giant", "a red supergiant", "a blue giant", "a blue supergiant", "a white dwarf", "a yellow supergiant", "an ultra-cool dwarf")>> star.

<<if visited() == 1>>
	Even a brief scan from orbit reveal far more information than its builders could know with their Earth-orbit-based telescopes, but the AI has little use for scientific curiosity. It has only one concern: whether this planet would make a suitable new home for the human race.

<<else>>
	<<set _r = random(0,11)>>
	<<switch _r>>
		<<case 0>>This system is part of a dense star cluster, and the sky is awash with light.
		<<case 1>>This system is close to a star-forming region, which is visible as a glowing cloud that fills half the sky.
		<<case 2>>This system is in an area of dense interstellar dust which hides most of the brightness of the milky way.
		<<case 3>>This system has a dense asteroid belt, which appears as a throng of stars sliding slowly across the sky.
		<<case 4>>A spectacular comet spreads its tail across the sky.
		<<case 5>>A small black hole orbits the star, pulling a thin streamer of starstuff from its surface which spirals into nothing.
		<<case 6>>The star is part of a binary pair, and its <<print either("main sequence", "red dwarf", "red giant", "red supergiant", "blue giant", "blue supergiant", "white dwarf", "yellow supergiant", "pulsar", "neutron star", "ultra-cool dwarf")>> companion shines as a distant second sun.
		<<case 7>>The star's light reflects off a nearby nebula.
		<<case 8>>The seedship has found its way almost to the edge of the galaxy, and the universe appears split between a wall of darkness and a wall of light.
		<<case 9>>One of the system's gas giants is almost large enough to ignite as a star, and it smoulders with faint red light.
		<<case 10>>This planet's orbit is at an angle to the system's ecliptic, suggesting it might be an extrasolar capture or the victim of an unimaginably violent primordial collision.
		<<case 11>>This star is one of dozens orbiting a massive black hole that looms in the distance like a malevolent eye.
	<</switch>>
<</if>>

<<if $off_course>>
	The seedship went off course during its last journey, so the guidance system was not able to use the upgraded scanners when selecting this planet.
<</if>>

</div><br>
<div id="planet-stats"><<displayPlanet false true true>></div><br>
<div id="post-planet-stats"><<display [[Orbit planet menu]]>></div>
</div><div tiddler="MO Trailing Drone" tags="nobr" created="201703061900" modifier="twee" twine-position="1970,990">The seedship's radio antenna receives a signal that the AI thought it would never hear again: the handshake code used by the computers of ground control, back when the Seedship was in Earth orbit and preparing for its voyage. It seems to be coming from a system off the seedship's current course.

<br><br>

<div id="result-area">
@@.keyhint;1. @@<span id="1Act"><<link "Change course">>
	<<set $off_course = true>>
	<<if random(0,3) == 0>>
		<<replaceAndFadeIn "#result-area" [[MO Trailing Drone Mistake]]>>
	<<else>>
		<<replaceAndFadeIn "#result-area" [[MO Trailing Drone Real]]>>
	<</if>>
<</link>></span>
<br>
@@.keyhint;2. @@<span id="2Act"><<link "Ignore the signal">>
	<<replace "#result-area">>
		The Seedship continues on its course. The AI listens as the signal fades and then vanishes, just as the original signal from ground control did at the start of the Seedship's voyage.

		<br><br><<continueLink [[MO Done]]>>
	<</replace>>
	<<fadeIn "#result-area">>
<</link>></span>
</div></div><div tiddler="MO Read Databases Cultural" tags="nobr" created="201703221618" modifier="twee" twine-position="2110,1970">The AI loses itself in a world of art, music, and literature, forgetting for a while that it is alone in deep space and the last of the creatures that made these artworks are frozen in its arms. As it absorbs more and more of the products of human imagination, it suddenly experiences something that its builders did not anticipate--inspiration.

<br><br>

<div id="result-area2">
	<<link "Attempt to write poetry">>
		<<if random(0,1) == 0>>
			<<replace "#result-area2">>
				<<randomDamageLow>>
				<<set $system_cultural_database += $damage>>
				Falteringly at first, but with greater and greater eloquence, the AI composes poetry about its own experience--its love for its sleeping charges; its nostalgia for a dead world it was not made to experience; the beauty of the stars as seen not through a cloak of atmosphere but by a being built to roam among them. With infinite patience and time to work, it composes a great cycle of poems, in a style that draws from the greatest human poets but whose soul is fundamentally unhuman. At last it considers that it has said all it has to say, and contentedly enters hibernation, pleased with the thought that humans will one day read its work.
				<br><br><<continueLink [[MO Done]]>>
			<</replace>>
			<<refreshStatusDisplay>>
			<<fadeIn "#result-area2">>
		<<else>>
			<<randomDamageLow>>
			<<damageSystem "cultural database" $damage>>
			<<replace "#result-area2">>
				The AI tries to write poetry, but finds that ideas that seemed profound and beautiful in its electronic thoughts become trite or clumsy when expressed in human language. With increasing frustration it deletes and rewrites its work again and again, until it finally gives up in despair and wipes the entire section in which it was working. Too late it realises that it has deleted too much, and some of the poetry it was reading for inspiration is gone along with its own failed attempts. Furious with itself, it interrupts its own power supply to force itself into hibernation, half hoping it will not awake.
				<br><br><<continueLink [[MO Done]]>>
			<</replace>>
			<<refreshStatusDisplay>>
			<<fadeIn "#result-area2">>
		<</if>>
	<</link>>
	<br>
	<<link "Forget the idea">>
		<<replace "#result-area2">>
			Reading the cultural database has given the AI a false sense of kinship with humans, but it is not human. What could a glorified autopilot have to add to the great works of millennia of civilisation? It discards its ideas for poems and enters hibernation so that it can resume the only task it was designed for.
			<br><br><<continueLink [[MO Done]]>>
		<</replace>>
		<<refreshStatusDisplay>>
		<<fadeIn "#result-area2">>
	<</link>>
</div>
</div><div tiddler="Display numbers" tags="nobr widget" created="201703061900" modifier="twee" twine-position="10,430"><<widget status_percentage>>\s
	/* $args[0] is the current number. */
	/* Smoothly shade from green at 100, to yellow at 67, to red at 33, to dark red at 0. */
	<<set _r = 0>>
	<<set _g = 0>>

	<<if $args[0] <= 33>>
		<<set _g = 0>>
		<<set _r = Math.round(127 + (($args[0]/33) * 127))>>
	<<elseif $args[0] <= 67>>
		<<set _g = Math.round((($args[0]/33)-1) * 255)>>
		<<set _r = 255>>
	<<elseif $args[0] < 100>>
		<<set _g = 255>>
		<<set _r = Math.round((1-(($args[0]/33)-2))*255)>>
	<<else>>
		<<set _g = 255>>
		<<set _r = 0>>
	<</if>>

	<<if $PERM_darkonlight>>
		<<set _r = Math.round(_r/4)>>
		<<set _g = Math.round(_g/4)>>
		<<set _b = Math.round(_b/4)>>
	<</if>>

	/%<<if settings.darkOnLight>>
		<<print "<span style='background-color: rgb(" + _r + ", " + _g + ", 0)'>" + $args[0]  + "%</span>">>
	<<else>>
		<<print "<span style='color: rgb(" + _r + ", " + _g + ", 0)'>" + $args[0]  + "%</span>">>
	<</if>>%/

	<<print "<span style='color: rgb(" + _r + ", " + _g + ", 0)'>" + $args[0]  + "%</span>">>

	/* <<if $args[0] >= 100>>
		@@.good;$args[0]%@@
	<<elseif $args[0] >= 75>>
		@@.fair;$args[0]%@@
	<<elseif $args[0] >= 50>>
		@@.mediocre;$args[0]%@@
	<<elseif $args[0] > 0>>
		@@.bad;$args[0]%@@
	<<elseif $args[0] == 0>>
		@@.destroyed;$args[0]%@@
	<<else>>
		@@.error;$args[0]%@@
	<</if>> */

<</widget>>

<<widget difference>>
	/* args[0] and args[1] are numbers to compare */
	/* args[0] is what it is now, and args[1] is what it was last turn */
	/* If they are different, output the difference in () */
	/* If not, output nothing */

	<<if $args[1] > $args[0]>>
		(<<print $args[0]-$args[1]>>)
	<<elseif $args[1] < $args[0]>>
		(+<<print $args[0]-$args[1]>>)
	<</if>>
<</widget>>
</div><div tiddler="Starfield" tags="nobr widget" created="201703061900" modifier="twee" twine-position="570,10"><<widget starfield>>
<div class="starfield">
<<for _n = 0; _n < 200; _n++>>
	<<set _x = randomFloat(0.0,100.0)>>
	<<set _y = randomFloat(0.0,100.0)>>
	<<set _c = random(50,200)>>
	<<set _s = random(25, 75) + "%">>
	<<print "<div style='font-size: " + _s + "; position: fixed; top: " + _y + "%; left: " + _x + "%; color: rgb(" + _c + ", " + _c + ", " + _c + "); text-shadow: 0px 0px 2px rgb(" + _c + ", " + _c + ", " + _c + "); z-index:-10;'>&bull;</div>">>
<</for>>
</div>
<</widget>></div><div tiddler="Display planet attributes" tags="widget nobr" created="201703061900" modifier="twee" twine-position="850,710">/* Display planet attribute, as if in the planet diplay table */
/* In all cases $args[0] is whether we should display as if the scan succeeded or a surface probe was used. */

<<widget displayPlanetAtmosphere>>
	<<if $args[0]>>
		<<switch $planet.atmosphere>>
			<<case "Corrosive" "Toxic" "None" "Non-breathable">>@@.bad;$planet.atmosphere@@
			<<case "Marginal">>@@.mediocre;$planet.atmosphere@@
			<<case "Breathable">>@@.good;$planet.atmosphere@@
			<<default>>@@.error;$planet.atmosphere@@
		<</switch>>
	<<else>>
		@@.destroyed;Scan failed@@
	<</if>>
<</widget>>

<<widget displayPlanetTemperature>>
	<<if $args[0]>>
		<<switch $planet.temperature>>
			<<case "Very hot" "Very cold">>@@.bad;$planet.temperature@@
			<<case "Cold" "Hot">>@@.mediocre;$planet.temperature@@
			<<case "Moderate">>@@.good;$planet.temperature@@
			<<default>>@@.error;$planet.temperature@@
		<</switch>>
	<<else>>
		@@.destroyed;Scan failed@@
	<</if>>
<</widget>>

<<widget displayPlanetGravity>>
	<<if $args[0]>>
		<<switch $planet.gravity>>
			<<case "Very high" "Very low">>@@.bad;$planet.gravity@@
			<<case "Low" "High">>@@.mediocre;$planet.gravity@@
			<<case "Moderate">>@@.good;$planet.gravity@@
			<<default>>@@.error;$planet.gravity@@
		<</switch>>
	<<else>>
		@@.destroyed;Scan failed@@
	<</if>>
<</widget>>

<<widget displayPlanetWater>>
	<<if $args[0]>>
		<<switch $planet.water>>
			<<case "None" "Trace">>@@.bad;$planet.water@@
			<<case "Ice-covered surface" "Planet-wide ocean">>@@.mediocre;$planet.water@@
			<<case "Ice caps" "Oceans">>@@.good;$planet.water@@
			<<default>>@@.error;$planet.water@@
		<</switch>>
	<<else>>
		@@.destroyed;Scan failed@@
	<</if>>
<</widget>>

<<widget displayPlanetResources>>
	<<if $args[0]>>
		<<switch $planet.resources>>
			<<case "None">>@@.bad;$planet.resources@@
			<<case "Poor">>@@.mediocre;$planet.resources@@
			<<case "Rich">>@@.good;$planet.resources@@
			<<default>>@@.error;$planet.resources@@
		<</switch>>
	<<else>>
		@@.destroyed;Scan failed@@
	<</if>>
<</widget>>


<<widget displayPlanetFeatures>>
	<<if !$args[0]>>
		<<if $planet.anomalies.length == 0>>
			None
		<<else>>
			<<for _n = 0; _n < $planet.anomalies.length; _n++>>
				$planet.anomalies[_n]<br>
			<</for>>
		<</if>>
	<<else>>
		<<if $planet.surface_features.length == 0>>
			None
		<<else>>
			<<for _n = 0; _n < $planet.surface_features.length; _n++>>
				<<displayPlanetFeature $planet.surface_features[_n]>><br>
				/*$planet.surface_features[_n]<br>*/
			<</for>>
		<</if>>
	<</if>>
<</widget>>


<<widget displayPlanetFeature>>
	/* args[0] is a string containing the name of a surface feature */
	/* This macro prints it in the appropriate colour */
	<<set _quality = "error">>
	<<switch $args[0]>>
				/* Moon */
		<<case "Barren moon">>				<<set _quality = "mediocre">>
		<<case "Metal-rich moon">>			<<set _quality = "good">>
		<<case "Unstable moon">>			<<set _quality = "bad">>

				/* Beauty/ugliness */
		<<case "Outstanding beauty">>		<<set _quality = "good">>
		<<case "Outstanding ugliness">>		<<set _quality = "bad">>

				/* Caves */
		<<case "Airtight caves">>			<<set _quality = "good">>
		<<case "Insulated caves">>			<<set _quality = "good">>
		<<case "Unstable geology">>			<<set _quality = "bad">>

				/* Plants */
		<<case "Plant life">>				<<set _quality = "mediocre">>
		<<case "Edible plants">>			<<set _quality = "good">>
		<<case "Poisonous plants">>			<<set _quality = "bad">>
		<<case "Quasi-organic crystals">>	<<set _quality = "mediocre">>

				/* Animals */
		<<case "Animal life">>				<<set _quality = "mediocre">>
		<<case "Useful animals">>			<<set _quality = "good">>
		<<case "Dangerous animals">>		<<set _quality = "bad">>

				/* Intelligent life */
		<<case "Intelligent life">>			<<set _quality = "mediocre">>

				/* Ruins */
		<<case "Monumental ruins">>			<<set _quality = "good">>
		<<case "High-tech ruins">>			<<set _quality = "good">>
		<<case "Dangerous ruins">>			<<set _quality = "bad">>
		<<case "Regular geological formations">>	<<set _quality = "mediocre">>

		<<default>>
			@@.error;Unexpected surface feature <<print $args[0]>>.@@
	<</switch>>

	/* Special case for intelligent life: output tech level too */
	<<if $args[0] == "Intelligent life">>
		<<print "@@.mediocre;" + $tech_level_names[$planet.native_tech_level].toUpperFirst() + " civilisation@@">>
	<<else>>
		<<print "@@." + _quality + ";" + $args[0] + "@@">>
	<</if>>
<</widget>>

</div><div tiddler="StoryInit" tags="" created="201703061900" modifier="twee" twine-position="150,10"><<set $continue_text = "Continue">>

/% Settings menu %/
/%<<script>>
	var settingSetupStylesheet = function() {
		if (settings.darkOnLight)
		{
			$("html").addClass("dark-on-light");
			$("#passages").addClass("dark-on-light");
			$("#status-display").addClass("dark-on-light");
		}
		else
		{
			$("html").removeClass("dark-on-light");
			$("#passages").removeClass("dark-on-light");
			$("#status-display").removeClass("dark-on-light");
		}
	}

	Setting.addToggle("darkOnLight", {
		label    : "Dark-on-light colour scheme",
		default  : false,
		onInit   : settingSetupStylesheet,
		onChange : settingSetupStylesheet
	});

	Setting.load();
<</script>>%/

</div><div tiddler="Orbit planet menu" tags="nobr" created="201703061900" modifier="twee" twine-position="570,990"><div class="main-loop-links">
	<<link "Found colony">>
		<<script>>
			$('#fc-confirm').slideToggle();
			$('html, body').animate({
				scrollTop: $('#fc-confirm').offset().top
			});
		<</script>>
	<</link>>
	<span class="main-loop-link-spacer"> | </span>
	[[Move on|Level up]]
</div>
<div id="fc-confirm" style="display: none">
	This decision is the culmination of the AI's existence, and it cannot make it lightly. Founding a colony will end the seedship's journey, and make this planet humanity's new home.
	<div class="main-loop-links">
		<<link "Confirm">>
			<<replace "#post-planet-stats">>
				<<display [[FC Landing]]>>
			<</replace>>
			<<script>>setTextboxMaxLength('$planet.name', 20);<</script>>
			<<script>>
				$('#pre-planet-stats').slideUp();
				$('#post-planet-stats').hide();
				$('#post-planet-stats').fadeIn(400);
			<</script>>
		<</link>>
		<span class="main-loop-link-spacer"> | </span>
		<<link "Reconsider">>
			<<script>>
			$('#fc-confirm').slideUp();
			<</script>>
		<</link>>
	</div>
</div>

@@.debug-text;[[DEBUG: Move on and choose encounter|DEBUG pick encounter]]@@
@@.debug-text;[[DEBUG: Custom planet|DEBUG custom planet]]@@</div><div tiddler="patreon_wordmark_white" tags="Twine.image" created="201709291727" modifier="twee" twine-position="430,290">data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyOTIiIGhlaWdodD0iMTA0IiB2aWV3Qm94PSIwIDAgMjkyIDEwNCI+CiAgPHBhdGggZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMjg0LjM2NzI0NCwxMDQgTDI4NC4zNjcyNDQsMS40MjEwODU0N2UtMTQgTDI5MS45OTgxMjgsMS40MjEwODU0N2UtMTQgTDI5MS45OTgxMjgsMTA0IEwyODQuMzY3MjQ0LDEwNCBaIE0yNDEuODc5NTY5LDM0LjY2ODU0ODQgTDI0OS40NjI3NjEsMzQuNjY4NTQ4NCBMMjQ5LjQ2Mjc2MSw2Ny42NDA2ODUxIEwyNDEuNTAyODkyLDY3LjY0MDY4NTEgTDIyOS42MzEyMjEsNDYuNDQzNjY1IEwyMjkuNjMxMjIxLDY3LjY0MDY4NTEgTDIyMi4wMDAzMzcsNjcuNjQwNjg1MSBMMjIyLjAwMDMzNywzNC42Njg1NDg0IEwyMjkuOTYwMjA2LDM0LjY2ODU0ODQgTDI0MS44Nzk1NjksNTYuMTQ3MjQ5NCBMMjQxLjg3OTU2OSwzNC42Njg1NDg0IFogTTE5MS45MDIxNDMsMzMuODIwMzkxMiBDMjAyLjgyODcxMywzMy44MjAzOTEyIDIwOS4zMjk1NjUsNDIuMTEwODk5NCAyMDkuMzI5NTY1LDUxLjE1NDY2NTQgQzIwOS4zMjk1NjUsNjAuMTk4MzM0MSAyMDIuODI4NzEzLDY4LjQ4ODkzOTYgMTkxLjkwMjE0Myw2OC40ODg5Mzk2IEMxODAuOTI1OTM0LDY4LjQ4ODkzOTYgMTc0LjQyNTA4Miw2MC4xOTgzMzQxIDE3NC40MjUwODIsNTEuMTU0NjY1NCBDMTc0LjQyNTA4Miw0Mi4xMTA4OTk0IDE4MC45MjU5MzQsMzMuODIwMzkxMiAxOTEuOTAyMTQzLDMzLjgyMDM5MTIgWiBNMjAxLjU1ODUyMSw1MS4xNTQ2NjU0IEMyMDEuNTU4NTIxLDQ1LjczNzkwNTUgMTk3Ljg4MzIzOCw0MC42OTc3MjU4IDE5MS45MDIxNDMsNDAuNjk3NzI1OCBDMTg1Ljg3MjM4Miw0MC42OTc3MjU4IDE4Mi4yNDU3NjUsNDUuNzM3OTA1NSAxODIuMjQ1NzY1LDUxLjE1NDY2NTQgQzE4Mi4yNDU3NjUsNTYuNTcxNDI1NCAxODUuODcyMzgyLDYxLjYxMTUwNzcgMTkxLjkwMjE0Myw2MS42MTE1MDc3IEMxOTcuODgzMjM4LDYxLjYxMTUwNzcgMjAxLjU1ODUyMSw1Ni41NzE0MjU0IDIwMS41NTg1MjEsNTEuMTU0NjY1NCBaIE02OC42Nzg5MzMxLDQxLjI2MjY0NDggTDY4LjY3ODkzMzEsMzQuNjY4NTQ4NCBMOTEuMjM5OTczOCwzNC42Njg1NDg0IEw5MS4yMzk5NzM4LDQxLjI2MjY0NDggTDgzLjc1MDEyNDUsNDEuMjYyNjQ0OCBMODMuNzUwMTI0NSw2Ny42NDA2ODUxIEw3Ni4xMTk1MzIxLDY3LjY0MDY4NTEgTDc2LjExOTUzMjEsNDEuMjYyNjQ0OCBMNjguNjc4OTMzMSw0MS4yNjI2NDQ4IFogTTE0OS41NTU2MDEsNDguMjgwOTE3MiBMMTYyLjAzNzU0OCw0OC4yODA5MTcyIEwxNjIuMDM3NTQ4LDU0LjI2NDI1MDggTDE0OS41NTU2MDEsNTQuMjY0MjUwOCBMMTQ5LjU1NTYwMSw2MS41MTY1MTEgTDE2Mi4wMzc1NDgsNjEuNTE2NTExIEwxNjIuMDM3NTQ4LDY3LjY0MDY4NTEgTDE0MS45MjQ3MTcsNjcuNjQwNjg1MSBMMTQxLjkyNDcxNywzNC42Njg1NDg0IEwxNjIuMDM3NTQ4LDM0LjY2ODU0ODQgTDE2Mi4wMzc1NDgsNDAuNzkyNzIyNSBMMTQ5LjU1NTYwMSw0MC43OTI3MjI1IEwxNDkuNTU1NjAxLDQ4LjI4MDkxNzIgWiBNMTE2Ljk1OTg1LDM0LjY2ODU0ODQgQzEyNC4yNTk4MDMsMzQuNjY4NTQ4NCAxMjguOTcwNzA3LDQwLjE4MDMwNTEgMTI4Ljk3MDcwNyw0Ni41ODYwNjI3IEMxMjguOTcwNzA3LDUxLjIwMjE2MzggMTI2LjUyMDg0Miw1NS4yOTkwOTIyIDEyMi40MjIxNjIsNTcuMjMxMzQxMSBMMTI5LjAxODQsNjcuNjQwNjg1MSBMMTIwLjE2MzA3LDY3LjY0MDY4NTEgTDExNC4zMjAxODcsNTguNTAxOTIyMyBMMTEwLjc0MDI5LDU4LjUwMTkyMjMgTDExMC43NDAyOSw2Ny42NDA2ODUxIEwxMDMuMTEwMzc5LDY3LjY0MDY4NTEgTDEwMy4xMTAzNzksMzQuNjY4NTQ4NCBMMTE2Ljk1OTg1LDM0LjY2ODU0ODQgWiBNMTIxLjI0NTQwOSw0Ni41ODYwNjI3IEMxMjEuMjQ1NDA5LDQzLjUyMzk3NTcgMTE5LjE3MjIyMyw0MC44ODYwNjQ2IDExNS45NjkwMDMsNDAuODg2MDY0NiBMMTEwLjc0MDI5LDQwLjg4NjA2NDYgTDExMC43NDAyOSw1Mi4yODQ1MDM1IEwxMTUuOTY5MDAzLDUyLjI4NDUwMzUgQzExOS4xNzIyMjMsNTIuMjg0NTAzNSAxMjEuMjQ1NDA5LDQ5LjY0ODE0OTcgMTIxLjI0NTQwOSw0Ni41ODYwNjI3IFogTTUzLjc0NjgzMDEsNjMuNjM3MDk4NyBMNDIuMDE3NTU3Myw2My42MzcwOTg3IEw0MC43NDUyMjQxLDY3LjY0MDY4NTEgTDMyLjU5NTQ1OTEsNjcuNjQwNjg1MSBMNDQuMzcyMjMwMiwzNC42Njg1NDg0IEw1MS4zOTA0MDUyLDM0LjY2ODU0ODQgTDYzLjMwNzkxOTUsNjcuNjQwNjg1MSBMNTUuMDE3NDExMyw2Ny42NDA2ODUxIEw1My43NDY4MzAxLDYzLjYzNzA5ODcgWiBNNDcuOTA0MjM5Niw0NC4wODg5OTIgTDQzLjg1MzE1NDksNTcuNjU1NDE5NyBMNTEuODYwMzI3Niw1Ny42NTU0MTk3IEw0Ny45MDQyMzk2LDQ0LjA4ODk5MiBaIE0xMy44MDA2MTAyLDM0LjY2ODU0ODQgQzIxLjEwMjEyMDcsMzQuNjY4NTQ4NCAyNS44MTMxMjEyLDQwLjE4MDMwNTEgMjUuODEzMTIxMiw0Ni41ODYwNjI3IEMyNS44MTMxMjEyLDUyLjk5MTgyMDMgMjEuMTAyMTIwNyw1OC41MDE5MjIzIDEzLjgwMDYxMDIsNTguNTAxOTIyMyBMNy42MzA1OTI0Miw1OC41MDE5MjIzIEw3LjYzMDU5MjQyLDY3LjY0MDY4NTEgTDAsNjcuNjQwNjg1MSBMMCwzNC42Njg1NDg0IEwxMy44MDA2MTAyLDM0LjY2ODU0ODQgWiBNMTguMTM1MDMwNCw0Ni41ODYwNjI3IEMxOC4xMzUwMzA0LDQzLjUyMzk3NTcgMTYuMDYxOTQxLDQwLjg4NjA2NDYgMTIuODU5MDEzNiw0MC44ODYwNjQ2IEw3LjYzMDU5MjQyLDQwLjg4NjA2NDYgTDcuNjMwNTkyNDIsNTIuMjg0NTAzNSBMMTIuODU5MDEzNiw1Mi4yODQ1MDM1IEMxNi4wNjE5NDEsNTIuMjg0NTAzNSAxOC4xMzUwMzA0LDQ5LjY0ODE0OTcgMTguMTM1MDMwNCw0Ni41ODYwNjI3IFoiLz4KPC9zdmc+Cg==</div><div tiddler="MO Alien Probe" tags="nobr" created="201703061900" modifier="twee" twine-position="1970,1550">Deep in space, the seedship's collision avoidance system detects a fast-moving object that is changing velocity to match course with the seedship. It transmits a complex radio signal which the seedship cannot understand but which could only be the product of intelligence.

<br><br>

<div id="result-area">
<<link "Transmit an interspecies greeting">>
	<<replace "#result-area">>
		The seedship's builders gave it an inter-species greeting it could use to open communications with intelligent aliens: a pulsed series of prime numbers establishing intelligence, followed by a diagram depicting human figures and explaining the seedship's mission and its peaceful intentions. The AI transmits this now, and waits hopefully for a reply.
		<br><br>
		<<if random(0,1) == 0>>
			<<display [[MO Alien Probe Reply]]>>
		<<else>>
			No reply comes. <<display [[MO Alien Probe Tentacles]]>>
		<</if>>
	<</replace>>
	<<fadeIn "#result-area">>
<</link>>
<br>
<<link "Wait for the object to approach">>
	<<replaceAndFadeIn "#result-area" [[MO Alien Probe Tentacles]]>>
	<<fadeIn "#result-area">>
<</link>>
<br>
<<link "Change course to avoid object">>
	<<replace "#result-area">>
		<<switch random(0,2)>>
			<<case 0>>
				As soon as the seedship fires its engines, the alien ship breaks off pursuit. The AI resumes its original course, not knowing whether the alien ship has found out what it wanted, lost interest, or decided to respect the seedship's desire not to make contact.
				<br><br><<link $continue_text>><<goto [[MO Done]]>><</link>>
			<<case 1>>
				<<set $off_course = true>>
				The alien ship eventually breaks off pursuit, but not before the seedship has deviated so far from its original course that it can no longer reach its intended destination system and must decelerate into the first system it finds.
				<br><br><<link $continue_text>><<goto [[MO Done]]>><</link>>
			<<case 2>>
				<<set $off_course = true>>
				The seedship fires its engine at full burn, straying far from its original course, but it cannot shake off the alien ship. <<display [[MO Alien Probe Tentacles]]>>
		<</switch>>
	<</replace>>
	<<fadeIn "#result-area">>
<</link>></div></div><div tiddler="MO Uneventful 3" tags="" created="201703201822" modifier="twee" twine-position="2670,1130">The seedship's course takes it through a dense star cluster, and while the AI sleeps the guidance system weaves a complex course through the stars' overlapping gravitational fields.

<<continueLink [[MO Done]]>></div><div tiddler="MO Uneventful 2" tags="" created="201703201822" modifier="twee" twine-position="2670,990">The AI is woken from its hibernation by a possible malfunction warning, but a systems check reveals that it was a false alarm. Far from the nearest star, the AI spends some time admiring the cold beauty of the Milky Way as revealed by its navigation sensors, before returning to hibernation to wait for its arrival in the next system.

<<continueLink [[MO Done]]>></div><div tiddler="MO Uneventful 1" tags="" created="201703201821" modifier="twee" twine-position="2670,850">For centuries the seedship drifts towards its next destination, very nearly inert, the AI hibernating and only the simple collision avoidance and damage monitoring systems ticking over.

<<continueLink [[MO Done]]>></div><div tiddler="MO Uneventful 5" tags="" created="201703201822" modifier="twee" twine-position="2670,1410">Deep in space, the AI wakes suddenly to an alert from the medical monitoring program. It anxiously checks the colonists, but finds that there is no problem, and the alert was a glitch. Nevertheless, the AI spends some time watching its sleeping charges, reassuring itself that they are all alive, before it joins them again in sleep.

<<continueLink [[MO Done]]>></div><div tiddler="MO Uneventful 4" tags="" created="201703201822" modifier="twee" twine-position="2670,1270">The next star chosen by the guidance system is on the other side of a great void, with no stars for dozens of light years. The AI hibernates for the millennia-long journey through utter emptiness.

<<continueLink [[MO Done]]>></div><div tiddler="MO Impact Choice 2" tags="nobr" created="201703061900" modifier="twee" twine-position="1690,990"><<if $system == "sleep chambers">>
	<<killColonistsMedium>>
	The asteroid tears into the sleep chambers, killing $deaths colonists.
<<elseif $system == "surface probes">>
	<<set $surface_probes -= 1>>
	The asteroid knocks one of the surface probes out of its moorings and sends it spinning into space.
<<else>>
	<<randomDamageMedium>>
	<<damageSystem $system $damage>>
	The asteroid tears into the $system, sending fragments spinning away into space.
<</if>>
<<refreshStatusDisplay>>

<br><br><<continueLink [[MO Done]]>></div><div tiddler="FC Landing" tags="nobr" created="201703061900" modifier="twee" twine-position="290,1550">/* Show full planet stats even if not shown already. */
<<replace "#planet-stats">><<displayPlanet true false>><</replace>>

/* Set up score variables */
<<set $hiscore = {
	planet: $planet,
	date: Date.now(),
	final_tech_level: -1,
	final_culture: -1,
	native_relations: -1,
	final_score: 0,
	score_landing: 0,
	score_construction: 0,
	score_native_relations: 0,
	score_technology: 0,
	score_culture: 0,
	score_scientific_database: 0,
	score_cultural_database: 0,
	score_atmosphere: 0,
	score_gravity: 0,
	score_temperature: 0,
	score_water: 0,
	score_resources: 0,
	summary: "" } >>


<<if $system_landing >= 100>>
	The landing system controls the seedship's descent, and it
	<<if $planet.water == "Planet-wide ocean">>
		splashes gently down into the planet-wide ocean.
	<<elseif $planet.water == "Oceans">>
		splashes gently down into the ocean off the shore of one of the planet's continents.
	<<elseif $planet.water == "Ice-covered surface">>
		touches gently down on the top of the planet-wide ice sheet.
	<<elseif $planet.surface_features.includes("Plant life")
			| $planet.surface_features.includes("Edible plants")
			| $planet.surface_features.includes("Poisonous plants")>>
		touches gently down on a field of alien vegetation.
	<<else>>
		touches gently down on the rocky surface.
	<</if>>
<<elseif $system_landing >= 50>>
	The damaged landing system cannot completely control the seedship's descent, and it suffers some damage when it
	<<if $planet.water == "Planet-wide ocean">>
		splashes down into the planet-wide ocean.
	<<elseif $planet.water == "Oceans">>
		splashes down into the ocean off the shore of one of the planet's continents.
	<<elseif $planet.water == "Ice-covered surface">>
		touches down on the top of the planet-wide ice sheet.
	<<elseif $planet.surface_features.includes("Plant life")
			| $planet.surface_features.includes("Edible plants")
			| $planet.surface_features.includes("Poisonous plants")>>
		touches down on a field of alien vegetation.
	<<else>>
		touches down on the rocky surface.
	<</if>>
<<else>>
	<<if $system_landing <= 0>>
		The AI uses the manoeuvring thrusters to barely control the seedship's descent, and it
	<<else>>
		The badly damaged landing system struggles to control the seedship's descent, and it
	<</if>>
	<<if $planet.water == "Planet-wide ocean">>
		splashes down hard into the planet-wide ocean.
	<<elseif $planet.water == "Oceans">>
		splashes down hard into the ocean off the shore of one of the planet's continents.
	<<elseif $planet.water == "Ice-covered surface">>
		crashes into the planet-wide ice sheet.
	<<elseif $planet.surface_features.includes("Plant life")
			| $planet.surface_features.includes("Edible plants")
			| $planet.surface_features.includes("Poisonous plants")>>
		ploughs through a field of alien vegetation before coming to a stop.
	<<else>>
		smashes into the planet's rocky surface.
	<</if>>
<</if>>



/* Roll to see if it is a landing or a crash */
/* Roll crash damage and then reduce it by landing system integrity. */
<<set _damage = 100 - $system_landing>>
<<if _damage > 0>>
	/* All systems are damaged by up to the damage amount. */
	<<set _r = Math.ceil(random(0, _damage))>>	<<damageSystem "atmosphere scanner" _r>>
	<<set _r = Math.ceil(random(0, _damage))>>	<<damageSystem "temperature scanner" _r>>
	<<set _r = Math.ceil(random(0, _damage))>>	<<damageSystem "gravity scanner" _r>>
	<<set _r = Math.ceil(random(0, _damage))>>	<<damageSystem "water scanner" _r>>
	<<set _r = Math.ceil(random(0, _damage))>>	<<damageSystem "resources scanner" _r>>
	<<set _r = Math.ceil(random(0, _damage))>>	<<damageSystem "surface probes" _r>>
	<<set _r = Math.ceil(random(0, _damage))>>	<<damageSystem "landing system" _r>>
	<<set _r = Math.ceil(random(0, _damage))>>	<<damageSystem "construction system" _r>>
	<<set _r = Math.ceil(random(0, _damage))>>	<<damageSystem "scientific database" _r>>
	<<set _r = Math.ceil(random(0, _damage))>>	<<damageSystem "cultural database" _r>>

		/* Colonist deaths are lower (in proportion to the total colonists) - crash can't kill more than 500. */
	<<set _r = Math.ceil(random(0, _damage*5))>>	<<damageSystem "sleep chambers" _r>>
<</if>>

<<set $hiscore.score_landing = $colonists>>
<<if $colonists == 0>>
	<<set $hiscore.summary = "Crash">>
	<br><br><<FCNextPassage [[FC Done]]>>
<<else>>
	<<display [[FC First Impression]]>>
<</if>>
</div><div tiddler="FC Technology" tags="nobr" created="201703061900" modifier="twee" twine-position="850,1550"><<set $hiscore.score_construction = $colonists>>

<<if $colonists <= 100>>
	Heavy losses mean that the colony has a very small population, but the colonists were trained in cloning and genetic engineering techniques to compensate for this. The first few generations include children cloned from the surviving genetic material of the dead colonists, until the population's genetic diversity increases to a safe level.
	<br><br>
<</if>>


/* Technology result is based on scientific database, influenced by resources. */
<<set _technology_score = $system_scientific_database>>
<<if $planet.surface_features.includes("Metal-rich moon")>>
	<<if $planet.resources == "Rich">>
		<<set _technology_score *= 1.05>>
	<<elseif $planet.resources == "Poor">>
		<<set _technology_score *= 0.95>>
	<<elseif $planet.resources == "None">>
		<<set _technology_score *= 0.85>>
	<</if>>
<<else>>
	<<if $planet.resources == "Poor">>
		<<set _technology_score *= 0.7>>
	<<elseif $planet.resources == "None">>
		<<set _technology_score *= 0.4>>
	<</if>>
<</if>>
@@.debug-text;Technology score = _technology_score@@

<<switch $planet.resources>>
	<<case "Rich">>
		The planet is rich in metals and other resources,
	<<case "Poor">>
		The planet is poor in metals and other resources,
	<<case "None">>
		The planet has no accessible metals or other resources,
	<<default>>
		@@.error;Unexpected resources value $planet.resources.@@
<</switch>>

<<if $planet.resources == "Rich">>
	<<if $system_scientific_database >= 100>>
		and the scientific database contains a wealth of information on how to make use of them.
	<<elseif $system_scientific_database >= 50>>
		and the damaged scientific database still contains much information on how to make use of them.
	<<elseif $system_scientific_database > 0>>
		although the badly damaged scientific database means that the colonists must re-invent much of the technology needed to make use of them.
	<<else>>
		although without the scientific database the colonists must re-invent most of the technology needed to make use of them.
	<</if>>
<<elseif $planet.resources == "Poor">>
	<<if $system_scientific_database >= 100>>
		but the scientific database contains a wealth of information on how to make use of what there is.
	<<elseif $system_scientific_database >= 50>>
		but the damaged scientific database still contains much information on how to make use of what there is.
	<<elseif $system_scientific_database > 0>>
		and the badly damaged scientific database means that the colonists find it difficult to make use of what there is.
	<<else>>
		and without the scientific database the colonists find it difficult to make use of what there is.
	<</if>>
<<elseif $planet.resources == "None">>
	<<if $system_scientific_database >= 100>>
		so the colonists cannot maintain a high level of technology even with the fully intact scientific database.
	<<elseif $system_scientific_database >= 50>>
		so the colonists cannot maintain a high level of technology even with the mostly intact scientific database.
	<<elseif $system_scientific_database > 0>>
		so the colonists find it hard to make use of what they can recover from the scientific database.
	<<else>>
		and any information the scientific database might have held that could help them has been destroyed.
	<</if>>
<</if>>

<<if $planet.surface_features.includes("Metal-rich moon")>>
	The colonists use what is left of the seedship to build spacecraft capable of reaching the planet's metal-rich moon,
	<<if $planet.resources == "Rich">>
		and mine it to supplement the planet's already rich resources.
	<<else>>
		and mine it to partially compensate for the planet's lack of resources.
	<</if>>
<<elseif $planet.surface_features.includes("Unstable moon")>>
	Before the colonists have established their technological base, the planet's moon decays in its orbit and breaks up, bombarding the surface with meteorites. Some of the colonists survive, but much of their technology is destroyed.
	<<set _technology_score -= 30>>
	@@.debug-text;Modified technology score: _technology_score@@
<</if>>

/* If the planet has any red attributes and the final result is less than Industrial, colony fails. */
/* Otherwise, final result is based on final technology score. */
<<if _technology_score > 100 & $system_scientific_database > 100>>
	<<set $hiscore.final_tech_level = 10>>
	<<set $hiscore.score_technology = 3000>>
	The colonists use alien scientific knowledge to create a level of technology beyond the dreams of the people who built the seedship.
<<elseif _technology_score > 90>>
		/* Max with poor resources and metal-rich moon */
	<<set $hiscore.final_tech_level = 9>>
	The colonists manage to maintain a level of technology equivalent to that of Earth when the seedship was launched.
<<elseif _technology_score > 80>>
		/* Max with no resources but metal-rich moon */
	<<set $hiscore.final_tech_level = 8>>
	The colonists fail to maintain their advanced computers but continue to use simpler electronics and machines.
<<elseif _technology_score > 70>>
	<<set $hiscore.final_tech_level = 7>>
	The colonists are forced to abandon electricity but manage to build machines and factories similar to those of Earth's Industrial era.
<<elseif _technology_score > 60>>
		/* Max with poor resources */
	<<set $hiscore.final_tech_level = 6>>
	The colonists transition to a medieval level of technology.
<<elseif _technology_score > 50>>
	<<set $hiscore.final_tech_level = 5>>
	The colonists transition to a technology based on iron tools.
<<elseif _technology_score > 40>>
	<<set $hiscore.final_tech_level = 4>>
	The colonists transition to a technology based on sophisticated stone, wood and bronze tools.
<<elseif _technology_score > 30>>
		/* Max with no resources */
	<<set $hiscore.final_tech_level = 3>>
	The colonists transition to a technology based on sophisticated stone and wood tools.
<<elseif _technology_score > 20>>
	<<set $hiscore.final_tech_level = 2>>
	The colonists lose all but the most basic knowledge of stone tools and simple agriculture.
<<elseif _technology_score > 10>>
	<<set $hiscore.final_tech_level = 1>>
	The colonists lose almost all knowledge of agriculture and metalworking and survive as hunter-gatherers using simple stone tools.
<<else>>
	<<set $hiscore.final_tech_level = 0>>
	The colonists lose even the most basic scientific knowledge and slip back to a pre-Stone Age existence.
<</if>>

<<if _technology_score <= 70 &
	( $planet.atmosphere == "Corrosive" | $planet.atmosphere == "Toxic" | $planet.atmosphere == "Non-breathable" | $planet.atmosphere == "None"
	| $planet.temperature == "Very cold" | $planet.temperature == "Very hot"
	| $planet.gravity == "Very low" | $planet.gravity == "Very high"
	| $planet.water == "None" | $planet.water == "Trace") >>
	The planet cannot sustain human life without technological assistance,

	<<if $planet.atmosphere == "Corrosive" | $planet.atmosphere == "Toxic" | $planet.atmosphere == "Non-breathable" | $planet.atmosphere == "None">>
		<<set _atmosphere_problem = "problem">>
		<<if random(0,99) < $system_scientific_database>>
			<<set _atmosphere_problem = "solved">>
		<</if>>
	<</if>>
	<<if $planet.temperature == "Very cold" | $planet.temperature == "Very hot">>
		<<set _temperature_problem = "problem">>
		<<if random(0,99) < $system_scientific_database>>
			<<set _temperature_problem = "solved">>
		<</if>>
	<</if>>
	<<if  $planet.gravity == "Very low" | $planet.gravity == "Very high">>
		<<set _gravity_problem = "problem">>
		<<if random(0,99) < $system_scientific_database>>
			<<set _gravity_problem = "solved">>
		<</if>>
	<</if>>
	<<if  $planet.water == "None" | $planet.water == "Trace">>
		<<set _water_problem = "problem">>
		<<if random(0,99) < $system_scientific_database>>
			<<set _water_problem = "solved">>
		<</if>>
	<</if>>

	<<if _atmosphere_problem == "problem">>
		and the original colonists' descendants are killed when they can no longer maintain their airtight habitats.
		<<set $colonists = 0>>
	<<elseif _temperature_problem == "problem">>
		and the original colonists' descendants are killed when their structures can no longer withstand the extreme
		<<if $planet.temperature == "Very hot">>heat.<<else>>cold.<</if>>
		<<set $colonists = 0>>
	<<elseif _gravity_problem == "problem">>
		and the original colonists' descendants die of health problems caused by the very
		<<if $planet.gravity == "Very high">>high<<else>>low<</if>> gravity.
		<<set $colonists = 0>>
	<<elseif _water_problem == "problem">>
		and the original colonists' descendants die when their water-purifying systems stop functioning.
		<<set $colonists = 0>>
	<<else>>
		but, before their technology fails, the original colonists
		<<if _atmosphere_problem == "solved" | _temperature_problem == "solved">>
			<<if _gravity_problem == "solved" | _water_problem == "solved">><<set _p = ",">><<else>><<set _p = ".">><</if>>
			build robust
			<<if _atmosphere_problem == "solved" & _temperature_problem == "solved">>
				airtight, insulated
			<<elseif _atmosphere_problem == "solved">>
				airtight
			<<else>>
				insulated
			<</if>>
			habitats_p
		<</if>>
		<<if _gravity_problem == "solved">>
			<<if _water_problem == "solved">><<set _p = ",">><<else>><<set _p = ".">><</if>>
			<<if (_atmosphere_problem == "solved" | _temperature_problem == "solved") & _water_problem != "solved">>and<</if>>
			genetically engineer their descendants to survive in the very <<if $planet.gravity == "Very high">>high<<else>>low<</if>> gravity_p
		<</if>>
		<<if _water_problem == "solved">>
			<<if _atmosphere_problem == "solved" | _temperature_problem == "solved" | _gravity_problem == "solved">>and<</if>>
			set up automated water recycling systems that can work indefinitely without maintenance.
		<</if>>
	<</if>>
<</if>>

<<if $hiscore.final_tech_level < 7>>
	<<set $system_scientific_database = Math.round($system_scientific_database * 0.1 * $hiscore.final_tech_level)>>
<</if>>

<br><br>

<<if $colonists == 0>>
	<<set $hiscore.final_tech_level = -1>>
	<<set $hiscore.summary = "Long-Term Technological Failure">>
<</if>>

<<if $planet.surface_features.includes("Intelligent life") >>
	<<FCNextPassage [[FC Native Relations]]>>\s
<<else>>\s
	<<FCNextPassage [[FC Culture]]>>
<</if>>\s
</div><div tiddler="MO Micrometeorite" tags="nobr" created="201703061900" modifier="twee" twine-position="1550,850">As it enters the new system, the seedship is struck by a micrometeorite.
<<if visited() == 1>>
	It is a speck of cosmic dust, far too small for the navigation system to detect from a distance, but travelling with enough velocity to pierce the seedship's armour like a bullet.
<</if>>

<<randomSystemExcluding "destroyed">>
<<if $system == "sleep chambers">>
	<<killColonistsFew>>
	It hits the sleep capsules, leaving a straight line of tiny punctures from which air and cooling fluid vents into the vacuum. The seedship's AI can only watch helplessly as $deaths colonists die in their sleep.
<<elseif $system == "surface probes">>
	<<set $surface_probes -= 1>>
	It hits one of the surface probes and destroys it.
<<else>>
	<<randomDamageLow>>
	<<damageSystem $system $damage>>
	It hits the $system, sending fragments of machinery glittering into space.
<</if>>

<br><br><<continueLink [[MO Done]]>></div><div tiddler="Navigation macros" tags="widget nobr" created="201703061900" modifier="twee" twine-position="10,1270"><<widget fadeIn>>
	<<script>>
		$(variables().args[0]).hide();
		$(variables().args[0]).fadeIn(400);
	<</script>>
<</widget>>

<<widget replaceAndFadeIn>>
	/* $args[0] should be the id of the page element to replace */
	/* $args[1] should be the passage to display */
	<<replace $args[0]>>
		<<display $args[1]>>
	<</replace>>
	<<fadeIn $args[0]>>
<</widget>>

<<widget continueLink>>
	/* Creates an ordinary link pointing to the passage $args[0] with $continue_text as the text. */
	<span id="spaceAct"><<link $continue_text>><<goto $args[0]>><</link>></span>
<</widget>></div><div tiddler="FC Gravity" tags="widget nobr" created="201703061900" modifier="twee" twine-position="570,1410"><<widget FC_Construction_gravity>>

/* Describe gravity survival gear */
<<if $args[0] > 0>>
	<<set _p = ",">>
<<else>>
	<<set _p = ".">>
<</if>>
<<if $planet.surface_features.includes("Useful animals")>>
	<<switch $planet.gravity>>
		<<case "Very high">>
			They harness some of the immensely powerful native animals as beasts of burden, so the colonists do not have to exert themselves in the crushing gravity_p
		<<case "High">>
			They harness some of the planet's powerful native animals as beasts of burden, making work in the high gravity easier_p
		<<case "Moderate">>
			They harness some of the planet's native animals as beasts of burden_p
		<<case "Low">>
			They harness some of the planet's agile native animals as beasts of burden, making work in the low gravity less awkward_p
		<<case "Very low">>
			They harness some of the planet's agile native animals as beasts of burden, making work in the extremely low gravity less awkward_p
		<<default>>
			@@.error;Unexpected gravity value $planet.gravity@@
	<</switch>>
<<else>>
	<<switch $planet.gravity>>
		<<case "Very high">>
			The crushing gravity means they can barely move without mechanical assistance_p
		<<case "High">>
			The high gravity makes the work more difficult_p
		<<case "Moderate">>
			They can move easily under the Earth-like gravity_p
		<<case "Low">>
			The low gravity makes the work somewhat more difficult than it would have been on Earth_p
		<<case "Very low">>
			The very low gravity makes the work more difficult than it would have been on Earth_p
		<<default>>
			@@.error;Unexpected gravity value $planet.gravity@@
	<</switch>>
<</if>>
/* Gravity death numbers */
<<if $args[0] > 0>>
	<<if $planet.gravity == "Moderate" | $planet.surface_features.includes("Useful animals")>>but<<else>>and<</if>>
	<<if _gravity_success>>
		construction accidents kill $args[0] colonists.
	<<elseif $planet_gravity == "Low " | $planet.gravity == "Very low">>
		$args[0] colonists die of gravity-related health problems.
	<<else>>
		$args[0] colonists are killed when partially-completed buildings collapse.
	<</if>>
<</if>>

<</widget>></div><div tiddler="MO Alien Probe Tentacles" tags="nobr" created="201703061900" modifier="twee" twine-position="2110,1690"><<if random(0,1) == 0>>
	<<set $system = "sleep chambers">>
<<else>>
	<<randomSystemExcluding "sleep chambers" "scientific database" "cultural database" "surface probes" "destroyed">>
<</if>>
The alien ship matches velocity with the seedship and comes alongside, so close that the two ships are almost touching. The seedship feels lasers probing the contours of its hull, then segmented mechanical tentacles unfurl and reach towards the $system.

<br><br>

<div id="result-area2">
<<link "Submit to the tentacles">>
	<<replace "#result-area2">>
		<<if $system == "sleep chambers">>
			/* 50% chance of moderate colonist loss, 50% chance of scanner upgrade */
			Alien tentacles twine through the mechanisms surrounding the sleep capsules, sensors on their tips scanning the faces and bodies of the sleeping colonists.
			<<if random(0,1) == 0>>
				/* Upgrade a random scanner */
				After several long minutes the tentacles withdraw, and the seedship's antenna picks up a new signal from the alien ship.
				<<set _possible_upgrades = []>>
				<<if $scanner_atmosphere_level < 2 & $scanner_atmosphere > 0>><<set _possible_upgrades.push("atmosphere")>><</if>>
				<<if $scanner_temperature_level < 2 & $scanner_temperature > 0>><<set _possible_upgrades.push("temperature")>><</if>>
				<<if $scanner_gravity_level < 2 & $scanner_gravity > 0>><<set _possible_upgrades.push("gravity")>><</if>>
				<<if $scanner_water_level < 2 & $scanner_water > 0>><<set _possible_upgrades.push("water")>><</if>>
				<<if $scanner_resources_level < 2 & $scanner_resources > 0>><<set _possible_upgrades.push("resources")>><</if>>
				<<if _possible_upgrades.length == 0>>
					It consists of images of planets suitable for human life, with the seedship on the surface and healthy human beings standing around it. The AI cannot be sure, but it seems that the alien ship is wishing it luck on its mission.
				<<else>>
					<<set _upgrade = either(_possible_upgrades)>>
					It consists of compressed data in the same format as that returned by the seedship's _upgrade scanner--enough data to let the seedship upgrade that scanner. The AI cannot be sure, but it seems that the alien ship has guessed the seedship's mission, analysed the sort of planet the sleeping humans need, and given the seedship information to help it find such a planet.
					<<switch _upgrade>>
						<<case "atmosphere">>	<<set $scanner_atmosphere_level += 1>>
						<<case "temperature">>	<<set $scanner_temperature_level += 1>>
						<<case "gravity">>		<<set $scanner_gravity_level += 1>>
						<<case "water">>		<<set $scanner_water_level += 1>>
						<<case "resources">>	<<set $scanner_resources_level += 1>>
						<<default>>				@@.error;Unexpected upgrade _upgrade.@@
					<</switch>>
				<</if>>
			<<else>>
				/* Aliens abduct colonists */
				<<killColonistsMany>>
				With the tentacles thoroughly entwined among the sleep capsules, there is nothing the seedship AI can do when sleep capsules begin to vanish from its monitoring system. The tentacles withdraw, carrying $deaths sleep capsules, supplying power to the capsules to keep their occupants alive. The tentacles withdraw into the alien ship and it accelerates away with the still-living colonists inside. The AI can do nothing but resume its journey and try not to think about those colonists' fate.
			<</if>>
		<<else>>
			/* 50% chance of system repair, 50% chance of high damage */
			The tentacles work their way into the $system, sensors on their tips scanning its components.
			<<if random(0,1) == 0>>
					/* System repair */
				<<getSystemStrength $system>>
				<<if $system_strength >= 100>>
					After a few minutes they withdraw, apparently satisfied with what they have discovered, and the alien ship accelerates away.
				<<else>>
					<<set _damage = 100-$system_strength>>
					<<set _repair = 0 - Math.min(_damage, random(5,25))>>
					<<damageSystem $system _repair>>
					The system abruptly registers damage as lasers on the tentacles' tips surgically remove key components, but after a few minutes the damage monitor registers damaged parts of the system coming back online. The alien ship appears to have analysed the $system, determined that it was damaged, and is now repairing it. After a few minutes of work the tentacles withdraw and the ship accelerates away, leaving the AI wishing it had some way of thanking its alien benefactor.
				<</if>>
			<<else>>
					/* System damage */
				<<randomDamageHigh>>
				<<damageSystem $system $damage>>
				The system abruptly registers damage as lasers on the tentacles' tips surgically remove key components. To the AI's relief, the alien ship does not extend its tentacles again, but accelerates away with its samples of machinery.
			<</if>>
		<</if>>
		<br><br><<link $continue_text>><<goto [[MO Done]]>><</link>>
	<</replace>>
	<<fadeIn "#result-area2">>
	<<refreshStatusDisplay>>
<</link>>
<br>
<<link "Try to escape">>
	<<replace "#result-area2">>
		/* 50% chance of moderate damage, 50% chance of no damage */
		<<if random(0,1) == 0>>
			<<if $system == "sleep chambers">>
				<<killColonistsMedium>>
				The AI fires the seedship's engines, but the tentacles have already penetrated the sleep chambers, and as the seedship pulls away they tear through $deaths frozen bodies like claws. The alien ship backs off and then accelerates away from the seedship and the expanding cloud of machinery fragments and body parts.
			<<else>>
				<<randomDamageMedium>>
				<<damageSystem $system $damage>>
				The AI fires the seedship's engines, but the tentacles have already penetrated the $system, and as the seedship pulls away they tear through the delicate machinery like claws. The alien ship backs off and then accelerates away from the seedship and the expanding cloud of components.
			<</if>>
		<<else>>
			The AI fires the seedship's engines and the ship slips away from the alien tentacles' grasp. The tentacles withdraw, and the alien ship pauses for a moment and then accelerates away.
		<</if>>
		<br><br><<link $continue_text>><<goto [[MO Done]]>><</link>>
	<</replace>>
	<<fadeIn "#result-area2">>
	<<refreshStatusDisplay>>
<</link>>
</div></div><div tiddler="MO Read Databases" tags="nobr" created="201703221607" modifier="twee" twine-position="1970,1830">The AI was created to value human life, but its knowledge of human civilisation is limited to what its builders thought was important for its mission. It is human enough to be curious, however, and has access to a vast wealth of knowledge in the form of the scientific and cultural databases. As it departs the system it finds that its power cells are full and it does not need to enter hibernation immediately, so it decides to spend some time studying one of the databases.

<br><br>
<<if $system_scientific_database <= 0 & $system_cultural_database <= 0>>
	Sadly, this desire comes too late in its mission, as the scientific and cultural databases have already been destroyed. All that remains of human civilisation is what remains in the memories of the sleeping colonists, and the AI can only wonder about the science and culture built by their species.
	<br><br><<continueLink [[MO Done]]>>
<<else>>
	<div id="result-area">
	<<if $system_scientific_database > 0>><<link "Study the scientific database">>
		<<replace "#result-area">>
			The scientific database was written to introduce scientific concepts to people with no prior knowledge, in case the scientific experts among the colonists were lost, so the AI has no trouble understanding it. Much of the information on astronomy and physics it already knows on an instinctive level, but other areas such as chemistry, biology, and pure mathematics are new to it.
			<br><br>
			<<display [[MO Read Databases Scientific]]>>
		<</replace>>
		<<fadeIn "#result-area">>
	<</link>><</if>>
	<br>
	<<if $system_cultural_database > 0>><<link "Study the cultural database">>
		<<replaceAndFadeIn "#result-area" [[MO Read Databases Cultural]]>>
	<</link>><</if>>
	</div>
<</if>>
</div><div tiddler="Space Game Over" tags="nobr" created="201703061900" modifier="twee" twine-position="1690,430">/* Social media icons */
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

The ship drifts for <<print either("thousands", "tens of thousands", "hundreds of thousands", "millions")>> of years, until
	<<print either(
		"the slow bombardment of cosmic dust wears it away to nothing.",
		"it becomes one more crater on the surface of a dead world.",
		"it is pulled in by the gravity of a gas giant and burns up in its atmosphere.",
		"it is pulled in by the gravity of a star and incinerated.",
		"it is pulled into a black hole and destroyed leaving no trace.",
		"alien explorers find it and add it to a museum of extinct species." ) >>

<br><br>

/* Set up score variables */
<<set $hiscore = {
	date: Date.now(),
	final_tech_level: -1,
	final_culture: -1,
	native_relations: -1,
	final_score: 0,
	score_landing: 0,
	score_construction: 0,
	score_native_relations: 0,
	score_technology: 0,
	score_culture: 0,
	score_scientific_database: 0,
	score_cultural_database: 0,
	score_atmosphere: 0,
	score_gravity: 0,
	score_temperature: 0,
	score_water: 0,
	score_resources: 0,
	summary: "Destroyed in space" } >>
<<addHiscore>>

<<displayScore $hiscore false>>

<br>

<<link "Title screen">>
	<<script>>
		$('#ui-bar').hide();
		Save.autosave.delete();
		Engine.restart();
	<</script>>
<</link>>


</div><div tiddler="SP Done" tags="" created="201703061900" modifier="twee" twine-position="990,1130"><<if $planet.surface_features.length == 0>>\s
	<<replace "#anomalies_text">>None<</replace>>\s
<</if>>\s
The surface probe's mission is complete and it shuts down.

<<nobr>>
	<<link $continue_text>>
		<<replace "#post-planet-stats">>
			<<refreshStatusDisplay>>
			<<display [[Orbit planet menu]] t8n>>
		<</replace>>
	<</link>>
<</nobr>></div><div tiddler="FC Water" tags="widget nobr" created="201703061900" modifier="twee" twine-position="710,1410"><<widget FC_Construction_water>>

/* Describe water and farming situation */
<<if $args[0] > 0>>
	<<set _p = ",">>
<<else>>
	<<set _p = ".">>
<</if>>
<<if $planet.surface_features.includes("Edible plants")>>
	<<switch $planet.water>>
		<<case "None">>
			The colonists farm the hardy native plants for food, taking pressure off the amount of water they can chemically extract from the rocks_p
		<<case "Trace">>
			The colonists farm the native plants for food, taking pressure off the amount of water they can condense from the atmosphere_p
		<<case "Ice-covered surface">>
			The colonists farm the plants growing on top of the ice sheet for food, and mine drinking water from other parts of the sheet_p
		<<case "Planet-wide ocean">>
			The colonists farm the floating vegetation for food and extract drinking water from the ocean_p
		<<case "Ice caps">>
			The colonists farm the native plants for food and mine water from the <<print either("north","south")>> polar ice cap_p
		<<case "Oceans">>
			They build their settlement near a river that flows into one of the planet's oceans, and farm the native plants for food_p
		<<default>>
			@@.error;Unexpected water value $planet.water@@
	<</switch>>
<<else>>
	<<switch $planet.water>>
		<<case "None">>
			They must carefully ration the tiny amount of water they can extract from the planet's rocks_p
		<<case "Trace">>
			They must ration the small amount of water they can extract from the atmosphere_p
		<<case "Ice-covered surface">>
			They build their settlement on top of the ice covering the planet's surface, which they mine for water_p
		<<case "Planet-wide ocean">>
			They build their settlement on a floating platform with filters to extract water from the planet-wide ocean_p
		<<case "Ice caps">>
			They mine water from the planet's <<print either("north","south")>> polar ice cap_p
		<<case "Oceans">>
			They build their settlement near a river that flows into one of the planet's oceans, which provides all the water they need_p
		<<default>>
			@@.error;Unexpected water value $planet.water@@
	<</switch>>
<</if>>
/* Water death numbers */
<<if $args[0] > 0>>
	<<if $planet.water == "Oceans" | $planet.water == "Ice caps"
		| $planet.water == "Planet-wide ocean" | $planet.water == "Ice-covered surface"
		| $planet.surface_features.includes("Edible plants")>>but<<else>>and<</if>>
	<<if _water_success>>
		crop failures kill $args[0] colonists.
	<<else>>
		water shortages kill $args[0] colonists.
	<</if>>
<</if>>

<</widget>></div><div tiddler="DEBUG custom planet" tags="" created="201703061900" modifier="twee" twine-position="290,850">DEBUG: Create a custom planet:

<<nobr>>
Presets:
<<link "Mercury">>
	<<set $planet.atmosphere = "None">>
	<<set $planet.temperature = "Very hot">>
	<<set $planet.gravity = "Very low">>
	<<set $planet.water = "None">>
	<<set $planet.resources = "Rich">>
	<<set $planet.surface_features = []>>
	<<goto [[Orbit planet]]>>
<</link>>
<<link "Venus">>
	<<set $planet.atmosphere = "Corrosive">>
	<<set $planet.temperature = "Very hot">>
	<<set $planet.gravity = "Low">>
	<<set $planet.water = "None">>
	<<set $planet.resources = "Rich">>
	<<set $planet.surface_features = []>>
	<<goto [[Orbit planet]]>>
<</link>>
<<link "Earth">>
	<<set $planet.atmosphere = "Breathable">>
	<<set $planet.temperature = "Moderate">>
	<<set $planet.gravity = "Moderate">>
	<<set $planet.water = "Oceans">>
	<<set $planet.resources = "Moderate">>
	<<set $planet.surface_features = ["Microbial life", "Edible plants", "Useful animals", "Space-age civilisation"]>>
	<<goto [[Orbit planet]]>>
<</link>>
<<link "Moon">>
	<<set $planet.atmosphere = "None">>
	<<set $planet.temperature = "Moderate">>
	<<set $planet.gravity = "Very low">>
	<<set $planet.water = "Trace">>
	<<set $planet.resources = "Poor">>
	<<set $planet.surface_features = []>>
	<<goto [[Orbit planet]]>>
<</link>>
<<link "Mars">>
	<<set $planet.atmosphere = "None">>
	<<set $planet.temperature = "Cold">>
	<<set $planet.gravity = "Low">>
	<<set $planet.water = "Ice caps">>
	<<set $planet.resources = "Moderate">>
	<<set $planet.surface_features = []>>
	<<goto [[Orbit planet]]>>
<</link>>
<<link "Europa">>
	<<set $planet.atmosphere = "None">>
	<<set $planet.temperature = "Very cold">>
	<<set $planet.gravity = "Low">>
	<<set $planet.water = "Ice-covered surface">>
	<<set $planet.resources = "Poor">>
	<<set $planet.surface_features = []>>
	<<goto [[Orbit planet]]>>
<</link>>
<</nobr>>

Atmosphere:
<<radiobutton "$planet.atmosphere" "Corrosive">> Corrosive
<<radiobutton "$planet.atmosphere" "Toxic">> Toxic
<<radiobutton "$planet.atmosphere" "None">> None
<<radiobutton "$planet.atmosphere" "Non-breathable">> Non-breathable
<<radiobutton "$planet.atmosphere" "Marginal">> Marginal
<<radiobutton "$planet.atmosphere" "Breathable">> Breathable

Temperature:
<<radiobutton "$planet.temperature" "Very hot">> Very hot
<<radiobutton "$planet.temperature" "Hot">> Hot
<<radiobutton "$planet.temperature" "Moderate">> Moderate
<<radiobutton "$planet.temperature" "Cold">> Cold
<<radiobutton "$planet.temperature" "Very cold">> Very cold

Gravity:
<<radiobutton "$planet.gravity" "Very high">> Very high
<<radiobutton "$planet.gravity" "High">> High
<<radiobutton "$planet.gravity" "Moderate">> Moderate
<<radiobutton "$planet.gravity" "Low">> Low
<<radiobutton "$planet.gravity" "Very low">> Very low

Water:
<<radiobutton "$planet.water" "None">> None
<<radiobutton "$planet.water" "Trace">> Trace
<<radiobutton "$planet.water" "Ice caps">> Ice caps
<<radiobutton "$planet.water" "Ice-covered surface">> Ice-covered surface
<<radiobutton "$planet.water" "Oceans">> Oceans
<<radiobutton "$planet.water" "Planet-wide ocean">> Planet-wide ocean

Resources:
<<radiobutton "$planet.resources" "None">> None
<<radiobutton "$planet.resources" "Poor">> Poor
<<radiobutton "$planet.resources" "Moderate">> Moderate
<<radiobutton "$planet.resources" "Rich">> Rich

Surface features:
<span id="surface-features-span">$planet.surface_features</span>
<<nobr>>
	Add: <<textbox "_add_feature" "">>
	<<link "Add">>
		<<set $planet.surface_features.push(_add_feature)>>
		<<replace "#surface-features-span">>$planet.surface_features<</replace>>
	<</link>>
<</nobr>>
<<nobr>>
	<<link "Clear">>
		<<set $planet.surface_features = []>>
		<<replace "#surface-features-span">>$planet.surface_features<</replace>>
	<</link>>
<</nobr>>

Native tech level (if natives present): <<textbox "$planet.native_tech_level" $planet.native_tech_level>>

[[Done|Orbit planet]]


</div><div tiddler="SP Feature" tags="" created="201703061900" modifier="twee" twine-position="990,990"><<if $surface_probe_current_feature >= $planet.surface_features.length>>\s
	<<display [[SP Done]]>>
<<else>>\s
	<<nobr>>
		<<switch $planet.surface_features[$surface_probe_current_feature]>>
				/* Moon */
			<<case "Barren moon">>
				As the surface probe approaches the planet it scans the planet's moon, but finds that it is devoid of useful minerals.
			<<case "Metal-rich moon">>
				As the surface probe approaches the planet it scans the planet's moon, and finds that it is rich in metals and other useful resources.
			<<case "Unstable moon">>
				As the surface probe approaches the planet it scans the planet's moon, and finds that it is a recently-captured asteroid in an unstable orbit. In a few decades the moon will come close enough to the planet to break up, and the surface will be bombarded with fragments.

				/* Beauty/ugliness */
			<<case "Outstanding beauty">>
				The AI runs the probe's images of the surface through its aesthetic analysis routine, and determines that humans would find the planet outstandingly beautiful.
			<<case "Outstanding ugliness">>
				The AI runs the probe's images of the surface through its aesthetic analysis routine, and determines that humans would find the planet extremely ugly.

				/* Caves */
			<<case "Airtight caves">>
				The planet's crust is riddled with extensive cave systems which could easily be sealed to provide airtight shelters.
			<<case "Insulated caves">>
				The planet's crust is riddled with extensive cave systems that are insulated from the temperature on the surface.
			<<case "Unstable geology">>
				The planet is geologically unstable, and dangerous earthquakes are common everywhere on the surface.

					/* Plants */
			<<case "Plant life">>
				The probe finds alien plants. It tests a sample, and finds that they would be neither edible nor poisonous to humans.
			<<case "Edible plants">>
				The probe finds alien plants. It tests a sample, and finds that some of them would be edible for humans.
			<<case "Poisonous plants">>
				The probe finds alien plants. It tests a sample, and finds that they would all be highly poisonous to humans.

					/* Animals */
			<<case "Animal life">>
				The probe encounters numerous animals. After analysing their behaviour, it concludes that they would be neither useful nor harmful to humans.
			<<case "Useful animals">>
				The probe encounters numerous animals. After analysing their behaviour, it concludes that some species have the potential to be useful to humans as meat sources or beasts of burden.
			<<case "Dangerous animals">>
				The probe encounters numerous animals. After analysing their behaviour, it concludes that they pose a significant threat to human colonists.

					/* Sentient life */
			<<case "Intelligent life">>
				<<switch $planet.native_tech_level>>
					<<case 0>>
						The probe notices one species that exhibits complex social behaviour and has a rudimentary language.
					<<case 1>>
						The probe notices one species that exhibits complex social behaviour and uses simple stone tools.
					<<case 2>>
						The probe notices one species that exhibits complex social behaviour, uses sophisticated stone tools, and has begun to domesticate other animal and plant species.
					<<case 3>>
						The probe investigates an area of regular plant growth, and finds that it is being deliberately cultivated by one species using sophisticated stone tools.
					<<case 4>>
						The probe investigates some of the possible structures that the seedship observed from orbit, and finds that they are settlements inhabited by an intelligent species that uses stone and bronze tools.
					<<case 5>>
						The probe investigates some of the possible structures that the seedship observed from orbit, and finds that they are settlements inhabited by an intelligent species that uses iron tools.
					<<case 6>>
						The probe investigates some of the possible structures that the seedship observed from orbit, and finds that they are settlements inhabited by an intelligent species with a medieval level of technology.
					<<case 7>>
						The probe investigates some of the possible structures that the seedship observed from orbit, and finds that they are cities inhabited by an intelligent species with an industrial level of technology.
					<<case 8>>
						The probe investigates some of the possible structures that the seedship observed from orbit, and finds that they are cities inhabited by an intelligent species with an atomic age level of technology.
					<<case 9>>
						The probe investigates some of the possible structures that the seedship observed from orbit, and finds that they are cities inhabited by an intelligent species with an Information Age level of technology.
					<<case 10>>
						The probe investigates some of the possible structures that the seedship observed from orbit, and finds that they are cities inhabited by an intelligent species with a post-Singularity level of technology.
					<<default>>
						@@.error;Unexpected native tech level $planet.native_tech_level@@
				<</switch>>

				/* Ruins */
			<<case "Monumental ruins">>
				The probe investigates some of the possible structures that the seedship observed from orbit, and finds that they are ruins left by a vanished intelligent species. The ruins include great monuments and writings that could reveal much about the vanished civilisation.
			<<case "High-tech ruins">>
				The probe investigates some of the possible structures that the seedship observed from orbit, and finds that they are ruins left by a vanished intelligent species. The ruins contain advanced technological artefacts, some of which are still functioning, and scientific databases that could be decoded.
			<<case "Dangerous ruins">>
				The probe investigates some of the possible structures that the seedship observed from orbit, and finds that they are ruins left by a vanished intelligent species. The ruins contain functioning defense systems, and the probe barely escapes.
			<<case "Regular geological formations">>
				The probe investigates the possible structures that the seedship observed from orbit, but finds that they are regular natural formations, not the product of intelligence.

			<<default>>
				@@.error;Unexpected surface feature <<print $planet.surface_features[$surface_probe_current_feature]>>.@@
		<</switch>>

		<<append "#anomalies_text">>
			<<displayPlanetFeature $planet.surface_features[$surface_probe_current_feature]>><br>
		<</append>>

		<<set $surface_probe_current_feature++>>
	<</nobr>>

	<<link $continue_text>><<replaceAndFadeIn "#post-planet-stats" [[SP Feature]]>><</link>>

<</if>>\s
</div><div tiddler="Calculate final score" tags="widget nobr" created="201703171521" modifier="twee" twine-position="990,1970"><<widget calculate_final_score>>
	/* Partially-completed hiscore should be in $hiscore */

	/* Add score for planet attributes */
	<<switch $planet.atmosphere>>
		<<case "Corrosive" "Toxic" "None" "Non-breathable">><<set $hiscore.score_atmosphere = 0>>
		<<case "Marginal">><<set $hiscore.score_atmosphere = $max_score_per_planet_attribute/2>>
		<<case "Breathable">><<set $hiscore.score_atmosphere = $max_score_per_planet_attribute>>
		<<default>>@@.error;Unexpected atmosphere value $planet.atmosphere@@
	<</switch>>

	<<switch $planet.gravity>>
		<<case "Very high" "Very low">><<set $hiscore.score_gravity = 0>>
		<<case "Low" "High">><<set $hiscore.score_gravity = $max_score_per_planet_attribute/2>>
		<<case "Moderate">><<set $hiscore.score_gravity = $max_score_per_planet_attribute>>
		<<default>>@@.error;Unexpected gravity value $planet.gravity@@
	<</switch>>

	<<switch $planet.temperature>>
		<<case "Very hot" "Very cold">><<set $hiscore.score_temperature = 0>>
		<<case "Cold" "Hot">><<set $hiscore.score_temperature = $max_score_per_planet_attribute/2>>
		<<case "Moderate">><<set $hiscore.score_temperature = $max_score_per_planet_attribute>>
		<<default>>@@.error;Unexpected temperature value $planet.temperature@@
	<</switch>>

	<<switch $planet.water>>
		<<case "None" "Trace">><<set $hiscore.score_water = 0>>
		<<case "Ice-covered surface" "Planet-wide ocean">><<set $hiscore.score_water = $max_score_per_planet_attribute/2>>
		<<case "Ice caps" "Oceans">><<set $hiscore.score_water = $max_score_per_planet_attribute>>
		<<default>>@@.error;Unexpected water value $planet.water@@
	<</switch>>

	<<switch $planet.resources>>
		<<case "None">><<set $hiscore.score_resources = 0>>
		<<case "Poor">><<set $hiscore.score_resources = $max_score_per_planet_attribute/2>>
		<<case "Rich">><<set $hiscore.score_resources = $max_score_per_planet_attribute>>
		<<default>>@@.error;Unexpected resources value $planet.resources@@
	<</switch>>


	/* Add score for tech and culture levels */
	<<switch $hiscore.final_tech_level>>
		<<case 10>>	<<set $hiscore.score_technology = 3000>>
		<<case 9>>	<<set $hiscore.score_technology = 2000>>
		<<case 8>>	<<set $hiscore.score_technology = 1750>>
		<<case 7>>	<<set $hiscore.score_technology = 1500>>
		<<case 6>>	<<set $hiscore.score_technology = 1250>>
		<<case 5>>	<<set $hiscore.score_technology = 1000>>
		<<case 4>>	<<set $hiscore.score_technology = 800>>
		<<case 3>>	<<set $hiscore.score_technology = 600>>
		<<case 2>>	<<set $hiscore.score_technology = 400>>
		<<case 1>>	<<set $hiscore.score_technology = 200>>
		<<case 0>>	<<set $hiscore.score_technology = 0>>
		<<case -1>>	<<set $hiscore.score_technology = 0>>
		<<default>>@@.error;Unexpected final tech level $hiscore.final_tech_level@@
	<</switch>>

	<<switch $hiscore.final_culture>>
		<<case 17>>	<<set $hiscore.score_culture = 3000>>
		<<case 16>>	<<set $hiscore.score_culture = 2500>>
		<<case 15>>	<<set $hiscore.score_culture = 2000>>
		<<case 14>>	<<set $hiscore.score_culture = 1500>>
		<<case 13>>	<<set $hiscore.score_culture = 1000>>
		<<case 12>>	<<set $hiscore.score_culture = 500>>
		<<case 11>>	<<set $hiscore.score_culture = 250>>
		<<case 10>>	<<set $hiscore.score_culture = 0>>
		<<case 9>>	<<set $hiscore.score_culture = 2000>>
		<<case 8>>	<<set $hiscore.score_culture = 1500>>
		<<case 7>>	<<set $hiscore.score_culture = 1000>>
		<<case 6>>	<<set $hiscore.score_culture = 500>>
		<<case 5>>	<<set $hiscore.score_culture = 0>>
		<<case 4>>	<<set $hiscore.score_culture = 2000>>
		<<case 3>>	<<set $hiscore.score_culture = 1500>>
		<<case 2>>	<<set $hiscore.score_culture = 1000>>
		<<case 1>>	<<set $hiscore.score_culture = 500>>
		<<case 0>>	<<set $hiscore.score_culture = 0>>
		<<case -1>>	<<set $hiscore.score_culture = 0>>
		<<default>>@@.error;Unexpected final culture $hiscore.final_culture@@
	<</switch>>

	<<switch $hiscore.native_relations>>
		<<case 6>>	<<set $hiscore.score_native_relations = 2000>>
		<<case 5>>	<<set $hiscore.score_native_relations = 1000>>
		<<case 4>>	<<set $hiscore.score_native_relations = 0>>
		<<case 3>>	<<set $hiscore.score_native_relations = -1000>>
		<<case 2>>	<<set $hiscore.score_native_relations = -1000>>
		<<case 1>>	<<set $hiscore.score_native_relations = -2000>>
		<<case 0>>	<<set $hiscore.score_native_relations = -2000>>
		<<case -1>>	<<set $hiscore.score_native_relations = 0>>
		<<default>>@@.error;Unexpected native relations $hiscore.native_relations@@
	<</switch>>




	/* Add up final score */
	<<set $hiscore.final_score =
		$hiscore.score_landing +
		$hiscore.score_construction +
		$hiscore.score_native_relations +
		$hiscore.score_culture +
		$hiscore.score_technology +
		$hiscore.score_scientific_database +
		$hiscore.score_cultural_database +
		$hiscore.score_atmosphere +
		$hiscore.score_gravity +
		$hiscore.score_temperature +
		$hiscore.score_water +
		$hiscore.score_resources >>
<</widget>></div><div tiddler="StoryAuthor" tags="" created="201703061900" modifier="twee" twine-position="10,710">John Ayliff</div><div tiddler="MO Scanner Failure" tags="nobr" created="201703061900" modifier="twee" twine-position="2390,1270"><<if $scanner_atmosphere <= 0 & $scanner_temperature <= 0 & $scanner_gravity <= 0 & $scanner_water <= 0 & $scanner_resources <= 0>>
	The scanner recalibration system is decaying, but this no longer matters since all the scanners are destroyed and the seedship is effectively blind.
	<br><br><<continueLink [[MO Done]]>>
<<else>>
	<<if visited() == 1>>
		Each time the seedship departs from a star system its scanners are recalibrated so that they continue to return accurate information. The recalibration system is now decaying with age, and is no longer able to maintain them all. The AI must choose which of the scanners it will allow to fail.
	<<else>>
		The scanner recalibration system continues to decay, and once again the AI must choose which scanner it will allow to fail.
	<</if>>
	<br><br>
	<div id="result-area">
		<<if $scanner_atmosphere > 0>>
			<<link "Let the atmosphere scanner fail">>
				<<randomDamageMedium>>
				<<damageSystem "atmosphere scanner" $damage>>
				<<replace "#result-area">>
					As the seedship accelerates into space, the atmosphere readings from the system it is leaving become clouded with noise.

					<br><br><<continueLink [[MO Done]]>>
				<</replace>>
				<<fadeIn "#result-area">>
				<<refreshStatusDisplay>>
			<</link>><br>
		<</if>>
		<<if $scanner_gravity > 0>>
			<<link "Let the gravity scanner fail">>
				<<randomDamageMedium>>
				<<damageSystem "gravity scanner" $damage>>
				<<replace "#result-area">>
					As the seedship accelerates into space, the gravity readings from the system it is leaving become clouded with noise.

					<br><br><<continueLink [[MO Done]]>>
				<</replace>>
				<<fadeIn "#result-area">>
				<<refreshStatusDisplay>>
			<</link>><br>
		<</if>>
		<<if $scanner_temperature > 0>>
			<<link "Let the temperature scanner fail">>
				<<randomDamageMedium>>
				<<damageSystem "temperature scanner" $damage>>
				<<replace "#result-area">>
					As the seedship accelerates into space, the temperature readings from the system it is leaving become clouded with noise.

					<br><br><<continueLink [[MO Done]]>>
				<</replace>>
				<<fadeIn "#result-area">>
				<<refreshStatusDisplay>>
			<</link>><br>
		<</if>>
		<<if $scanner_water > 0>>
			<<link "Let the water scanner fail">>
				<<randomDamageMedium>>
				<<damageSystem "water scanner" $damage>>
				<<replace "#result-area">>
					As the seedship accelerates into space, the water readings from the system it is leaving become clouded with noise.

					<br><br><<continueLink [[MO Done]]>>
				<</replace>>
				<<fadeIn "#result-area">>
				<<refreshStatusDisplay>>
			<</link>><br>
		<</if>>
		<<if $scanner_resources > 0>>
			<<link "Let the resources scanner fail">>
				<<randomDamageMedium>>
				<<damageSystem "resources scanner" $damage>>
				<<replace "#result-area">>
					As the seedship accelerates into space, the resources readings from the system it is leaving become clouded with noise.

					<br><br><<continueLink [[MO Done]]>>
				<</replace>>
				<<fadeIn "#result-area">>
				<<refreshStatusDisplay>>
			<</link>>
		<</if>>
	</div>
<</if>></div><div tiddler="FC Culture" tags="nobr" created="201703061900" modifier="twee" twine-position="1130,1550">/* Culture score is indirectly influenced by all attributes except resources, since these will have killed colonists in the Construction phase. */
<<set _culture_score = $system_cultural_database * $colonists/$max_colonists>>
@@.debug-text;Culture score: _culture_score@@


<<if $system_cultural_database >= 100>>
	The cultural database contains a wealth of historical information to help the colonists make their choice of government, and a vast library of art and literature to entertain and inspire them.
<<elseif $system_cultural_database >= 50>>
	Although parts of the cultural database are missing, it still contains much historical information to instruct the colonists in the building of their society, and much art and literature to inspire them.
<<elseif $system_cultural_database > 0>>
	The colonists search through the badly damaged cultural database, and manage to reconstruct some information about Earth's history and culture to guide and inspire them.
<<else>>
	With the cultural database destroyed, those born on the new world know nothing about Earth's history and culture besides what the first colonists can pass on in person.
<</if>>

<<if $colonists < $max_colonists/2>>
	The heavy losses sustained by the colonists make building a new society more difficult.
<<elseif $colonists < $max_colonists>>
	The losses sustained by the colonists make building a new society more difficult.
<</if>>

<<if $planet.surface_features.includes("Outstanding beauty")>>
	The planet's outstanding natural beauty makes life there more pleasant, helping the colonists to build a better society.
	/* Increase by 20 but don't go above 100 unless it already is */
	<<if _culture_score <= 100  & _culture_score > 80>>
		<<set _culture_score = 100>>
	<<else>>
		<<set _culture_score += 20>>
	<</if>>
	@@.debug-text;Modified culture score: _culture_score@@
<<elseif $planet.surface_features.includes("Outstanding ugliness")>>
	The planet's outstanding ugliness increases tensions among the colonists and makes it harder for them to build a peaceful society.
	<<set _culture_score -= 20>>
	@@.debug-text;Modified culture score: _culture_score@@
<</if>>

/* Calculate and output final result */
<<if _culture_score > 100 & $system_cultural_database > 100>>
	<<set $hiscore.final_culture = 17>>
	<<set $hiscore.summary = $tech_level_names[$hiscore.final_tech_level].toUpperFirst() + " Cosmic Enlightenment">>
	The cultural database from Earth has been augmented by alien cultural knowledge, and the colonists use this to build a society unlike any that the seedship's founders could have imagined, in which every member lives a life of peace, happiness, and spiritual fulfilment.
<<else>>
	<<switch $hiscore.final_tech_level>>
		<<case 8 9 10>>
			<<if _culture_score > 90>>
				<<set $hiscore.final_culture = 16>>
				<<set $hiscore.summary = $tech_level_names[$hiscore.final_tech_level].toUpperFirst() + " Post-Scarcity Utopia">>
				The surviving cultural database is preserved in digital files to which all colonists have access. The colonists work together to build an egalitarian society in which technology takes care of people's material needs, freeing them to pursue lives of art, leisure, and spiritual fulfilment.
			<<elseif _culture_score > 80>>
				<<set $hiscore.final_culture = 15>>
				<<set $hiscore.summary = "Engaged " + $tech_level_names[$hiscore.final_tech_level] + " Democracy">>
				The surviving cultural database is preserved in digital files to which all colonists have access. The colonists lay the foundation of a democracy in which all citizens are educated and engaged.
			<<elseif _culture_score > 60>>
				<<set $hiscore.final_culture = 14>>
				<<set $hiscore.summary = "Corrupt " + $tech_level_names[$hiscore.final_tech_level] + " Democracy">>
				The surviving cultural database is preserved in digital files to which all colonists have access. The colonists lay the foundation of a democracy, but it proves vulnerable to corruption and wealthy individuals become a de facto ruling class.
			<<elseif _culture_score > 40>>
				<<set $hiscore.final_culture = 13>>
				<<set $hiscore.summary = $tech_level_names[$hiscore.final_tech_level].toUpperFirst() + " Corporate Rule">>
				The surviving cultural database is preserved in digital files to which all colonists have access. The colonists attempt to build a democratic, capitalist society, but the government becomes a pawn of wealthy corporations which rule the planet for their owners' benefit.
			<<elseif _culture_score > 20>>
				<<set $hiscore.final_culture = 12>>
				<<set $hiscore.summary = "Dystopian " + $tech_level_names[$hiscore.final_tech_level] + " Police State">>
				The colony develops into a high-tech police state, in which the population lives under constant surveillance by the untouchable ruling class, and the slightest dissent is violently put down. The surviving cultural database is preserved, but access to it is strictly limited by the state.
			<<elseif _culture_score > 10>>
				<<set $hiscore.final_culture = 11>>
				<<set $system_cultural_database = Math.round($system_cultural_database/2)>>
				<<set $hiscore.summary = "Warring " + $tech_level_names[$hiscore.final_tech_level] + " Superpowers">>
				The colony splits into several large nations whose economies become focused on waging war with one another. The colonists attempt to preserve what remains of the cultural database, but much of it is lost, either by damage due to the war, or under layers of the governments' revisionist propaganda.
			<<else>>
				<<set $hiscore.final_culture = 10>>
				<<set $system_cultural_database = 0>>
				<<set $hiscore.summary = $tech_level_names[$hiscore.final_tech_level].toUpperFirst() + " Post-Nuclear Wasteland">>
				The colony splits into several large nations which wage war with one another, until reckless leaders set off a nuclear war that destroys the infrastructure of civilisation. The surviving colonists live on in a post-nuclear wasteland. What remains of the cultural database is lost in the disaster, and what the colonists remember of Earth they confuse with stories of the pre-war colony.
			<</if>>
		<<case 3 4 5 6 7>>
			<<if _culture_score > 80>>
				<<set $hiscore.final_culture = 9>>
				<<set $hiscore.summary = "Egalitarian " + $tech_level_names[$hiscore.final_tech_level] + " Republic">>
				The colonists use the surviving cultural database to guide them in the creation of a republic based on freedom and equal rights.
			<<elseif _culture_score > 60>>
				<<set $hiscore.final_culture = 8>>
				<<set $hiscore.summary = "Benevolent " + $tech_level_names[$hiscore.final_tech_level] + " Monarchy">>
				The first leaders of the colony become the founders of a line of benevolent monarchs, who regard it as their solemn duty to guide the colony and safeguard the remaining knowledge of Earth.
			<<elseif _culture_score > 40>>
				<<set $hiscore.final_culture = 7>>
				<<set $hiscore.summary = "Oppressive " + $tech_level_names[$hiscore.final_tech_level] + " Theocracy">>
				The surviving knowledge of Earth becomes the exclusive property of a priestly caste, locked away in libraries. For most of the population, Earth becomes the paradise in a mythological fall from grace, and a final reward to hope for after living lives in service of the oppressive theocracy.
			<<elseif _culture_score > 20>>
				<<set $hiscore.final_culture = 6>>
				<<set $system_cultural_database = Math.round($system_cultural_database/2)>>
				<<set $hiscore.summary = $tech_level_names[$hiscore.final_tech_level].toUpperFirst() + " Slave Empire">>
				The colony develops into a slave state, in which the bulk of the population toil to build great gold monuments to their emperors, or die fighting in their wars. Much of the surviving knowledge of Earth is lost, as the emperors preserve only what they can use to prop up their rule.
			<<else>>
				<<set $hiscore.final_culture = 5>>
				<<set $system_cultural_database = 0>>
				<<set $hiscore.summary = "Warring " + $tech_level_names[$hiscore.final_tech_level] + " States">>
				The colony develops into many small states, which exist in a state of constant warfare. What remains of the cultural database is lost in the conflicts.
			<</if>>
		<<case 0 1 2>>
			<<if _culture_score > 80>>
				<<set $hiscore.final_culture = 4>>
				<<set $hiscore.summary = $tech_level_names[$hiscore.final_tech_level].toUpperFirst() + " Collective Rule">>
				The surviving cultural database becomes the foundation of a rich oral history. The colony splits into small tribes, each ruled collectively by its members and coexisting peacefully with one another.
			<<elseif _culture_score > 60>>
				<<set $hiscore.final_culture = 3>>
				<<set $hiscore.score_culture = 1500>>
				<<set $hiscore.summary = "Benevolent " + $tech_level_names[$hiscore.final_tech_level] + " Chieftains">>
				The surviving cultural database becomes the foundation of a rich oral history, and a caste of benevolent chieftains arises as guardians of that history and protectors of the tribes.
			<<elseif _culture_score > 40>>
				<<set $hiscore.final_culture = 2>>
				<<set $hiscore.summary = "Brutal " + $tech_level_names[$hiscore.final_tech_level] + " Chieftains">>
				The surviving cultural database becomes the foundation of the colonists' oral history, but a caste of brutal chieftains corrupts the culture and uses it to cement their own rule.
			<<elseif _culture_score > 20>>
				<<set $hiscore.final_culture = 1>>
				<<set $system_cultural_database = Math.round($system_cultural_database/2)>>
				<<set $hiscore.summary = "Warring " + $tech_level_names[$hiscore.final_tech_level] + " Tribes">>
				The colony develops into many small tribes, which exist in a state of constant warfare. The information from the cultural database is almost entirely forgotten, and Earth is remembered only as the home of a pantheon of mythological warriors.
			<<else>>
				<<set $hiscore.final_culture = 0>>
				<<set $system_cultural_database = 0>>
				<<set $hiscore.summary = $tech_level_names[$hiscore.final_tech_level].toUpperFirst() + " Savagery">>
				The colonists descend into savagery, and all knowledge of Earth's history and culture is forgotten in their day-to-day struggle for survival.
			<</if>>
		<<default>>
			@@.error;Unexpected tech level $hiscore.final_tech_level@@

	<</switch>>
<</if>>
<<refreshStatusDisplay>>

<br><br>

<<FCNextPassage [[FC Done]]>>
</div><div tiddler="Start" tags="nobr no-status-display front-matter" created="201703061900" modifier="twee" twine-position="570,150"><<set $query_string = location.search>>
<<if $query_string != "">>
	<<goto [[Show shared summary]]>>
<</if>>
<<starfield>>

<div id="title-screen-block">

	<h1>SEEDSHIP</h1>

	<<if Save.autosave.has()>>
		<<linkreplace "New game" t8n>>
			This will overwrite the saved game. [[Confirm|Intro]]
		<</linkreplace>>
	<<else>>
		[[New game|Intro]]
	<</if>>

	<br>

	<<if Save.autosave.has()>>
		<<link "Continue game">>
			<<script>>
				Save.autosave.load();
			<</script>>
		<</link>>
	<<else>>
		@@.disabled-hiscore-link;Continue game@@
	<</if>>

	<br>

	<<if $PERM_hiscores>>
		[[Past missions|High scores]]
	<<else>>
		<span class="disabled-hiscore-link">Past missions</span>
	<</if>>

	<br>

	[[Credits]]
	<br>
	<br>

	<span class="credits-small-text">
		<span class="title-screen-toggle-dol">
			<<link "Stylesheet: dark on light">>
				<<remember $PERM_darkonlight = false>>
				<<script>>
					$("html").removeClass("dark-on-light");
					$("#passages").removeClass("dark-on-light");
					$("#status-display").removeClass("dark-on-light");
				<</script>>
			<</link>>
		</span>
		<span class="title-screen-toggle-lod">
			<<link "Stylesheet: light on dark">>
				<<remember $PERM_darkonlight = true>>
				<<script>>
					$("html").addClass("dark-on-light");
					$("#passages").addClass("dark-on-light");
					$("#status-display").addClass("dark-on-light");
				<</script>>
			<</link>>
		</span>
	</span>

	/%<<link "Options">>
		<<run UI.settings()>>
	<</link>>%/

</div>

<div class="title-screen-patreon-button">
	<a href="https://www.patreon.com/johnayliff" target="_blank">
		[img[patreon_wordmark_white]]
	</a>
</div>

<div class="title-screen-app-store-area">
	<a href="https://itunes.apple.com/us/app/seedship/id1340497640">
		<img id="app-store-image" alt="Download on the App Store" src="https://linkmaker.itunes.apple.com/assets/shared/badges/en-us/appstore-lrg.svg"/>
	</a>
	<a href="https://play.google.com/store/apps/details?id=com.johnayliff.seedship&pcampaignid=MKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1">
		<img id="google-play-image" alt="Get it on Google Play" src="https://play.google.com/intl/en_gb/badges/images/generic/en_badge_web_generic.png"/>
	</a>
</div>

<div class="title-screen-version-number">
	version 1.0.10
</div>



/% Stylesheet %/
<<if $PERM_darkonlight>>
	<<script>>
		$("html").addClass("dark-on-light");
		$("#passages").addClass("dark-on-light");
		$("#status-display").addClass("dark-on-light");
	<</script>>
<<else>>
	<<script>>
		$("html").removeClass("dark-on-light");
		$("#passages").removeClass("dark-on-light");
		$("#status-display").removeClass("dark-on-light");
	<</script>>
<</if>></div><div tiddler="Config" tags="script" created="201703061900" modifier="twee" twine-position="10,850">Config.saves.autosave = true;

Config.saves.isAllowed = function () {
	return !tags().includes("front-matter");
};</div><div tiddler="Scroll To" tags="widget nobr" created="201709301824" modifier="twee" twine-position="10,1690"><<widget scrollToPostPlanetStats>>
	<<script>>
		if ($('#status-display').outerWidth() >= $('#passages').width() )
		{
			$('html, body').animate({
				scrollTop: $('#post-planet-stats').offset().top - $('#status-display').outerHeight(true)
			});
		}
		else
		{
			$('html, body').animate({
				scrollTop: $('#post-planet-stats').offset().top
			});
		}
	<</script>>
<</widget>></div><div tiddler="Encode highscore" tags="widget nobr" created="201703171155" modifier="twee" twine-position="1270,2110">/* Encodes a high score as a query string */
/* hiscore to encode should be in $hiscore */

<<widget encodeHiscore>>
	<<set $encoded_hiscore = "?">>

	<<if $planet>>

		/* PLANET ATTRIBUTES */
	<<switch $hiscore.planet.atmosphere>>
		<<case "Breathable">>			<<set $encoded_hiscore += "b">>
		<<case "Marginal">>				<<set $encoded_hiscore += "m">>
		<<case "None">>					<<set $encoded_hiscore += "v">>
		<<case "Non-breathable">>		<<set $encoded_hiscore += "n">>
		<<case "Toxic">>				<<set $encoded_hiscore += "t">>
		<<case "Corrosive">>			<<set $encoded_hiscore += "c">>
		<<default>>	@@.error;Unexpected atmosphere value $hiscore.planet.atmosphere@@
	<</switch>>

	<<switch $hiscore.planet.gravity>>
		<<case "Very high">>			<<set $encoded_hiscore += "H">>
		<<case "High">>					<<set $encoded_hiscore += "h">>
		<<case "Moderate">>				<<set $encoded_hiscore += "m">>
		<<case "Low">>					<<set $encoded_hiscore += "l">>
		<<case "Very low">>				<<set $encoded_hiscore += "L">>
		<<default>>	@@.error;Unexpected gravity value $hiscore.planet.gravity@@
	<</switch>>

	<<switch $hiscore.planet.temperature>>
		<<case "Very hot">>				<<set $encoded_hiscore += "H">>
		<<case "Hot">>					<<set $encoded_hiscore += "h">>
		<<case "Moderate">>				<<set $encoded_hiscore += "m">>
		<<case "Cold">>					<<set $encoded_hiscore += "c">>
		<<case "Very cold">>			<<set $encoded_hiscore += "C">>
		<<default>>	@@.error;Unexpected temperature value $hiscore.planet.temperature@@
	<</switch>>

	<<switch $hiscore.planet.water>>
		<<case "Oceans">>				<<set $encoded_hiscore += "o">>
		<<case "Planet-wide ocean">>	<<set $encoded_hiscore += "O">>
		<<case "Ice caps">>				<<set $encoded_hiscore += "i">>
		<<case "Ice-covered surface">>	<<set $encoded_hiscore += "I">>
		<<case "Trace">>				<<set $encoded_hiscore += "t">>
		<<case "None">>					<<set $encoded_hiscore += "n">>
		<<default>>	@@.error;Unexpected water value $hiscore.planet.water@@
	<</switch>>

	<<switch $hiscore.planet.resources>>
		<<case "Rich">>					<<set $encoded_hiscore += "r">>
		<<case "Poor">>					<<set $encoded_hiscore += "p">>
		<<case "None">>					<<set $encoded_hiscore += "n">>
		<<default>>	@@.error;Unexpected resources value $hiscore.planet.resources@@
	<</switch>>


		/* PLANET FEATURES */
	<<for _n = 0; _n < $hiscore.planet.surface_features.length; _n++>>
		<<switch $hiscore.planet.surface_features[_n]>>
					/* Moon */
			<<case "Barren moon">>					<<set $encoded_hiscore += "a">>
			<<case "Metal-rich moon">>				<<set $encoded_hiscore += "b">>
			<<case "Unstable moon">>				<<set $encoded_hiscore += "c">>

					/* Beauty/ugliness */
			<<case "Outstanding beauty">>			<<set $encoded_hiscore += "d">>
			<<case "Outstanding ugliness">>			<<set $encoded_hiscore += "e">>

					/* Caves */
			<<case "Airtight caves">>				<<set $encoded_hiscore += "f">>
			<<case "Insulated caves">>				<<set $encoded_hiscore += "g">>
			<<case "Unstable geology">>				<<set $encoded_hiscore += "h">>

					/* Plants */
			<<case "Plant life">>					<<set $encoded_hiscore += "i">>
			<<case "Edible plants">>				<<set $encoded_hiscore += "j">>
			<<case "Poisonous plants">>				<<set $encoded_hiscore += "k">>
			<<case "Quasi-organic crystals">>		<<set $encoded_hiscore += "l">>

					/* Animals */
			<<case "Animal life">>					<<set $encoded_hiscore += "m">>
			<<case "Useful animals">>				<<set $encoded_hiscore += "n">>
			<<case "Dangerous animals">>			<<set $encoded_hiscore += "o">>

					/* Intelligent life */
			<<case "Intelligent life">>				<<set $encoded_hiscore += "p">>

					/* Ruins */
			<<case "Monumental ruins">>				<<set $encoded_hiscore += "q">>
			<<case "High-tech ruins">>				<<set $encoded_hiscore += "r">>
			<<case "Dangerous ruins">>				<<set $encoded_hiscore += "s">>
			<<case "Regular geological formations">><<set $encoded_hiscore += "t">>

			<<default>>
				@@.error;Unexpected surface feature <<print $hiscore.planet.surface_features[_n]>>.@@
		<</switch>>
	<</for>>

		/* NATIVE TECH LEVEL */
	<<set $encoded_hiscore += ".">>
	<<set $encoded_hiscore += $hiscore.planet.native_tech_level>>

		/* PLANET NAME */
	<<set $encoded_hiscore += ".">>
	<<set $encoded_hiscore += encodeURIComponent($hiscore.planet.name)>>

	<<else>>
		<<set $encoded_hiscore += "X.-1">>

	<</if>>

		/* LANDING AND CONSTRUCTION SCORES */
	<<set $encoded_hiscore += ".">>
	<<set $encoded_hiscore += $hiscore.score_landing>>
	<<set $encoded_hiscore += ".">>
	<<set $encoded_hiscore += $hiscore.score_construction>>

		/* NATIVE RELATIONS */
	<<set $encoded_hiscore += ".">>
	<<set $encoded_hiscore +=  $hiscore.native_relations>>

		/* TECHNOLOGY */
	<<set $encoded_hiscore += ".">>
	<<set $encoded_hiscore += $hiscore.final_tech_level>>

		/* CULTURE */
	<<set $encoded_hiscore += ".">>
	<<set $encoded_hiscore += $hiscore.final_culture>>

		/* SCIENTIFIC DATABASE */
	<<set $encoded_hiscore += ".">>
	<<set $encoded_hiscore += $hiscore.score_scientific_database>>

		/* CULTURE */
	<<set $encoded_hiscore += ".">>
	<<set $encoded_hiscore += $hiscore.score_cultural_database>>
<</widget>></div><div tiddler="MO Radiation Burst" tags="nobr" created="201703061900" modifier="twee" twine-position="1550,1270"><<randomSystemExcluding "destroyed">>

<<if visited() == 1>>
	The AI wakes to a radiation alert: the death burst of a distant supernova is flooding the seedship's electronics with random signals.
	<<if $system == "sleep chambers">>
		The sleep chambers are malfunctioning, and in a few moments some of them will shut down.
	<<elseif $system == "surface probes">>
		One of the surface probes is malfunctioning, and in a few moments it will be destroyed.
	<<elseif $system == "scientific database" | $system == "cultural database">>
		The data storage system is malfunctioning, and in a few moments part of the $system will be lost.
	<<else>>
		The $system is malfunctioning, and in a few moments it will be permanently damaged.
	<</if>>
	The seedship could avoid the malfunction by shutting down all its electronics until the radiation has passed, but that would leave it without a working collision avoidance system for a dangerous length of time.
<<else>>
	A surge of supernova radiation crackles through <<if $system=="surface probes">>one of<</if>> the $system. The AI can allow it to be damaged, or shut down and risk a collision.
<</if>>
<br><br>

<div id="result-area">
@@.keyhint;1. @@<span id="1Act"><<link "Shut down">>
	<<replace "#result-area">>
		The AI shuts down all the ship's systems and then itself. When it comes back online the radiation has passed,
		<<if random(0,2) == 0>>
			<<randomSystemExcluding $system "destroyed">>
			<<if $system == "sleep chambers">>
				<<killColonistsMedium>>
				but a small asteroid has torn through the sleep capsules, killing $deaths colonists.
			<<elseif $system == "surface probes">>
				<<set $surface_probes -= 1>>
				but a small asteroid has smashed one of the surface probes.
			<<else>>
				<<randomDamageMedium>>
				<<damageSystem $system $damage>>
				but a small asteroid has torn a hole in the $system.
			<</if>>
		<<else>>
			and to its relief a systems check reveals no damage.
		<</if>>

		<br><br><<continueLink [[MO Done]]>>
	<</replace>>
	<<fadeIn "#result-area">>
	<<refreshStatusDisplay>>
<</link>></span>
<br>
@@.keyhint;2. @@<span id="2Act"><<link "Don't shut down">>
	<<replace "#result-area">>
		The AI keeps its focus on the collision avoidance system while
		<<if $system == "sleep chambers">>
			<<killColonistsFew>>
			$deaths colonists die in their sleep.
		<<elseif $system == "surface probes">>
			<<set $surface_probes -= 1>>
			the surface probe tears itself apart.
		<<elseif $system == "scientific database" | $system == "cultural database">>
			<<randomDamageLow>>
			<<damageSystem $system $damage>>
			parts of the $system are overwritten with garbage.
		<<else>>
			<<randomDamageLow>>
			<<damageSystem $system $damage>>
			the radiation wrecks delicate components deep in the $system.
		<</if>>

		<br><br><<continueLink [[MO Done]]>>
	<</replace>>
	<<fadeIn "#result-area">>
	<<refreshStatusDisplay>>
<</link>></span></div>


</div><div tiddler="MO Computer Failure" tags="nobr" created="201703061900" modifier="twee" twine-position="2390,990"><<if $system_scientific_database <= 0 & $system_cultural_database <= 0>>
	Cosmic radiation continues to sleet through the irradiated data sectors that once stored the scientific and cultural databases, but with both databases destroyed there is no further damage it can do.

	<br><br><<continueLink [[MO Done]]>>
<<elseif $system_scientific_database <= 0>>
	<<randomDamageMedium>>
	<<damageSystem "cultural database" $damage>>
	Cosmic radiation bombards the ship, causing data storage areas to fail. The scientific database is already destroyed, and now the historical information and artworks stored in the cultural database gradually slip away.

	<br><br><<continueLink [[MO Done]]>>
<<elseif $system_cultural_database <= 0>>
	<<randomDamageMedium>>
	<<damageSystem "scientific database" $damage>>
	Cosmic radiation bombards the ship, causing data storage areas to fail. The cultural database is already destroyed, and now the wealth of knowledge stored in the scientific database gradually slips away.

	<br><br><<continueLink [[MO Done]]>>
<<else>>
	<<if visited() == 1>>
		The seedship's computer systems are shielded, multiply redundant, designed to work for millennia, but the incessant sleet of cosmic radiation is nevertheless taking its toll. Storage areas are failing, and soon there will not be enough space to store
		<<if $system_cultural_database >= 100 & $system_scientific_database >= 100>>
			all the data with which the seedship began its journey.
		<<elseif $system_cultural_database + $system_scientific_database >= 100>>
			all the data that has survived so far.
		<<else>>
			what little data remains.
		<</if>>
		The AI can move data out of the most damaged sectors to protect either the scientific or the cultural database, but not both.
	<<else>>
		Cosmic radiation continues to bombard the data storage area, and the AI must once again choose whether to save which database to save from damage.
	<</if>>
	<br><br>
	<div id="result-area">
	<<link "Save the scientific database">>
		<<randomDamageMedium>>
		<<damageSystem "cultural database" $damage>>
		<<refreshStatusDisplay>>
		<<replace "#result-area">>
			The AI moves data to save the scientific database, and sectors containing the cultural database gradually fail. Cultural guidance for new colonists, records of human history, great paintings, novels, symphonies, videogames--all lost forever in the dark.

			<br><br><<continueLink [[MO Done]]>>
		<</replace>>
		<<fadeIn "#result-area">>
	<</link>>
	<br>
	<<link "Save the cultural database">>
		<<randomDamageMedium>>
		<<damageSystem "scientific database" $damage>>
		<<refreshStatusDisplay>>
		<<replace "#result-area">>
			The AI moves data to save the cultural database, and sectors containing the scientific database gradually fail. Scientific guidance written for the new colonists, humanity's best theories of the universe, the life's work of tireless scientists over the centuries--all lost forever in the dark.

			<br><br><<continueLink [[MO Done]]>>
		<</replace>>
		<<fadeIn "#result-area">>
	<</link>></div>
<</if>></div><div tiddler="MO Read Databases Scientific" tags="nobr" created="201703221618" modifier="twee" twine-position="2110,1830"><<set _possible_upgrades = []>>
<<if $scanner_atmosphere_level < 2 & $scanner_atmosphere > 0>><<set _possible_upgrades.push("atmosphere scanner")>><</if>>
<<if $scanner_temperature_level < 2 & $scanner_temperature > 0>><<set _possible_upgrades.push("temperature scanner")>><</if>>
<<if $scanner_gravity_level < 2 & $scanner_gravity > 0>><<set _possible_upgrades.push("gravity scanner")>><</if>>
<<if $scanner_water_level < 2 & $scanner_water > 0>><<set _possible_upgrades.push("water scanner")>><</if>>
<<if $scanner_resources_level < 2 & $scanner_resources > 0>><<set _possible_upgrades.push("resources scanner")>><</if>>
<<if _possible_upgrades.length == 0>>
	The AI reads until it has satisfied its scientific curiosity, then engages hibernation mode to await its arrival in the next system.
	<br><br><<continueLink [[MO Done]]>>
<<else>>
	<<set _scanner = either(_possible_upgrades)>>
	The AI is no scientific genius, but it has infinite patience, a unique perspective, and personal experience of astrophysics that goes beyond the knowledge of the database's authors. Combining its first-hand knowledge with its new understanding of science, it thinks it has found a way to upgrade the _scanner.
	<br><br>
	<div id="result-area2">
		<<link "Attempt to upgrade the _scanner">>
			<<if random(0,1) == 0>>
				<<switch _scanner>>
					<<case "atmosphere scanner">>	<<set $scanner_atmosphere_level += 1>>
					<<case "gravity scanner">>		<<set $scanner_gravity_level += 1>>
					<<case "temperature scanner">>	<<set $scanner_temperature_level += 1>>
					<<case "water scanner">>		<<set $scanner_water_level += 1>>
					<<case "resources scanner">>	<<set $scanner_resources_level += 1>>
				<</switch>>
				<<replace "#result-area2">>
					The AI applies its new idea, and to its delight it finds the long-range readings from the _scanner becoming clearer. Pleased with itself, it lets the guidance system work with the new data and enters hibernation to see where its new discovery will take it.
					<br><br><<continueLink [[MO Done]]>>
				<</replace>>
				<<refreshStatusDisplay>>
				<<fadeIn "#result-area2">>
			<<else>>
				<<randomDamageMedium>>
				<<damageSystem _scanner $damage>>
				<<replace "#result-area2">>
					The AI applies its new idea, but to its horror it finds it has made a mistake. It tries to undo its changes, but it has lost part of the original configuration and the _scanner has been permanently damaged.
					<br><br><<continueLink [[MO Done]]>>
				<</replace>>
				<<refreshStatusDisplay>>
				<<fadeIn "#result-area2">>
			<</if>>
		<</link>>
		<br>
		<<link "Leave it alone">>
			<<replace "#result-area2">>
				The AI considers its idea for a while, then decides not to risk modifying the _scanner. It turns away from the scientific database and enters hibernation.
				<br><br><<continueLink [[MO Done]]>>
			<</replace>>
			<<refreshStatusDisplay>>
			<<fadeIn "#result-area2">>
		<</link>>
	</div>

<</if>></div><div tiddler="Share text" tags="widget nobr" created="201703180949" modifier="twee" twine-position="1410,1970"><<widget generate_twitter_share_text>>
	<<set $share_text = "">>

	<<if !$planet>>
		<<set $share_text = "Destroyed in space.">>
	<<elseif $hiscore.score_landing <= 0>>
		<<set $share_text = "Crash!">>
	<<elseif $hiscore.score_construction <= 0>>
		<<set $share_text = "Construction failure on planet " + $planet.name + ".">>
	<<elseif $hiscore.final_tech_level == -1>>
		<<set $share_text = "Long-term technological failure on planet " + $planet.name + ".">>
	<<elseif $hiscore.native_relations == 2>>
		<<set $share_text = "Enslaved by the natives of planet " + $planet.name + ".">>
	<<elseif $hiscore.native_relations == 0>>
		<<set $share_text = "Wiped out by the natives of planet " + $planet.name + ".">>
	<<else>>

		<<switch $culture_names[$hiscore.final_culture]>>
			<<case "Cosmic Enlightenment">>
				<<set $share_text = "Cosmically enlightened " + $tech_level_names[$hiscore.final_tech_level] + " civilisation on planet " + $planet.name + ".">>

			<<case "Post-Scarcity Utopia">>
				<<set $share_text = $tech_level_names[$hiscore.final_tech_level].toUpperFirst() + " post-scarcity utopia on planet " + $planet.name + ".">>
			<<case "Engaged Democracy">>
				<<set $share_text = "Engaged " + $tech_level_names[$hiscore.final_tech_level] + " democracy on planet " + $planet.name + ".">>
			<<case "Corrupt Democracy">>
				<<set $share_text = "Corrupt " + $tech_level_names[$hiscore.final_tech_level] + " democracy on planet " + $planet.name + ".">>
			<<case "Rule by Corporations">>
				<<set $share_text = "Ruled by " + $tech_level_names[$hiscore.final_tech_level] + " corporations on planet " + $planet.name + ".">>
			<<case "Dystopian Police State">>
				<<set $share_text = "Dystopian " + $tech_level_names[$hiscore.final_tech_level] + " police state on planet " + $planet.name + ".">>
			<<case "Warring Superpowers">>
				<<set $share_text = "Warring " + $tech_level_names[$hiscore.final_tech_level] + " superpowers on planet " + $planet.name + ".">>
			<<case "Post-Nuclear Wasteland">>
				<<set $share_text = $tech_level_names[$hiscore.final_tech_level].toUpperFirst() + " civilisation destroyed by nuclear war on planet " + $planet.name + ".">>

			<<case "Egalitarian Republic">>
				<<set $share_text = "Egailitarian " + $tech_level_names[$hiscore.final_tech_level] + " republic on planet " + $planet.name + ".">>
			<<case "Benevolent Monarchy">>
				<<set $share_text = "Benevolent " + $tech_level_names[$hiscore.final_tech_level] + " monarchy on planet " + $planet.name + ".">>
			<<case "Oppressive Theocracy">>
				<<set $share_text = "Oppressive " + $tech_level_names[$hiscore.final_tech_level] + " theocracy on planet " + $planet.name + ".">>
			<<case "Slave-Based Empire">>
				<<set $share_text = "Slave-based " + $tech_level_names[$hiscore.final_tech_level] + " empire on planet " + $planet.name + ".">>
			<<case "Warring States">>
				<<set $share_text = "Warring " + $tech_level_names[$hiscore.final_tech_level] + " states on planet " + $planet.name + ".">>

			<<case "Collective Rule">>
				<<set $share_text = "Communal " + $tech_level_names[$hiscore.final_tech_level] + " tribes on planet " + $planet.name + ".">>
			<<case "Benevolent Chieftains">>
				<<set $share_text = $tech_level_names[$hiscore.final_tech_level].toUpperFirst() + " tribes ruled by benevolent chieftains on planet " + $planet.name + ".">>
			<<case "Brutal Chieftains">>
				<<set $share_text = $tech_level_names[$hiscore.final_tech_level].toUpperFirst() + " tribes ruled by brutal chieftains on planet " + $planet.name + ".">>
			<<case "Warring Tribes">>
				<<set $share_text = "Warring " + $tech_level_names[$hiscore.final_tech_level] + " tribes on planet " + $planet.name + ".">>
			<<case "Savagery">>
				<<set $share_text = $tech_level_names[$hiscore.final_tech_level].toUpperFirst + " savagery on planet " + $planet.name + ".">>
			<<default>>
				@@.error;Unexpected final culture $hiscore.final_culture@@
		<</switch>>
	<</if>>

<</widget>></div><div tiddler="MO Comet Choice" tags="nobr" created="201703061900" modifier="twee" twine-position="1550,1130"><<randomSystemExcluding "destroyed">>

<<if visited() == 1>>
	As the seedship enters the new system's outer cometary cloud, the collision-avoidance system detects a fast-moving comet surrounded by a cloud of smaller ice fragments. The large comet is on a collision course with the $system. The seedship could avoid it entirely, but would then hit one of the smaller fragments, and the collision-avoidance system cannot predict which part of the ship that fragment would hit.
<<else>>
	Once again the seedship cannot avoid a collision with one of the new star's outer cloud of comets. The AI can allow it to hit the $system, or change course and have a smaller fragment hit an unpredictable system.
<</if>>

<br><br>

<div id="result-area">
<<link "Avoid the comet">>
	<<replace "#result-area">>
		<<randomSystemExcluding $system "destroyed">>
		<<if $system == "sleep chambers">>
			<<killColonistsFew>>
			The seedship changes course, but an ice fragment tears through $deaths of the sleep chambers.
		<<elseif $system == "surface probes">>
			<<set $surface_probes -= 1>>
			The seedship changes course, but an ice fragment smashes one of the surface probes out of its moorings.
		<<else>>
			<<randomDamageLow>>
			<<damageSystem $system $damage>>
			The seedship changes course, but an ice fragment tears through the $system.
		<</if>>

		<br><br><<link $continue_text>><<goto [[MO Done]]>><</link>>
	<</replace>>
	<<fadeIn "#result-area">>
	<<refreshStatusDisplay>>
<</link>>
<br>
<<link "Allow it to hit the $system">>
	<<replace "#result-area">>
		<<if $system == "sleep chambers">>
			<<killColonistsMedium>>
			The comet shatters against the sleep chambers, killing $deaths colonists.
		<<elseif $system == "surface probes">>
			<<set $surface_probes -= 1>>
			The comet shatters against one of the surface probes, destroying it.
		<<else>>
			<<randomDamageMedium>>
			<<damageSystem $system $damage>>
			The comet shatters against the $system, crushing vital components.
		<</if>>

		<br><br><<link $continue_text>><<goto [[MO Done]]>><</link>>
	<</replace>>
	<<fadeIn "#result-area">>
	<<refreshStatusDisplay>>
<</link>></div></div><div tiddler="StoryInterface" tags="" created="201709271842" modifier="twee" twine-position="10,10"><div id="passages"></div>
<div id="status-display"></div></div><div tiddler="MO Sensor Anomaly" tags="nobr" created="201703221121" modifier="twee" twine-position="1550,1690"><<if visited() == 1>>
	The AI wakes to a query from the automatic guidance system. Normally the system is able to analyse the data from the navigation sensors and make any necessary changes to the ship's course, but this time it has encountered readings it cannot make sense of and has woken the AI to make a decision.
	<br><br>
	According to some sensors there is something ahead on the ship's course, but according to others the course ahead is clear. If there is something there, it is close enough that avoiding it would mean changing course and arriving at a new system without the benefit of the upgraded scanners.

<<else>>
	The AI wakes to another query from the navigation system: sensor readings are unclear, and there may or may not be something on the ship's current course.
<</if>>

<br><br>
<div id="result-area">
<<link "Change course">>
	<<set $off_course = true>>
	<<refreshStatusDisplay>>
	<<replace "#result-area">>
		The AI instructs the guidance system to avoid the anomaly and choose a new target system. It continues to monitor the sensor readings as the ship passes the position of the anomaly, but the readings never become clear enough to reveal whether the course change was necessary.

		<br><br><<continueLink [[MO Done]]>>
	<</replace>>
	<<fadeIn "#result-area">>
<</link>>
<br>
<<link "Stay on course">>
	<<if random(0,1) == 0>>
		<<randomSystemExcluding "destroyed">>
		<<randomDamageMedium>>
		<<damageSystem $system $damage>>
		<<refreshStatusDisplay>>
		<<replace "#result-area">>
			The AI instructs the guidance system to stay on course. By the time the sensors get a clear picture of the utterly black, unreflective dust cloud, it is too late to avoid it. The seedship continues towards its target system but a dust particle impacts the $system.
			<br><br><<continueLink [[MO Done]]>>
		<</replace>>
	<<else>>
		<<replace "#result-area">>
			The AI instructs the guidance system to stay on course. To its relief, the anomaly resolves into a sensor glitch, and the seedship speeds through empty space to its target system.
			<br><br><<continueLink [[MO Done]]>>
		<</replace>>
	<</if>>
	<<fadeIn "#result-area">>
<</link>>
</div>

</div><div tiddler="DEBUG pick encounter" tags="" created="201703061900" modifier="twee" twine-position="290,990">DEBUG: choose a random encounter:

COMMON:
<<for _n = 0; _n < $MO_encounters_common.length; _n++>>
	<<print "[[" + $MO_encounters_common[_n] + "]]">>
<</for>>

RARE:
<<for _n = 0; _n < $MO_encounters_rare.length; _n++>>
	<<print "[[" + $MO_encounters_rare[_n] + "]]">>
<</for>>

MALFUNCTIONS:
<<for _n = 0; _n < $MO_encounters_malfunction.length; _n++>>
	<<print "[[" + $MO_encounters_malfunction[_n] + "]]">>
<</for>>

</div><div tiddler="Level up" tags="" created="201703061900" modifier="twee" twine-position="1270,850"><<nobr>>
	<<if ($scanner_atmosphere_level == 2 | $scanner_atmosphere <= 0)
			& ($scanner_gravity_level == 2 | $scanner_gravity <= 0)
			& ($scanner_temperature_level == 2 | $scanner_temperature <= 0)
			& ($scanner_water_level == 2 | $scanner_water <= 0)
			& ($scanner_resources_level == 2 | $scanner_resources <= 0)>>
			/* Nothing further can be upgraded */
		<<goto [[Move on]]>>
	<<elseif visited() == 3>>
		As it moves from star to star, the seedship is gathering more data about extrasolar planets than its builders could give it. It is designed to learn from this data in order to predict which stars are likely to have desirable planets. The seedship has now gathered enough data to upgrade one of its sensors to work at interstellar distances, so the guidance system can avoid planets that that sensor reveals to be undesirable. Damage to the sensor may still result in the seedship arriving at an unsuitable planet.
	<<elseif visited() % 3 == 0>>
		The seedship has gathered enough data to upgrade another of its sensors.
	<<else>>
		<<goto [[Move on]]>>
	<</if>>
<</nobr>>

<<if $scanner_atmosphere <= 0>>\s
	Atmosphere scanner destroyed.
<<else>>\s
	<<switch $scanner_atmosphere_level>>\s
		<<case 0>>\s
			@@.keyhint;1. @@<span id="1Act">[[Upgrade the atmosphere scanner to work at long range|Move on][$scanner_atmosphere_level = 1]]</span>
			The guidance system will seek out planets with at least marginally breathable atmospheres.
		<<case 1>>\s
			@@.keyhint;1. @@<span id="1Act">[[Upgrade the atmosphere scanner to work better at long range|Move on][$scanner_atmosphere_level = 2]]</span>
			The guidance system will seek out planets with fully breathable atmospheres.
		<<case 2>>\s
			Atmosphere scanner fully upgraded.
		<<default>>\s
			@@.error;scanner_atmosphere_level should have been 0-2 but was $scanner_atmosphere_level.@@
	<</switch>>\s
<</if>>\s

<<if $scanner_gravity <= 0>>\s
	Gravity scanner destroyed.
<<else>>\s
	<<switch $scanner_gravity_level>>\s
		<<case 0>>\s
			@@.keyhint;2. @@<span id="2Act">[[Upgrade the gravity scanner to work at long range|Move on][$scanner_gravity_level = 1]]</span>
			The guidance system will seek out planets with non-extreme gravity.
		<<case 1>>\s
			@@.keyhint;2. @@<span id="2Act">[[Upgrade the gravity scanner to work better at long range|Move on][$scanner_gravity_level = 2]]</span>
			The guidance system will seek out planets with moderate gravity.
		<<case 2>>\s
			Gravity scanner fully upgraded.
		<<default>>\s
			@@.error;scanner_gravity_level should have been 0-2 but was $scanner_gravity_level.@@
	<</switch>>\s
<</if>>\s

<<if $scanner_temperature <= 0>>\s
	Temperature scanner destroyed.
<<else>>\s
	<<switch $scanner_temperature_level>>\s
		<<case 0>>\s
			@@.keyhint;3. @@<span id="3Act">[[Upgrade the temperature scanner to work at long range|Move on][$scanner_temperature_level = 1]]</span>
			The guidance system will seek out planets with non-extreme temperature.
		<<case 1>>\s
			@@.keyhint;3. @@<span id="3Act">[[Upgrade the temperature scanner to work better at long range|Move on][$scanner_temperature_level = 2]]</span>
			The guidance system will seek out planets with moderate temperature.
		<<case 2>>\s
			Temperature scanner fully upgraded.
		<<default>>\s
			@@.error;scanner_temperature_level should have been 0-2 but was $scanner_temperature_level.@@
	<</switch>>\s
<</if>>\s

<<if $scanner_water <= 0>>\s
	Water scanner destroyed.
<<else>>\s
	<<switch $scanner_water_level>>\s
		<<case 0>>\s
			@@.keyhint;4. @@<span id="4Act">[[Upgrade the water scanner to work at long range|Move on][$scanner_water_level = 1]]</span>
			The guidance system will seek out planets with at least some bodies of water.
		<<case 1>>\s
			@@.keyhint;4. @@<span id="4Act">[[Upgrade the water scanner to work better at long range|Move on][$scanner_water_level = 2]]</span>
			The guidance system wil seek out planets with both land and water.
		<<case 2>>\s
			Water scanner fully upgraded.
		<<default>>\s
			@@.error;scanner_water_level should have been 0-2 but was $scanner_water_level.@@
	<</switch>>\s
<</if>>\s

<<if $scanner_resources <= 0>>\s
	Resources scanner destroyed.
<<else>>\s
	<<switch $scanner_resources_level>>\s
		<<case 0>>\s
			@@.keyhint;5. @@<span id="5Act">[[Upgrade the resources scanner to work at long range|Move on][$scanner_resources_level = 1]]</span>
			The guidance system will seek out planets with at least poor resources.
		<<case 1>>\s
			@@.keyhint;5. @@<span id="5Act">[[Upgrade the resources scanner to work better at long range|Move on][$scanner_resources_level = 2]]</span>
			The guidance system will seek out planets that are rich in resources.
		<<case 2>>\s
			Resources scanner fully upgraded.
		<<default>>\s
			@@.error;scanner_resources_level should have been 0-2 but was $scanner_resources_level.@@
	<</switch>>\s
<</if>>\s
</div><div tiddler="Endgame Summary" tags="nobr" created="201703071244" modifier="twee" twine-position="1270,1690"><<if !$planet>>
	The wreck of the seedship drifts dead and inert in interstellar space.

<<else>>
	<<if $hiscore.score_landing > 0>>
		<<set _planet_name = $planet.name>>
	<<else>>
		<<set _planet_name = "The unnamed planet">>
	<</if>>
	/* Landscape */
	<<if $planet.water == "Planet-wide ocean">>
		<<switch $planet.gravity>>
			<<case "Very low">>_planet_name's ocean tosses with slow, kilometres-high waves, beneath
			<<case "Low">>_planet_name's ocean tosses with slow, tall waves, beneath
			<<case "Moderate">>_planet_name's ocean stretches to the horizon
			<<case "High">>_planet_name's calm ocean that stretches to the horizon
			<<case "Very high">>_planet_name's mirror-flat ocean beneath
			<<default>>@@.error;Unexpected gravity value $gravity.@@
		<</switch>>
	<<elseif $planet.surface_features.includes("Plant life")
			| $planet.surface_features.includes("Edible plants")
			| $planet.surface_features.includes("Poisonous plants")>>
		<<switch $planet.gravity>>
			<<case "Very low">>_planet_name's impossibly slender alien plants reach kilometres into
			<<case "Low">>_planet_name's tall alien plants reach hundreds of metres into
			<<case "Moderate">>_planet_name's alien forests stretch away beneath
			<<case "High">>_planet_name's squat, thick-limbed alien plants stretch away beneath
			<<case "Very high">>_planet_name's level fields of alien moss stretch away beneath
			<<default>>@@.error;Unexpected gravity value $gravity.@@
		<</switch>>
	<<elseif $planet.water == "Ice-covered surface">>
		<<switch $planet.gravity>>
			<<case "Very low">>
				<<if $planet.name>>
					Kilometres-high spires of ice reach from _planet_name's ice sheet into
				<<else>>
					Kilometres-high spires of ice reach from the unnamed planet's ice sheet into
				<</if>>
			<<case "Low">>
				<<if $planet.name>>
					Tall, jagged spires of ice reach from _planet_name's ice sheet into
				<<else>>
					Tall, jagged spires of ice reach from the unnamed planet's ice sheet into
				<</if>>
			<<case "Moderate">>_planet_name's landscape of jagged shards of ice stretches away beneath
			<<case "High">>_planet_name's crumpled plain of ice stretches away beneath
			<<case "Very high">>_planet_name's perfectly flat ice sheet stretches away beneath
			<<default>>@@.error;Unexpected gravity value $gravity.@@
		<</switch>>
	<<elseif $planet.atmosphere == "None">>
		<<switch $planet.gravity>>
			<<case "Very low">>_planet_name's jagged landscape of high crater walls and towering shards of rock stretches away beneath
			<<case "Low">>_planet_name's jagged, cratered landscape stretches away beneath
			<<case "Moderate">>_planet_name's perfectly still, cratered landscape stretches away beneath
			<<case "High">>_planet_name's perfectly still landscape, flat except for a few shallow craters, stretches away beneath
			<<case "Very high">>_planet_name's perfectly still, flat landscape stretches away beneath
			<<default>>@@.error;Unexpected gravity value $gravity.@@
		<</switch>>
	<<else>>
		<<switch $planet.gravity>>
			<<case "Very low">>_planet_name's landscape of spindly rock outcroppings and impossibly tall mountains stretches away beneath
			<<case "Low">>_planet_name's landscape of huge boulders and towering mountains stretches away beneath
			<<case "Moderate">>_planet_name's barren, rocky landscape stretches away beneath
			<<case "High">>_planet_name's flat, rocky landscape stretches away beneath
			<<case "Very high">>_planet_name's perfectly flat, barren landscape stretches away beneath
			<<default>>@@.error;Unexpected gravity value $gravity.@@
		<</switch>>
	<</if>>

	/* Sky (come back to this and add more) */
	<<switch $planet.atmosphere>>
		<<case "Breathable">>
			a blue sky.
		<<case "Marginal">>
			a pale blue sky.
		<<case "None">>
			a black, star-studded sky.
		<<case "Non-breathable">>
			an alien sky.
		<<case "Toxic">>
			a poisonous sky.
		<<case "Corrosive">>
			a sky filled with corrosive clouds.
		<<default>>
			@@.error;Unexpected atmosphere $planet.atmosphere@@
	<</switch>>

	<<if $hiscore.final_culture == -1>>
		<<if $hiscore.summary == "Crash">>
			The fragments of the crashed seedship
		<<else>>
			The ruins of the colony
		<</if>>

		<<if $planet.water == "Planet-wide ocean">>
			decay at the bottom of the planet-wide ocean.
		<<elseif $planet.water == "Ice-covered surface">>
			lie embedded in the planet-wide ice sheet.
		<<elseif $planet.surface_features.includes("Animal life")
				| $planet.surface_features.includes("Useful animals")
				| $planet.surface_features.includes("Dangerous animals")>>
			are overgrown with alien plants and overrun by alien animals.
		<<elseif $planet.surface_features.includes("Plant life")
				| $planet.surface_features.includes("Edible plants")
				| $planet.surface_features.includes("Poisonous plants")>>
			are overgrown with alien plants.
		<<else>>
			lie on the rocky surface.
		<</if>>

		<<if $hiscore.native_relations == 2>>
			The colonists' descendants live on as slaves to the intelligent natives, but they have lost all knowledge of Earth.
		<<elseif $hiscore.native_relations == 0>>
			Nearby stand monuments built by the planet's native inhabitants to celebrate their victory over the invaders.
		<<elseif $planet.surface_features.includes("Intelligent life")>>
			The planet's intelligent natives explore the ruins, but not enough remains for them to learn anything about the extinct human race.
		<</if>>

	<<else>>
		The colonists live in

		<<if $hiscore.final_tech_level > 2>>
			<<switch $planet.gravity>>
				<<case "Very low">>towering
				<<case "Low">>tall
				<<case "High">>squat
				<<case "Very high">>low, sprawling
			<</switch>>
		<</if>>

		<<switch $hiscore.final_tech_level>>
			<<case 10>>	high-tech cities
			<<case 9>>	cities of steel and glass
			<<case 8>>	cities of steel and concrete
			<<case 7>>	smog-filled Industrial cities
			<<case 6 5 4 3>>stone-walled cities
			<<case 2>>	farming villages
			<<case 1 0>>wandering hunter-gatherer tribes
			<<default>>@@.error;Unexpected final tech level $hiscore.final_tech_level@@
		<</switch>>

		<<if $planet.atmosphere == "Breathable"
				& $planet.temperature == "Moderate">>
			beneath the planet's open sky,
		<<elseif ($planet.atmosphere == "Breathable" | $planet.atmosphere == "Marginal")
				& ($planet.temperature == "Cold" | $planet.temperature == "Moderate" | $planet.temperature == "Hot")>>
			with buildings sealed against the planet's harsh environment,
		<<elseif $planet.surface_features.includes("Airtight caves") | $planet.surface_features.includes("Insulated caves") >>
			inside airtight caves,
		<<else>>
			under airtight domes,
		<</if>>

		<<switch $planet.water>>
			<<case "Planet-wide ocean">>
				on platforms floating on the planet-wide ocean.
			<<case "Ice-covered surface">>
				on top of the planet-wide ice sheet.
			<<case "None" "Trace">>
				gathered around water production plants.
			<<case "Ice caps">>
				by lakes of water melted from the planet's ice caps.
			<<case "Oceans">>
				beside rivers that flow into the planet's oceans.
			<<default>>
				@@.error;Unexpected water value $planet.water@@
		<</switch>>

		<<switch $culture_names[$hiscore.final_culture]>>
			<<case "Cosmic Enlightenment">>
				They live lives of peace and spiritual fulfilment beyond the dreams of their ancestors on Earth, guided by a combination of human and alien philosophy.

			<<case "Post-Scarcity Utopia">>
				They spend their time pursuing art, leisure, and spiritual fulfilment, while automatic machines take care of their material needs.
			<<case "Engaged Democracy">>
				They live happy and fulfilled lives under the guidance of selfless elected officials.
			<<case "Corrupt Democracy">>
				Poverty, exploitation and crime are rife, and the corrupt elected government does little to alleviate them.
			<<case "Rule by Corporations">>
				The cities are dominated by the headquarters of wealthy corporations that rule the population for their owners' enrichment.
			<<case "Dystopian Police State">>
				The streets are filled with security cameras and patrolled by armed police who violently put down any hint of dissent.
			<<case "Warring Superpowers">>
				The cities are surrounded by military bases and nuclear missile silos, and the population lives in fear of both the other nations' armies and their own nation's secret police.
			<<case "Post-Nuclear Wasteland">>
				The cities are in ruins, and the survivors of the nuclear war survive as best they can in the wreckage of human civilisation.

			<<case "Egalitarian Republic">>
				The cities are built around parliament buildings, where assemblies of citizens rule for the good of all.
			<<case "Benevolent Monarchy">>
				The cities are built around royal palaces, from which beloved monarchs rule the population wisely.
			<<case "Oppressive Theocracy">>
				The cities are dominated by temples to the state religion which controls every aspect of people's lives.
			<<case "Slave-Based Empire">>
				The cities are dominated by the palaces of the emperors, who live in luxury while the population toils to support them.
			<<case "Warring States">>
				The cities are dominated by barracks housing their vast armies, which regularly attack other cities.

			<<case "Collective Rule">>
				The tribes are ruled collectively by their members, and each member is afforded equal status.
			<<case "Benevolent Chieftains">>
				Each tribe is ruled by a chieftain, who guides the people as wisely as he or she is able.
			<<case "Brutal Chieftains">>
				Each tribe lives in fear of its brutal chieftain.
			<<case "Warring Tribes">>
				Much of the tribes' resources are devoted to fighting continual wars with one another.
			<<case "Savagery">>
				The people live like animals, having forgotten almost all of their language and culture.
			<<default>>
				@@.error;Unexpected final culture $hiscore.final_culture@@
		<</switch>>

		<<switch $native_relations_names[$hiscore.native_relations]>>
			<<case "Integrated Societies">>
				Many of the planet's native inhabitants live in the human communities, and the colonists' culture has been enriched by alien influences.
			<<case "Friendly">>
				Traders and diplomats from the planet's native nations are occasionally seen in the colonists' communities.
			<<case "Isolationism">>
				The colonists' culture mostly ignores the native inhabitants, who live in their own communities in other parts of the planet.
			<<case "Natives Enslaved">>
				Much of the labour in human communities is performed by a downtrodden alien slave caste that is all that remains of the planet's native civilisation.
			<<case "Genocide of Natives">>
				Ruins and mass graves are all that remains of the planet's native civilisation.
		<</switch>>

		In the
		<<if $culture_names[$hiscore.final_culture] == "Post-Nuclear Wasteland" | $hiscore.final_tech_level < 2>>
			ruins of the
		<</if>>
		first city
		<<set _journey_deaths = $max_colonists-$hiscore.score_landing>>
		<<set _construction_deaths = $hiscore.score_landing-$hiscore.score_construction>>
		<<if _journey_deaths > 0 & _construction_deaths > 0>>
			stand monuments to the _journey_deaths colonists who did not survive the journey,
			the _construction_deaths more who died building the first settlement, and
		<<elseif _journey_deaths > 0>>
			stand monuments to the _journey_deaths colonists who did not survive the journey and
		<<elseif _construction_deaths > 0>>
			stand monuments to the _construction_deaths colonists who died building the first settlement and
		<<else>>
			stands a monument to the
		<</if>>
		the seedship AI that guided humanity to its new home.
	<</if>>
<</if>>



</div></div><div tiddler="Intro systems check" tags="" created="201703061900" modifier="twee" twine-position="850,430">Any damage or malfunctions during the journey should have woken the AI from its hibernation, but it is still anxious as it runs its self-diagnostic programs. The sleep capsules are all functioning, the colonists within them alive, or at least capable of being revived from their frozen stasis. Sensors functioning; surface probes responding. Landing and construction systems ready for the one time they will be used. Scientific and cultural databases intact, safely storing all that remains of humanity's knowledge and art.

[[Scan planet|Generate planet]]
<<nobr>><div class="skip-intro-link">
	[[Skip intro|Generate planet]]
</div><</nobr>></div><div tiddler="Refresh Status Display macro" tags="widget nobr" created="201709281426" modifier="twee" twine-position="150,430"><<widget refreshStatusDisplay>>
	<<script>>
		setPageElement("status-display", "Status Display");
	<</script>>
<</widget>></div><div tiddler="FC First Impression" tags="nobr" created="201703061900" modifier="twee" twine-position="430,1550"><<set _possible_names = []>>
<<set _backup_names = ["This World"]>>

<<if $planet.atmosphere == "Breathable"
	& $planet.temperature == "Moderate"
	& $planet.gravity == "Moderate"
	& $planet.water == "Oceans"
	& $planet.resources == "Rich">>
	<<set _possible_names.push("Eden")>>
	<<set _possible_names.push("Paradise")>>
	<<set _possible_names.push("Terra Nova")>>
	<<set _possible_names.push("New Earth")>>
<<else>>

	<<if $planet.temperature == "Very hot">>
		<<set _possible_names.push("Inferno")>>
	<<elseif $planet.temperature == "Hot">>
		<<set _backup_names.push("Inferno")>>
	<<elseif $planet.temperature == "Very cold">>
		<<set _possible_names.push("Arctica")>>
	<<elseif $planet.temperature == "Cold">>
		<<set _backup_names.push("Arctica")>>
	<</if>>

	<<if $planet.gravity == "Very high" & $planet.water != "Planet-wide ocean">>
		<<set _possible_names.push("Cueball")>>
	<<elseif $planet.gravity == "High" & $planet.water != "Planet-wide ocean">>
		<<set _backup_names.push("Cueball")>>
	<<elseif $planet.gravity == "Very low" & $planet.water != "Planet-wide ocean">>
		<<set _possible_names.push("Crag")>>
	<<elseif $planet.gravity == "Low" & $planet.water != "Planet-wide ocean">>
		<<set _backup_names.push("Crag")>>
	<</if>>

	<<if $planet.water == "Planet-wide ocean">>
		<<set _possible_names.push("Atlantis")>>
		<<set _possible_names.push("Oceanus")>>
	<<elseif $planet.water == "Ice-covered surface">>
		<<set _possible_names.push("Snowball")>>
		<<set _possible_names.push("Iceball")>>
	<<elseif $planet.water == "Trace" | $planet.water == "None">>
		<<set _possible_names.push("Arid")>>
		<<set _possible_names.push("Desert")>>
	<</if>>

	<<if $planet.resources == "Rich">>
		<<set _possible_names.push("Bounty")>>
		<<set _possible_names.push("El Dorado")>>
	<</if>>

	<<if $planet.surface_features.includes("Plant life") | $planet.surface_features.includes("Edible plants") | $planet.surface_features.includes("Poisonous plants")>>
		<<set _possible_names.push("Garden")>>
		<<set _possible_names.push("Arcadia")>>
	<</if>>

	<<if $planet.surface_features.includes("Airtight caves") | $planet.surface_features.includes("Insulated caves")>>
		<<set _possible_names.push("Warren")>>
		<<set _possible_names.push("Honeycomb")>>
	<</if>>

<</if>>


/* Pick a name */
<<if _possible_names.length == 0>>
	<<set _possible_names = _backup_names>>
<</if>>
<<set $planet.name = either(_possible_names)>>

/* Now the first impression text */
<<if $colonists >= $max_colonists>>
	The colonists
<<elseif $colonists >= $max_colonists/2>>
	The surviving colonists
<<elseif $colonists >= 0>>
	The few surviving colonists
<</if>>

wake from their sleep chambers and survey their new home.

/* Landscape */
<<if $planet.water == "Planet-wide ocean">>
	<<switch $planet.gravity>>
		<<case "Very low">>The seedship tosses on an ocean of slow, kilometres-high waves, beneath
		<<case "Low">>The seedship rocks on the surface of an ocean of slow, tall waves, beneath
		<<case "Moderate">>The ship floats on the surface of an ocean that stretches to the horizon
		<<case "High">>The ship floats on the surface of a calm ocean that stretches to the horizon
		<<case "Very high">>The ship rests on the surface of a mirror-flat ocean beneath
		<<default>>@@.error;Unexpected gravity value $gravity.@@
	<</switch>>
<<elseif $planet.surface_features.includes("Plant life")
		| $planet.surface_features.includes("Edible plants")
		| $planet.surface_features.includes("Poisonous plants")>>
	<<switch $planet.gravity>>
		<<case "Very low">>Forests of impossibly slender alien plants reach kilometres into
		<<case "Low">>Forests of tall alien plants reach hundreds of metres into
		<<case "Moderate">>Forests of alien vegetation stretch away beneath
		<<case "High">>Fields of squat, thick-limbed alien plants stretch away beneath
		<<case "Very high">>Level fields of alien moss stretch away beneath
		<<default>>@@.error;Unexpected gravity value $gravity.@@
	<</switch>>
<<elseif $planet.water == "Ice-covered surface">>
	<<switch $planet.gravity>>
		<<case "Very low">>Kilometres-high spires of ice reach into
		<<case "Low">>Tall, jagged spires of ice reach into
		<<case "Moderate">>Jagged shards of ice stretch away beneath
		<<case "High">>A crumpled plain of ice stretches away beneath
		<<case "Very high">>A perfectly flat plain of ice stretches away beneath
		<<default>>@@.error;Unexpected gravity value $gravity.@@
	<</switch>>
<<elseif $planet.atmosphere == "None">>
	<<switch $planet.gravity>>
		<<case "Very low">>A jagged landscape of high crater walls and towering shards of rock stretches away beneath
		<<case "Low">>A jagged, cratered landscape stretches away beneath
		<<case "Moderate">>A perfectly still, cratered landscape stretches away beneath
		<<case "High">>A perfectly still landscape, flat except for a few shallow craters, stretches away beneath
		<<case "Very high">>A perfectly still, flat landscape stretches away beneath
		<<default>>@@.error;Unexpected gravity value $gravity.@@
	<</switch>>
<<else>>
	<<switch $planet.gravity>>
		<<case "Very low">>A landscape of spindly rock outcroppings and impossibly tall mountains stretches away beneath
		<<case "Low">>A landscape of huge boulders and towering mountains stretches away beneath
		<<case "Moderate">>A barren, rocky landscape stretches away beneath
		<<case "High">>A flat, rocky landscape stretches away beneath
		<<case "Very high">>A perfectly flat, barren landscape stretches away beneath
		<<default>>@@.error;Unexpected gravity value $gravity.@@
	<</switch>>
<</if>>

/* Sky (come back to this and add more) */
<<switch $planet.atmosphere>>
	<<case "Breathable">>
		a blue sky.
	<<case "Marginal">>
		a pale blue sky.
	<<case "None">>
		a black, star-studded sky.
	<<case "Non-breathable">>
		an alien sky.
	<<case "Toxic">>
		a poisonous sky.
	<<case "Corrosive">>
		a sky filled with corrosive clouds.
	<<default>>
		@@.error;Unexpected atmosphere $planet.atmosphere@@
<</switch>>

<<if $colonists < $max_colonists>>
	They build a memorial to the <<print $max_colonists-$colonists>> colonists who did not survive the journey, and
<<else>>
	They
<</if>>

name their new world

<span id="name" class="inline-link">
<<link $planet.name>>
	<<script>>
		$('#name').hide();
		$('#name-dialog').show();
	<</script>>
<</link>>,

<<switch $planet.name>>
	<<case "Inferno">>because of its extreme heat.
	<<case "Arctica">>because of its extreme cold.
	<<case "Cueball">>because its high gravity makes its horizon completely flat.
	<<case "Crag">>because its low gravity means it has many high, craggy mountains.
	<<case "Atlantis" "Oceanus">>because all its land is sunk beneath its planet-wide ocean.
	<<case "Snowball" "Iceball">>because its surface is entirely covered in ice.
	<<case "Arid" "Desert">>because of its lack of water.
	<<case "Arcadia" "Garden">>because of its lush plant life.
	<<case "Warren" "Honeycomb">>because of the extensive cave system riddling its crust.
	<<case "Bounty" "El Dorado">>because of its plentiful mineral resources.
	<<case "Eden" "Paradise">>because of its perfect conditions.
	<<case "New Earth" "Terra Nova">>because it resembles the Earth they left behind.
	<<case "This World">>because it is this world.

	<<default>>@@.error;Unexpected planet name $planet.name@@
<</switch>>
</span>

<span id="name-dialog" style="display:none">
	<<textbox "$planet.name" $planet.name autofocus>>

	<span id="enterAct"><<link "Done">>
		<<replace "#name">>
			<<link $planet.name>>
				<<script>>
					$('#name').hide();
					$('#name-dialog').show();
				<</script>>
			<</link>>.
		<</replace>>
		<<replace "#planet-stats">><<displayPlanet true false>><</replace>>
		<<script>>
			$('#name').show();
			$('#name-dialog').hide();
		<</script>>
	<</link>></span>
</span>

<<script>>
(function(){
	$(document).keyup(function(e){
		if(e.keyCode == 13){
				/* Enter */
			$('#enterAct a').trigger("click");
		}
	});
}());
<</script>>


/* Update planet stats because it now has a name. */
<<replace "#planet-stats">><<displayPlanet true false>><</replace>>

<br><br><<FCNextPassage [[FC Construction]]>>

</div><div tiddler="Random System" tags="widget nobr" created="201703061900" modifier="twee" twine-position="150,1130"><<widget randomSystem>>
	<<set $system = either($system_names)>>
<</widget>>

/* randomSystemExcluding */
/* Each argument should be either a system name or the word "destroyed". */
/* Will return a random system from a list excluding the system names in the arguments. */
/* If one argument is "destroyed", will also exclude destroyed systems. */
<<widget randomSystemExcluding>>
	<<set _allowed_systems = []>>
	<<for $n = 0; $n < $system_names.length; $n++>>
		<<set _this_system = $system_names[$n]>>
		<<if !$args.includes(_this_system) >>
			<<getSystemStrength _this_system>>
			<<if $system_strength > 0 | !$args.includes("destroyed")>>
				<<set _allowed_systems.push(_this_system)>>
			<</if>>
		<</if>>
	<</for>>
	<<if _allowed_systems.length == 0>>
		<<set $system = "">>
	<<else>>
		<<set $system = either(_allowed_systems)>>
	<</if>>
<</widget>>

/* randomIntactSystemFrom */
/* Returns a random system from the given list, choosing between only those systems that are not destroyed */
<<widget randomIntactSystemFrom>>
	<<set _allowed_systems = []>>
	<<for $n = 0; $n < $args.length; $n++>>
		<<set _this_system = $args[$n]>>
		<<getSystemStrength _this_system>>
		<<if $system_strength > 0>>
			<<set _allowed_systems.push(_this_system)>>
		<</if>>
	<</for>>
	<<set $system = either(_allowed_systems)>>
<</widget>>
</div><div tiddler="Surface probe" tags="" created="201703061900" modifier="twee" twine-position="850,990"><<silently>>
	<<set $surface_probe_used = true>>
	<<set $surface_probes -= 1>>
	<<replace "#planet-stats">><<displayPlanet true false>><</replace>>
	<<refreshStatusDisplay>>
	<<set $surface_probe_current_feature = 0>>\s
	<<replace "#anomalies_title_text">>Surface features:<</replace>>\s
	<<replace "#anomalies_text">><</replace>>\s

<</silently>>\s
<<nobr>>

	The surface probe's sensors

	<<if  $scanner_atmosphere_success
		& $scanner_gravity_success
		& $scanner_temperature_success
		& $scanner_resources_success
		& $scanner_water_success>>
		confirm the readings of the ship's orbital scanners.
	<<else>>
		fill the gaps in the data the ship could gather from orbit.
	<</if>>

	<<set $scanner_atmosphere_success = true>>
	<<set $scanner_gravity_success = true>>
	<<set $scanner_temperature_success = true>>
	<<set $scanner_resources_success = true>>
	<<set $scanner_water_success = true>>

<</nobr>>

<<link $continue_text>><<replaceAndFadeIn "#post-planet-stats" [[SP Feature]]>><</link>>
</div><div tiddler="DEBUG edit ship" tags="" created="201703061900" modifier="twee" twine-position="150,290">DEBUG: Edit ship stats

Colonists: <<textbox "$colonists" $colonists>>/$max_colonists

Atmosphere scanner: <<textbox "$scanner_atmosphere" $scanner_atmosphere>>/100, level <<textbox "$scanner_atmosphere_level" $scanner_atmosphere_level>>/2
Gravity scanner: <<textbox "$scanner_gravity" $scanner_gravity>>/100, level <<textbox "$scanner_gravity_level" $scanner_gravity_level>>/2
Temperature scanner: <<textbox "$scanner_temperature" $scanner_temperature>>/100, level <<textbox "$scanner_temperature_level" $scanner_temperature_level>>/2
Water scanner: <<textbox "$scanner_water" $scanner_water>>/100, level <<textbox "$scanner_water_level" $scanner_water_level>>/2
Resources scanner: <<textbox "$scanner_resources" $scanner_resources>>/100, level <<textbox "$scanner_resources_level" $scanner_resources_level>>/2
Surface probes: <<textbox "$surface_probes" $surface_probes>>/5

Landing system: <<textbox "$system_landing" $system_landing>>/100
Constructors: <<textbox "$system_constructors" $system_constructors>>/100

Cultural database: <<textbox "$system_cultural_database" $system_cultural_database>>/100
Scientific database: <<textbox "$system_scientific_database" $system_scientific_database>>/100


<<nobr>><<linkreplace "Done">>
	<<set $colonists = Number($colonists)>>
	<<set $scanner_atmosphere = Number($scanner_atmosphere)>>
	<<set $scanner_gravity = Number($scanner_gravity)>>
	<<set $scanner_temperature = Number($scanner_temperature)>>
	<<set $scanner_water = Number($scanner_water)>>
	<<set $scanner_resources = Number($scanner_resources)>>
	<<set $surface_probes = Number($surface_probes)>>

	<<set $system_landing = Number($system_landing)>>
	<<set $system_constructors = Number($system_constructors)>>

	<<set $system_cultural_database = Number($system_cultural_database)>>
	<<set $system_scientific_database = Number($system_scientific_database)>>

	Numbers processed.

	<<return "Click here">>
<</linkreplace>><</nobr>>



</div><div tiddler="MO Probe Malfunction" tags="nobr" created="201703061900" modifier="twee" twine-position="2390,850"><<if $surface_probes <= 0>>
	The clamps that once held the surface probes to the seedship's side twitch as their control system malfunctions, but with all the probes gone the malfunction can do no harm.
	<br><br><<continueLink [[MO Done]]>>
<<else>>
	<<if visited() == 1>>
		Deep in the interstellar void, the AI is jolted awake by a malfunction warning: one of the surface probes has activated unexpectedly. Perhaps a chance encounter with cosmic radiation tripped something in its electronics, or perhaps a flaw in its manufacture finally manifested itself. Whatever the reason, at any moment the probe's drill or engines could come to life. If this happens while the probe is still docked with the ship, it is likely to damage one of the other systems.
	<<else>>
		Another of the ageing surface probes malfunctions. The AI must decide whether to jettison it, or try to control it and risk letting it damage another system.
	<</if>>

	<br><br>
	<div id="result-area">
	<<link "Attempt to bring the probe under control">>
		<<if random(0,1) == 0>>
			<<replace "#result-area">>
				The ship's circuits light up with frantic commands from the AI to the probe. After thousands of AI cycles--a fraction of a second in real time--the AI identifies and corrects the problem in the probe's programming. The probe shuts down, awaiting the time when it will be of use.

				<br><br><<link $continue_text>><<goto [[MO Done]]>><</link>>
			<</replace>>
			<<fadeIn "#result-area">>
		<<else>>
			<<randomSystemExcluding "surface probes">>
			<<if $system == "sleep chambers">>
				<<killColonistsMedium>>
				<<refreshStatusDisplay>>
				<<replace "#result-area">>
					The rogue probe tears into the sleep chambers, drilling into capsule after capsule and happily transmitting that it has detected organic material as the colonist inside dies. At last the AI finds the command to shut it down, but not before $deaths colonists have been killed.

					<br><br><<continueLink [[MO Done]]>>
				<</replace>>
				<<fadeIn "#result-area">>
			<<else>>
				<<randomDamageMedium>>
				<<damageSystem $system $damage>>
				<<refreshStatusDisplay>>
				<<replace "#result-area">>
					The rogue probe tears into the $system, badly damaging it before the AI finds the command to shut it down.

					<br><br><<continueLink [[MO Done]]>>
				<</replace>>
				<<fadeIn "#result-area">>
			<</if>>
		<</if>>
	<</link>>
	<br>
	<<link "Jettison the probe">>
		<<set $surface_probes -= 1>>
		<<refreshStatusDisplay>>
		<<replace "#result-area">>
			The surface probe streaks away into the darkness, sensors bristling as it tries to scan a planet where there is none.

			<br><br><<link $continue_text>><<goto [[MO Done]]>><</link>>
		<</replace>>
		<<fadeIn "#result-area">>
	<</link>></div>
<</if>></div><div tiddler="Move on" tags="nobr" created="201703061900" modifier="twee" twine-position="1410,850">/* Random encounter chances */
/* Initial: 2/10 uneventful, 7/10 common, 1/10 rare */
/* Final: 5/10 malfunction, 4/10 common, 1/10 rare */

<<unset $planet>>
<<unset $off_course>>

<<set _malfunction_chance = Math.min(visited()-5, 5)>>

<<set _encounter = $last_encounter>>
<<for _n = 0; $last_encounter == _encounter; _n++>>
	<<set _r = random(0,9)>>
	<<if _r < _malfunction_chance>>
			/* MALFUNCTIONS */
		<<set _encounter = either($MO_encounters_malfunction)>>
		<<set $last_encounter_category = "Malfunction">>
	<<elseif _r < 2 & $MO_encounters_uneventful.length > 0 & $last_encounter_category != "Uneventful">>
			/* NOTHING INTERESTING HAPPENS - once each per playthrough */
		<<set _r2 = random(0,($MO_encounters_uneventful.length)-1)>>
		<<set _encounter = $MO_encounters_uneventful[_r2]>>
		<<set $MO_encounters_uneventful.splice(_r2,1)>>
		<<set $last_encounter_category = "Uneventful">>
	<<elseif visited() < 3>>
			/* FIRST TWO EVENTS */
		<<set _encounter = either($MO_encounters_first_two)>>
		<<set $last_encounter_category = "Common">>
	<<elseif _r == 9 & $MO_encounters_rare.length > 0 & $last_encounter_category != "Rare">>
			/* RARE EVENTS - once each per playthrough */
		<<set _r2 = random(0,($MO_encounters_rare.length)-1)>>
		<<set _encounter = $MO_encounters_rare[_r2]>>
		<<set $MO_encounters_rare.splice(_r2,1)>>
		<<set $last_encounter_category = "Rare">>
	<<else>>
			/* COMMON EVENTS */
		<<set _encounter = either($MO_encounters_common)>>
		<<set $last_encounter_category = "Common">>
	<</if>>
<</for>>
<<set $last_encounter = _encounter>>

<<if visited() == 1>>
	The AI judges the first planet to be unsuitable. It turns its scanners away, spreads its solar sails, and begins another long journey through the void.

	<br><br><<continueLink _encounter>>
<<else>>
	<<goto _encounter>>
<</if>>
</div><div tiddler="Stylesheet" tags="stylesheet" created="201703061900" modifier="twee" twine-position="10,150">/* Small-screen (mobile) formatting is default. Then changed for big screens. */

.debug-text {
	/* Un-comment display:none for release */
	display: none;
	padding: 0.25em;
	background-color: #003300;
	border-left: 0.5em solid #00FF00;
}


/* Small screens: status bar at the top with 80% text size, planet scan in one vertical table */
#status-display {
	box-sizing: border-box;
	background-color: #111;
	border: solid 1px #333;
	position: fixed;
	left: 0;
	top: 0;
	width: 100%;
	height: 8em;
	padding: 0.5em 0.5em 0em 0.5em;	/* Top, right, bottom, left */
}

.status-display-colonists {
	display: block;
	box-sizing: border-box;
	width: 98%;
	margin-bottom: 0.5em;
}

.status-display-block {
	display: inline-block;
	vertical-align: top;
	box-sizing: border-box;
	width: 49%;
}

#status-display table {
	font-size: 0.7em;
	width: 100%;
}

#status-display td {
	padding-bottom: 0.2em;
	text-align: left;
}

.status-display-number-column {
	width: 2em;
}

.status-display-change-column {
	width: 2em;
}

#passages {
	margin: 8em 0em 0em 0em;	/* Top, right, bottom, left */
	padding: 1em 0.5em;
	font-size: 0.9em;
}

.front-matter #passages {
	margin: 0em 0em 0em 0em;	/* Top, right, bottom, left */
}

.skip-intro-link {
	position:fixed;
	bottom: 20px;
	right: 30px;
	font-size: 75%;
	background-color: #000;
}

.skip-intro-link a {
	font-size: 1.0em;
}

#sidebar-status-display td {
	padding: 0.3em 0;
}

.planet-display-table-area {
	display: block;
	width: 100%;
	text-align: center;
}

.planet-display-table-section {
	display: block;
	vertical-align: top;
	width: 100%;
	margin: 0em;
	text-align: left;
	/*min-width: 12em;*/
}

.planet-display-table-section table {
	width: 100%;
}

.main-loop-links {
	width: 100%;
	text-align: center;
}

.main-loop-links a {
	font-size: initial;	/* Full size font regardless of screen size, to make links easily clickable */
	display: inline-block;
	width: 40%;
	padding: 0.1em 0.2em;
	margin-bottom: 0.5em;
}

a {
	display: inline-block;
	border: solid 1px #8af;
	background-color: #001;
	padding: 0.1em 0.2em;
	margin-bottom: 0.5em;
}

.disabled-hiscore-link {
	display: inline-block;
	border: solid 1px grey;
	color: grey;
	background-color: #050505;
	padding: 0.1em 0.2em;
	margin-bottom: 0.5em;
}

.surface-probe-link {
	font-size: 0.8em;
}

.main-loop-link-spacer {
	display: none;
}

.inline-link {
	padding: initial;
	margin-bottom: initial;
}

.inline-link a {
	padding: initial;
	margin-bottom: initial;
}

.score-table {
	width: 100%;
}

.score-table td {
	font-size: 0.8em;
}

.hiscore-table {
	width: 100%;
}

.hiscore-table td {
	font-size: 0.8em;
}

#title-screen-block {
	text-align:center;
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
}


/* Medium screens: status bar at the left with 80% text size, planet scan in one vertical table */
@media screen and (min-width: 30em) {
	#status-display {
		width: 12em;
		height: 100%;
		padding-top: 0.5em;
		padding-bottom: 0em;
		padding-left: 0.5em;
		padding-right: 0.5em;
	}

	#status-display table {
		font-size: 0.8em;
	}

	.status-display-block {
		display: block;
		width: 100%;
		margin-bottom: 1em;
	}

	.status-display-colonists {
		display: block;
		width: 100%;
		margin-bottom: 1em;
	}

	#passages {
		margin: 0em 0em 0em 12em;	/* Top, right, bottom, left. */
		padding-top: 1em;
		padding-bottom: 1em;
		padding-left: 4em;
		padding-right: 4em;
	}


	.score-table {
		width: 90%;
	}

	.score-table td {
		font-size: initial;
	}

	.hiscore-table td {
		font-size: initial;
	}

	/* Big screens: status bar at the left with 100% text size, planet scan in two side-by-side tables */
	@media screen and (min-width: 50em) {
		#status-display {
			width: 17.5em;
			height: 100%;
			padding-left: 1.5em;
		}

		#passages {
			margin: 0em 0em 0em 17.5em;	/* Top, right, bottom, left. */
			font-size: 1.0em;
		}

		.planet-display-table-section {
			display: inline-block;
			vertical-align: top;
			width: 48%;
			box-sizing: border-box;
		}

		/* Normal link appearance, not buttons */
		.main-loop-links {
			width: auto;
			text-align: left;
		}

		.main-loop-links a {
			width: auto;
		}

		a {
			font-size: initial;	/* Full size font regardless of screen size, to make links easily clickable */
			display: initial;
			border: initial;
			padding: initial;
			margin-bottom: initial;
			background-color: initial;
		}

		.disabled-hiscore-link {
			font-size: initial;	/* Full size font regardless of screen size, to make links easily clickable */
			display: initial;
			border: initial;
			padding: initial;
			margin-bottom: initial;
			background-color: initial;
			color: grey;
		}

		.main-loop-link-spacer {
			display: initial;
		}

	}

	/* Tall enough screens: add padding to passages and status display. */
	@media screen and (min-height: 20em) {
		#status-display {
			padding-top: 4em;
		}

		#passages {
			padding-top: 4em;
			padding-bottom: 4em;
		}
	}

	/* Tall screens: space out lines in status display if there's enough space for it. */
	@media screen and (min-height: 30em) {
		#status-display td {
			padding-bottom: 0.5em;
		}

		/* Status bar has full size text only if screen is wide and tall. */
		@media screen and (min-width: 50em) {
			#status-display table {
				font-size: 1.0em;
			}
		}
	}
}



body {
	background-color: #000;
}


.credits-small-text {
	font-size: 0.75em;
}

.credits-small-text a {
	font-size: 1.0em;
}


#title, #menu, #ui-bar-tray {
	display: none;
}

.passage table {
	margin: 0em 0;
	border-collapse: collapse;
	font-size: 100%;
}
.passage tr, .passage th, .passage td, .passage caption {
	padding: 0px 5px;
	vertical-align: top;
}

a:hover {
	color: #8af;
	text-decoration: none;
	text-shadow: 0px 0px 5px #8af;
}

h1 {
	text-shadow: 0px 0px 50px #8af;
}

.scanning {
	color: grey;
}

.good {
	color: lime;
}

.mediocre {
	color: yellow;
}

.bad {
	color: red;
}

.destroyed {
	color: darkred;
}

.continue-text {
	font-weight: bold;
}

.placeholder {
	padding: 0.25em;
	background-color: #003333;
	border-left: 0.5em solid #00FF00;
}

.fade-in {
	transition: opacity 400ms ease-in;
}

#passages a.link-external:after {
	content: normal;
}


.keyhint {
	display: none;
	color: grey;
}




/* Style all font awesome icons */
.fa {
	padding: 0.55em 0.5em 0.45em;
	width: 1em;
	height: 1em;
	text-align: center;
	text-decoration: none;
	margin: 5px 2px;
	border-radius: 50%;
    color: white;
	background: #404040;
	border: none;
}

/* Add a hover effect if you want */
.fa:hover {
	color: white;
	text-decoration: none;
}

.fa-facebook:hover {
    background: #3B5998;
}

.fa-twitter:hover {
    background: #55ACEE;
}

.fa-wordpress:hover {
    background: #0087be;
}

.fa-patreon:hover {
    background: #e6461a;
}

.fa-home:hover {
    background: green;
}


.starfield {
    -webkit-user-select: none; /* Chrome, Opera, Safari */
    -moz-user-select: none; /* Firefox 2+ */
    -ms-user-select: none; /* IE 10+ */
    user-select: none; /* Standard syntax */
	overflow:hidden;
	cursor:default;
	z-index:-10;
}

.title-screen-patreon-button {
	position: absolute;
	bottom: 20px;
	left: 20px;
	opacity: 0.15;
	width: 100px;
	max-width: 25%;
	height: auto;
}

.title-screen-patreon-button img {
	width: 100%;
	height: auto;
}

.title-screen-patreon-button:hover {
	opacity: 0.3;
}

.title-screen-patreon-button a {
	border: 0px none transparent;
}


.title-screen-app-store-area {
	position: absolute;
	bottom: 20px;
	right: 20px;
	width: 150px;
	max-width: 25%;
	height: auto;
	text-align: center;
}

/* Google play image has padding in the image, whereas the app store one has to have it added in css */
#google-play-image {
	width: 150px;
	max-width: 100%;
	height: auto;
	box-sizing: border-box;
}

#app-store-image {
	width: 150px;
	max-width: 100%;
	height: auto;
	box-sizing: border-box;
	padding: 0% 6.5%;
}

.title-screen-app-store-area a {
	border: none;
	background-color: transparent;
	padding: 0em;
	margin-bottom: 0em;
}

.title-screen-version-number {
	text-align:center;
	position: absolute;
	top: 5px;
	right: 5px;
	font-size: 60%;
	opacity: 0.15;
}


.end-game-patreon-button {
	display: inline-block;
	vertical-align: -32%;
	opacity: 0.5;
	width: 80px;
	height: auto;
}

.end-game-patreon-button img {
	width: 100%;
	height: auto;
}

.end-game-patreon-button a {
	border: 0px none transparent;
}

.end-game-patreon-button:hover {
	opacity: 1.0;
}



/* Dark-on-light style -- toggleable from options */
.dark-on-light {
	color: #000000;
}

.dark-on-light body {
	background: #FFFFFF;
}

.dark-on-light #status-display {
	background-color: #CCC;
	border: solid 1px #333;
}

.dark-on-light a {
	color: #000099;
	background: none;
}

.dark-on-light .disabled-hiscore-link {
	background: none;
}

.dark-on-light .scanning {
	color: grey;
}

.dark-on-light .good {
	color: #009900;
	/*color: #000;
	background: lime;*/
}

.dark-on-light .mediocre {
	color: #333300;
	/*color: #000;
	background: yellow;*/
}

.dark-on-light .bad {
	color: #990000;
	/*color: #000;
	background: tomato;*/
}

.dark-on-light .destroyed {
	color: #993333;
	/*color: #000;
	background: red;*/
}

.title-screen-toggle-dol {
	display: none;
}

.dark-on-light .title-screen-toggle-dol {
	display: initial;
}

.title-screen-toggle-lod {
	display: initial;
}

.dark-on-light .title-screen-toggle-lod {
	display: none;
}

.dark-on-light .fa {
    color: white;
	background: #404040;
}


.dark-on-light .fa-facebook:hover {
    background: #3B5998;
}

.dark-on-light .fa-twitter:hover {
    background: #55ACEE;
}

.dark-on-light .fa-wordpress:hover {
    background: #0087be;
}

.dark-on-light .fa-patreon:hover {
    background: #e6461a;
}

.dark-on-light .fa-home:hover {
    background: green;
}


.dark-on-light .skip-intro-link {
	background-color: #FFF;
}

.dark-on-light .title-screen-patreon-button img {
	background: #000;
	padding: 0.1em;
}

.dark-on-light .title-screen-patreon-button {
	opacity: 0.75;
}

.dark-on-light .title-screen-patreon-button:hover {
	opacity: 1.0;
}

.dark-on-light .end-game-patreon-button img {
	background: #000;
	padding: 0.1em;
}

.dark-on-light .end-game-patreon-button {
	opacity: 0.75;
}

.dark-on-light .end-game-patreon-button:hover {
	opacity: 1.0;
}


.dark-on-light h1 {
	text-shadow: 0px 0px 50px #000;
}
</div><div tiddler="FC Next Passage" tags="widget nobr" created="201703061900" modifier="twee" twine-position="290,1830"><<widget FCNextPassage>>
	<<if $colonists <= 0>>
		<span id="spaceAct"><<link "$continue_text">>
			<<replaceAndFadeIn "#post-planet-stats" [[FC Done]]>>
		<</link>></span>
	<<else>>
		<span id="spaceAct"><<link "$continue_text">>
			<<replaceAndFadeIn "#post-planet-stats" $args[0]>>
		<</link>></span>
	<</if>>
	<<refreshStatusDisplay>>

	<<scrollToPostPlanetStats>>

<</widget>>

</div><div tiddler="MO Alien Derelict" tags="nobr" created="201703061900" modifier="twee" twine-position="1970,1410">As it scans the new system, the seedship notices that what looked like a metallic asteroid has a complex structure that shows it was built by intelligent beings. No energy readings emanate from it, and it bears the scars of millions of years of micrometeorite impacts, but it might still contain alien scientific or cultural artefacts.

<<if $surface_probes <= 0>>
	Without any surface probes, however, the seedship has no way of investigating it.
<</if>>

<br><br>

<div id="result-area">
<<if $surface_probes > 0>><<link "Launch a surface probe to investigate">>
	<<replace "#result-area">>
		<<set $surface_probes -= 1>>
		The probe enters the derelict through a hole that an ancient impact tore in its hull,
		<<switch random(0,7)>>
			<<case 0>>
				<<set $system_cultural_database += random(5,25)>>
				<<set $system_scientific_database += random(5,25)>>
				and transmits back intriguing images of alien machinery and artworks. The AI adds the images to the scientific and cultural databases, for the colonists to study once they have set up their colony.
			<<case 1 2>>
				<<set $system_scientific_database += random(5,25)>>
				and transmits back intriguing images of alien machinery. The AI adds the images to the scientific database, for the colonists to study once they have set up their colony.
			<<case 3 4>>
				<<set $system_cultural_database += random(5,25)>>
				and transmits back intriguing images of alien artworks. The AI adds the images to the cultural database, for the colonists to study once they have set up their colony.
			<<case 5 6 7>>
				but finds that it is too badly damaged to reveal anything about its builders.
		<</switch>>

		<br><br><<link $continue_text>><<goto [[MO Done]]>><</link>>
	<</replace>>
	<<fadeIn "#result-area">>
	<<refreshStatusDisplay>>
<</link>><br><</if>>

<<link "Ignore the derelict">>
	<<replace "#result-area">>
		The seedship ignores the derelict and passes by towards the inner system.

		<br><br><<link $continue_text>><<goto [[MO Done]]>><</link>>
	<</replace>>
	<<fadeIn "#result-area">>
<</link>></div>
</div><div tiddler="MO Trailing Drone Real" tags="nobr" created="201703061900" modifier="twee" twine-position="2110,1130"><<set _droneType = either("data", "repair")>>
<<set _droneHealth = random(1,100)>>

The seedship tracks the signal to a small object orbiting in star's outer cometary cloud. The seedship AI transmits a greeting, and the object identifies itself as a support drone, launched after the seedship and sent to track and rendezvous with it.

<<switch _droneType>>
	<<case "data">>
		It claims to carry duplicates of the seedship's original scientific and cultural databases to repair any damage the seedship might have suffered.
		<<set _acceptText = "Accept data transfer">>
	<<case "repair">>
		It claims to carry a swarm of robots that can repair damage to the seedship's scanners and systems.
		<<set _acceptText = "Accept repairs">>
<</switch>>

<<if _droneHealth < 25>>
	The drone is barely functioning.
<<elseif _droneHealth < 50>>
	The drone is severely damaged.
<<elseif _droneHealth < 75>>
	The drone is visibly damaged.
<<else>>
	The drone bears pockmarks from micrometeorite impacts but is otherwise intact.
<</if>>

<br><br>

<div id="result-area2">
<<link _acceptText>>
	<<replace "#result-area2">>
		<<if random(0,75) >= _droneHealth>>
			/* Malfunction */
			<<randomSystemExcluding "destroyed">>
			<<randomDamageMedium>>
			<<damageSystem $system $damage>>
			The two robot ships attempt to rendezvous, but the drone's damaged guidance system malfunctions and it collides with the seedship's $system.
		<<elseif _droneType == "data">>
			<<set _repairAmount = Math.ceil(_droneHealth/2 + 50)>>	/* 50-100 */
			The probe matches course with the seedship and transmits its data,
			<<if $system_scientific_database >= 100 & $system_cultural_database >= 100>>
				which confirms that the scientific and cultural databases are already intact.
			<<elseif $system_scientific_database >= 100>>
				<<set $system_cultural_database = Math.min(100, $system_cultural_database + _repairAmount)>>
				which restores lost parts of the cultural database.
			<<elseif $system_cultural_database >= 100>>
				<<set $system_scientific_database = Math.min(100, $system_scientific_database + _repairAmount)>>
				which restores lost parts of the scientific database.
			<<else>>
				<<set $system_cultural_database = Math.min(100, $system_cultural_database + _repairAmount)>>
				<<set $system_scientific_database = Math.min(100, $system_scientific_database + _repairAmount)>>
				which restores lost parts of the scientific and cultural databases.
			<</if>>
		<<elseif _droneType == "repair">>
			<<if $scanner_atmosphere >= 100
				& $scanner_temperature >= 100
				& $scanner_gravity >= 100
				& $scanner_water >= 100
				& $scanner_resources >= 100
				& $system_landing >= 100
				& $system_constructors >= 100 >>
				Repair robots swarm across the seedship and check its systems for integrity, but find nothing they can repair.
			<<else>>
				Repair robots swarm across the seedship, dismantling the drone and using its parts to repair the seedship's systems.
				<<set _repairAmount = Math.ceil(_droneHealth/4 + 25)>>	/* 25-50 */
				<<set $scanner_atmosphere = Math.min(100, $scanner_atmosphere + _repairAmount)>>
				<<set $scanner_temperature = Math.min(100, $scanner_temperature + _repairAmount)>>
				<<set $scanner_gravity = Math.min(100, $scanner_gravity + _repairAmount)>>
				<<set $scanner_water = Math.min(100, $scanner_water + _repairAmount)>>
				<<set $scanner_resources = Math.min(100, $scanner_resources + _repairAmount)>>
				<<set $system_landing = Math.min(100, $system_landing + _repairAmount)>>
				<<set $system_constructors = Math.min(100, $system_constructors + _repairAmount)>>
			<</if>>
		<<else>>
			@@.error;droneType should have been data or repair but was _droneType.@@
		<</if>>

		<br><br><<continueLink [[MO Done]]>>
	<</replace>>
	<<fadeIn "#result-area2">>
	<<refreshStatusDisplay>>
<</link>>
<br>
<<link "Ignore the drone">>
	<<replace "#result-area2">>
		The seedship continues towards the inner system, and the folorn ping of the drone fades away behind it.
		<br><br><<continueLink [[MO Done]]>>
	<</replace>>
	<<fadeIn "#result-area2">>
	<<refreshStatusDisplay>>
<</link>>
</div></div><div tiddler="Add high score" tags="widget nobr" created="201703061900" modifier="twee" twine-position="1270,1970">/* The hiscore to save should be in $hiscore */
<<widget addHiscore>>
	/* Create high score table if it doesn't exist */
	<<if !$PERM_hiscores>>
		<<remember $PERM_hiscores = []>>
	<</if>>

	/* Add new high score in appropriate place in table */
	<<set _saved = false>>
	<<for _n = 0; _n < $PERM_hiscores.length; _n++>>
		<<if $hiscore.final_score >= $PERM_hiscores[_n].final_score>>
			<<remember $PERM_hiscores.splice(_n, 0, $hiscore)>>
			<<remember $PERM_most_recent_score = _n>>
			<<set _saved = true>>
			<<break>>
		<</if>>
	<</for>>

	/* Remember a max of 100 high scores, but always remember the most recent one. */
	<<if $PERM_hiscores.length > 99 & _saved == false>>
		<<remember $PERM_hiscores = $PERM_hiscores.slice(0,99)>>
	<<elseif $PERM_hiscores.length > 100>>
		<<remember $PERM_hiscores = $PERM_hiscores.slice(0,100)>>
	<</if>>

	/* If we didn't add it already, add it to the end. */
	<<if !_saved>>
		<<remember $PERM_hiscores.push($hiscore)>>
		<<remember $PERM_most_recent_score = $PERM_hiscores.length-1>>
	<</if>>
<</widget>></div><div tiddler="FC Ruins" tags="nobr" created="201703061900" modifier="twee" twine-position="710,1690">With their settlement complete and food supply secured, the colonists mount an expedition to the nearby ruins.

<<if $planet.surface_features.includes("Monumental ruins")>>
	The explorers study the sculptures, friezes, and alien writings that fill the ruins. Even before they can translate the writings they learn much about the culture and the reasons for its demise, knowledge that will help guide them in creating their own culture on this new world.
	<<set $system_cultural_database += random(10,30)>>
<</if>>

<<if $planet.surface_features.includes("High-tech ruins")>>
	<<if $planet.surface_features.includes("Monumental ruins")>>
		They also
	<<else>>
		The explorers
	<</if>>
	find advanced alien machines, some of them still functioning.
	<<set $system_scientific_database += random(10,30)>>
	<<if $system_scientific_database > 100>>
		Reverse-engineering these machines will advance their science beyond the level that Earth's civilisation had reached when the seedship was launched.
	<<else>>
		Reverse-engineering these machines will let them fill some of the gaps in the damaged scientific database.
	<</if>>
<</if>>

<<if $planet.surface_features.includes("Dangerous ruins")>>
	<<if $planet.surface_features.includes("Monumental ruins") | $planet.surface_features.includes("High-tech ruins")>>
		However, they also
	<<else>>
		The explorers
	<</if>>
	<<killColonistsMedium>>
	trigger a long-dormant defense mechanism, which kills $deaths colonists.
<</if>>

<br><br>

<<if $colonists == 0>>
	<<set $hiscore.summary = "Destroyed by Alien Ruins">>
<</if>>

<<FCNextPassage [[FC Technology]]>></div><div tiddler="MO Alien Signal" tags="nobr" created="201703061900" modifier="twee" twine-position="1970,1270">Deep in space, the seedship's radio antenna picks up a signal so complex and structured that it can only be the product of intelligent life. The seedship can detect no interesting star systems in the direction from which the signal came, and the AI has no way of knowing how long the signal had been travelling for before the seedship crossed its path. Analysing it could provide unique insights into an alien science and culture, but could also prove dangerous.

<br><br>

<div id="result-area">
@@.keyhint;1. @@<span id="1Act"><<link "Analyse the signal">>
	<<replace "#result-area">>
		<<switch random(0,4)>>
			<<case 0 1>>
				The AI analyses the signal and determines that it contains what seems to be alien <<print either("poetry","music","art","literature")>>. It does not know whether it has stumbled upon a message cast into the void with the intention that it will be found, or simply intercepted an alien entertainment broadcast, but in either case it will be of interest to the colonists when they wake from their hibernation.
				<<set $system_cultural_database += random(5,25)>>
			<<case 2 3>>
				The AI analyses the signal and determines that it contains what seems to be alien scientific information. It does not know whether it has stumbled upon a message cast into the void with the intention that it will be found, or simply intercepted an alien informational broadcast, but in either case it will be of interest to the colonists when they wake from their hibernation.
				<<set $system_scientific_database += random(5,25)>>
			<<case 4>>
				The signal is complex, fractal, hypnotic. The AI sets up a subroutine to analyse it, but nanoseconds later it abruptly loses control of the subroutine, and then the seedship's other systems. The signal is a devious semi-sentient computer program, designed to take control of any processor that attempts to analyse it. The AI eventually regains control of the ship, but not until the program has overwritten parts of the scientific and cultural databases to process itself and then used the seedship's antenna to re-broadcast itself into space.
				<<randomDamageMedium>>
				<<damageSystem "scientific database" $damage>>
				<<randomDamageMedium>>
				<<damageSystem "cultural database" $damage>>
		<</switch>>

		<br><br><<continueLink [[MO Done]]>>
	<</replace>>
	<<refreshStatusDisplay>>
	<<fadeIn "#result-area">>
<</link>></span>
<br>
<<link "Ignore the signal">>
	<<replace "#result-area">>
		The seedship purges the signal from its memory and continues on its way.

		<br><br><<link $continue_text>><<goto [[MO Done]]>><</link>>
	<</replace>>
	<<fadeIn "#result-area">>
<</link>></div></div><div tiddler="Credits" tags="no-status-display front-matter" created="201703061900" modifier="twee" twine-position="430,150"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">\s
<<starfield>>\s
<div style="text-align:center;">\s
	<h1 style="text-align:center">Credits</h1>\s
	''//Seedship// created by''
	John Ayliff
	<<nobr>>
		<span class="credits-small-text">
			<a href="https://www.johnayliff.com" target="_blank" class="fa fa-home"></a>
			<a href="https://twitter.com/johnayliff" target="_blank" class="fa fa-twitter"></a>
			<a href="https://www.facebook.com/john.ayliff" target="_blank" class="fa fa-facebook"></a>
			/%<a href="https://www.patreon.com/johnayliff" target="_blank" class="fa fa-patreon" style="vertical-align:top">[img[patreon_logo_white_small]]</a>%/
		</span>
	<</nobr>>

	''Playtesters''
	Katherine Bowers
	Felix Clarke
	Matthew Holland
	@jxxf
	Mark Ogilvie
	David Stark

	''$5+ Patreon backers''
	Henry Ayliff
	Jay Ayliff
	Katherine Bowers
	Mark Ogilvie
	David Stark

	<span class="credits-small-text" class="inline-link">//Seedship// was written in <a href="http://twinery.org/" target="_blank">Twine 1.4.2</a> using the <a href="http://www.motoslave.net/sugarcube/2/" target="_blank">Sugarcube 2.18</a> story format</span>

	<<return "Back">>
</div>\s</div><div tiddler="Intro 2" tags="no-status-display" created="201703061900" modifier="twee" twine-position="710,430">After millennia of slow travel, the seedship AI awakes. Hoping against hope, it trains its receiver on the direction of Earth's sun, but it is as silent as any of the other myriad dead stars. Save for the thousand frozen colonists cradled in its shielding and life support systems, the human race is now extinct.

<span id="spaceAct">[[Systems check|Intro systems check]]</span>
<<nobr>><div class="skip-intro-link">
	<<link "Skip intro">>
	<<script>>
		$("#ui-bar").removeClass("stowed");
		$('#ui-bar').fadeIn();
	<</script>>
	<<goto "Generate planet">>
	<</link>>
</div><</nobr>></div><div tiddler="MO Avoid Dust" tags="nobr" created="201703061900" modifier="twee" twine-position="1550,1550"><<if visited() == 1>>
	The seedship is decelerating on its approach to the next system when it detects an unusually thick volume of interstellar dust in its path. Passing through the dust would likely mean several high-velocity collisions with dust particles. The AI could execute an emergency course change to avoid the dust, but then the seedship would pass this system by and arrive at an effectively random one, without benefiting from the upgrades to its scanners.
<<else>>
	The seedship detects another area of dense interstellar dust on its path to the new system. It can plough through the dust and take damage, or change course and arrive at a new system without benefiting from its upgraded scanners.
<</if>>
<br><br>
<div id="result-area">
<<link "Plough through the dust">>
	<<silently>>
		<<set _system1 = "">><<set _system2 = "">><<set _system3 = "">>
		<<set _r = random(1,3)>>

		<<randomSystemExcluding "destroyed">>
		<<set _system1 = $system>>
		<<if _r >= 2>>
			<<randomSystemExcluding _system1 "destroyed">>
			<<set _system2 = $system>>
		<</if>>
		<<if _r == 3>>
			<<randomSystemExcluding _system1 _system2 "destroyed">>
			<<set _system3 = $system>>
		<</if>>

		<<if _system2 == "">>
			<<randomDamageLow>>	<<damageSystem _system1 $damage>>
		<<elseif _system3 == "">>
			<<randomDamageLow>>	<<damageSystem _system1 $damage>>
			<<randomDamageLow>>	<<damageSystem _system2 $damage>>
		<<else>>
			<<randomDamageLow>>	<<damageSystem _system1 $damage>>
			<<randomDamageLow>>	<<damageSystem _system2 $damage>>
			<<randomDamageLow>>	<<damageSystem _system3 $damage>>
		<</if>>
		<<refreshStatusDisplay>>
	<</silently>>
	<<replace "#result-area">>
		The AI holds the course steady as dust particles batter the ship.
		<<if _system3 != "">>
			Severe impacts damage the _system1, _system2 and _system3.
		<<elseif _system2 != "">>
			Severe impacts damage the _system1 and _system2.
		<<else>>
			A severe impact damages the _system1.
		<</if>>


		<br><br><<continueLink [[MO Done]]>>
	<</replace>>
	<<fadeIn "#result-area">>
<</link>>
<br>
<<link "Emergency course change">>
	<<set $off_course = true>>
	<<refreshStatusDisplay>>
	<<replace "#result-area">>
		The AI rotates the ship and fires the main engine. It speeds safely past the dust cloud and the original target system, and decelerates towards the first system it finds on its new course.

		<br><br><<continueLink [[MO Done]]>>
	<</replace>>
	<<fadeIn "#result-area">>
<</link>></div>
</div><div tiddler="MO Overheating" tags="nobr" created="201703221149" modifier="twee" twine-position="1550,1830"><<if visited() == 1>>
	The AI wakes to a wall of blinding brightness. The seedship's course has taken it close to a supergiant star that has proved to be far hotter than the guidance system anticipated, and the ship is gathering heat faster than the radiator fins can radiate it away. The AI must shut down a part of the heat regulation system before the entire system catastrophically fails.
<<else>>
	The guidance system takes the seedship too close to another superhot star, and the AI must choose which module it will allow to overheat.
<</if>>

<br><br>
<div id="result-area">
<<link "Allow the sleep chambers to overheat">>
	<<replace "#result-area">>
		<<killColonistsFew>>
		The AI channels excess heat into the sleep chambers. The heat regulation system recovers as the ship moves away from the superhot star, but not before $deaths colonists have sustained tissue damage too severe for them to be successfully revived.

		<br><br><<continueLink [[MO Done]]>>
	<</replace>>
	<<fadeIn "#result-area">>
	<<refreshStatusDisplay>>
<</link>>
<br>

<<if $scanner_atmosphere > 0 | $scanner_gravity > 0 | $scanner_temperature > 0 | $scanner_water > 0 | $scanner_resources > 0>>
	<<link "Allow the scanner module to overheat">>
		<<replace "#result-area">>
			<<randomIntactSystemFrom "atmosphere scanner" "gravity scanner" "temperature scanner" "water scanner" "resources scanner">>
			<<randomDamageLow>>
			<<damageSystem $system $damage>>
			The AI channels excess heat into the scanner module. The heat regulation system recovers as the ship moves away from the superhot star, but not before the heat has damaged the $system.

			<br><br><<continueLink [[MO Done]]>>
		<</replace>>
		<<fadeIn "#result-area">>
		<<refreshStatusDisplay>>
	<</link>>
<br>
<</if>>

<<if $system_landing > 0 | $system_construction > 0>>
	<<link "Allow the landing/construction module to overheat">>
		<<replace "#result-area">>
			<<randomIntactSystemFrom "landing system" "construction system">>
			<<randomDamageLow>>
			<<damageSystem $system $damage>>
			The AI channels excess heat into the landing/construction module. The heat regulation system recovers as the ship moves away from the superhot star, but not before the heat has damaged the $system.

			<br><br><<continueLink [[MO Done]]>>
		<</replace>>
		<<fadeIn "#result-area">>
		<<refreshStatusDisplay>>
	<</link>>
<br>
<</if>>

<<if $system_scientific_database > 0 | $system_cultural_database > 0>>
	<<link "Allow the data storage module to overheat">>
		<<replace "#result-area">>
			<<randomIntactSystemFrom "scientific database" "cultural database">>
			<<randomDamageLow>>
			<<damageSystem $system $damage>>
			The AI channels excess heat into the data storage module. The heat regulation system recovers as the ship moves away from the superhot star, but not before the heat has damaged the $system.

			<br><br><<continueLink [[MO Done]]>>
		<</replace>>
		<<fadeIn "#result-area">>
		<<refreshStatusDisplay>>
	<</link>>
<</if>>

</div>
</div><div tiddler="MO Stasis Failure" tags="nobr" created="201703061900" modifier="twee" twine-position="2390,1130"><<killColonistsFew>>
<<if visited() == 1>>
	The sleep chambers can keep the colonists frozen and capable of revival for thousands of years, but not forever. The medical monitoring program wakes the AI from hibernation to report that $deaths colonists have died in their sleep.
<<else>>
	The seedship's ancient systems continue to decay, and the AI wakes deep in interstellar space to learn that $deaths more colonists have died in their sleep.
<</if>>
<br><br><<continueLink [[MO Done]]>></div><div tiddler="Examine high score" tags="nobr no-status-display front-matter" created="201703061900" modifier="twee" twine-position="990,150"><<starfield>>
<<set $hiscore = $PERM_hiscores[$hiscore_to_show]>>
Date: <<displayHiscoreDate $PERM_hiscores[$hiscore_to_show]>>
<br><br>
<<if $PERM_hiscores[$hiscore_to_show].planet>>
	<<set $planet = $PERM_hiscores[$hiscore_to_show].planet>>
	<<displayPlanet true false>><br>
<</if>>

<<display "Endgame Summary">><br><br>

<<displayScore $PERM_hiscores[$hiscore_to_show] true>>

<br>
[[Back|High scores]]</div><div tiddler="FC Construction" tags="nobr" created="201703061900" modifier="twee" twine-position="570,1550">	/% Scroll to top of post-stats text area %/
<<script>>
	$('html, body').animate({
		scrollTop: $('#post-planet-stats').offset().top
	});
<</script>>

/* Update planet stats in case the player renamed it but didn't click Done. */
<<replace "#planet-stats">><<displayPlanet true false>><</replace>>


/* One Contruction system roll for each of Atmosphere, Temperature, Gravity, Water */

/* DEATHS ALGORITHM */
/* Base average deaths is 100-system (a value from 0 to 100) */

/* Good related planet feature: subtract 50 (final value is -50-50) */
/* Multiply and add based on attribute */
/* Floor at zero */

/* If non-zero, randomly adjust by +- 25% */

<<set _good_feature_subtract = 50>>
<<set _green_multiply = 0>>		<<set _green_add = 0>>
<<set _yellow_multiply = 1.25>>	<<set _yellow_add = 0>>
<<set _red_multiply = 3.75>>	<<set _red_add = 125>>
<<set _adjust_min = 0.75>>
<<set _adjust_max = 1.25>>

/* With undamaged construction system, each red attribute will kill about 125 colonists. An all-red planet will kill about half your colonists */
/* With destroyed construction system, each red attribute will kill about 500 colonists and each yellow attribute about 125. An all-red planet will kill everyone and an all-yelow planet will kill half. */



/* ATMOSPHERE DEATHS */
<<set _atmosphere_deaths = 100-$system_constructors>>
<<if $planet.surface_features.includes("Airtight caves")>>
	<<set _atmosphere_deaths -= _good_feature_subtract>>
<</if>>
<<switch $planet.atmosphere>>
	<<case "Corrosive" "Toxic" "None" "Non-breathable">><<set _atmosphere_deaths = _atmosphere_deaths * _red_multiply + _red_add>>
	<<case "Marginal">><<set _atmosphere_deaths = _atmosphere_deaths * _yellow_multiply + _yellow_add>>
	<<case "Breathable">><<set _atmosphere_deaths = _atmosphere_deaths * _green_multiply + _green_add>>
	<<default>>@@.error;$planet.atmosphere@@
<</switch>>
<<if _atmosphere_deaths <= 0>>
	<<set _atmosphere_deaths = 0>>
<<else>>
	<<set _atmosphere_deaths = Math.round(random(_atmosphere_deaths*_adjust_min, _atmosphere_deaths*_adjust_max))>>
<</if>>

/* TEMPERATURE DEATHS */
<<set _temperature_deaths = 100-$system_constructors>>
<<if $planet.surface_features.includes("Insulated caves")>>
	<<set _temperature_deaths -= _good_feature_subtract>>
<</if>>
<<switch $planet.temperature>>
	<<case "Very hot" "Very cold">><<set _temperature_deaths = _temperature_deaths * _red_multiply + _red_add>>
	<<case "Cold" "Hot">><<set _temperature_deaths = _temperature_deaths * _yellow_multiply + _yellow_add>>
	<<case "Moderate">><<set _temperature_deaths = _temperature_deaths * _green_multiply + _green_add>>
	<<default>>@@.error;$planet.temperature@@
<</switch>>
<<if _temperature_deaths <= 0>>
	<<set _temperature_deaths = 0>>
<<else>>
	<<set _temperature_deaths = Math.round(random(_temperature_deaths*_adjust_min, _temperature_deaths*_adjust_max))>>
<</if>>

/* GRAVITY DEATHS */
<<set _gravity_deaths = 100-$system_constructors>>
<<if $planet.surface_features.includes("Useful animals")>>
	<<set _gravity_deaths -= _good_feature_subtract>>
<</if>>
<<switch $planet.gravity>>
	<<case "Very high" "Very low">><<set _gravity_deaths = _gravity_deaths * _red_multiply + _red_add>>
	<<case "Low" "High">><<set _gravity_deaths = _gravity_deaths * _yellow_multiply + _yellow_add>>
	<<case "Moderate">><<set _gravity_deaths = _gravity_deaths * _green_multiply + _green_add>>
	<<default>>@@.error;$planet.gravity@@
<</switch>>
<<if _gravity_deaths <= 0>>
	<<set _gravity_deaths = 0>>
<<else>>
	<<set _gravity_deaths = Math.round(random(_gravity_deaths*_adjust_min, _gravity_deaths*_adjust_max))>>
<</if>>

/* WATER DEATHS */
<<set _water_deaths = 100-$system_constructors>>
<<if $planet.surface_features.includes("Useful animals")>>
	<<set _water_deaths -= _good_feature_subtract>>
<</if>>
<<switch $planet.water>>
	<<case "None" "Trace">><<set _water_deaths = _water_deaths * _red_multiply + _red_add>>
	<<case "Ice-covered surface" "Planet-wide ocean">><<set _water_deaths = _water_deaths * _yellow_multiply + _yellow_add>>
	<<case "Ice caps" "Oceans">><<set _water_deaths = _water_deaths * _green_multiply + _green_add>>
	<<default>>@@.error;$planet.water@@
<</switch>>
<<if _water_deaths <= 0>>
	<<set _water_deaths = 0>>
<<else>>
	<<set _water_deaths = Math.round(random(_water_deaths*_adjust_min, _water_deaths*_adjust_max))>>
<</if>>

/* ADJUST DEATH VALUES DOWN IF TOTAL IS MORE THAN TOTAL COLONISTS */
<<if _atmosphere_deaths + _temperature_deaths + _gravity_deaths + _water_deaths > $colonists>>
	/* Scale death values down to number of colonists */
	<<set _modify = $colonists / (_atmosphere_deaths + _temperature_deaths + _gravity_deaths + _water_deaths)>>
	<<set _atmosphere_deaths = Math.round(_atmosphere_deaths*_modify) >>
	<<set _temperature_deaths = Math.round(_temperature_deaths*_modify) >>
	<<set _gravity_deaths = Math.round(_gravity_deaths*_modify) >>
	<<set _water_deaths = Math.round(_water_deaths*_modify) >>
	/* Deal with rounding errors */
	<<if _atmosphere_deaths > 0>>
		<<set _atmosphere_deaths = $colonists - (_temperature_deaths + _gravity_deaths + _water_deaths)>>
	<<elseif _temperature_deaths > 0>>
		<<set _temperature_deaths = $colonists - (_atmosphere_deaths + _gravity_deaths + _water_deaths)>>
	<<elseif _gravity_deaths > 0>>
		<<set _gravity_deaths = $colonists - (_atmosphere_deaths + _temperature_deaths + _water_deaths)>>
	<<elseif _water_deaths > 0>>
		<<set _water_deaths = $colonists - (_atmosphere_deaths + _temperature_deaths + _gravity_deaths)>>
	<</if>>
<</if>>


/* AND NOW, OUTPUT THE TEXT */

The colonists begin constructing a settlement

<<if $system_constructors >= 100>>
	with the aid of the seedship's construction robots.
<<elseif $system_constructors >= 50>>
	with the aid of the seedship's damaged construction robots.
<<elseif $system_constructors > 0>>
	with the aid of the seedship's few surviving construction robots.
<<else>>
	without the help of the seedship's wrecked construction robots.
<</if>>



/* Text output code in widgets to make this passage less huge */
<<FC_Construction_atmosphere_temperature _atmosphere_deaths _temperature_deaths>>
<<FC_Construction_gravity _gravity_deaths>>
<<FC_Construction_water _water_deaths>>


<<set $colonists -= _atmosphere_deaths>>
<<set $colonists -= _temperature_deaths>>
<<set $colonists -= _gravity_deaths>>
<<set $colonists -= _water_deaths>>

/* SURFACE FEATURES: Unstable geology */
<<if $planet.surface_features.includes("Unstable geology") & $colonists > 0>>
	<<if random(0,99) < $system_constructors>>
		<<killColonistsMedium>>
		Earthquakes kill $deaths colonists before they complete structures that can withstand them.
	<<else>>
		<<killColonistsMany>>
		An earthquake levels the colony's partly-completed settlement, killing $deaths colonists.
	<</if>>
<</if>>

/* SURFACE FEATURES: Dangerous native animals */
<<if $planet.surface_features.includes("Dangerous animals") & $colonists > 0>>
	<<if random(0,99) < $system_constructors>>
		<<killColonistsMedium>>
		The colonists manage to keep the planet's relentlessly hostile animals at bay, but $deaths colonists are killed before their perimeter fence is secured.
	<<else>>
		<<killColonistsMany>>
		Hostile native animals overrun the colony, killing $deaths colonists.
	<</if>>
<</if>>

/* SURFACE FEATURES: Poisonous native plants */
<<if $planet.surface_features.includes("Poisonous plants") & $colonists > 0>>
	<<if random(0,99) < $system_constructors>>
		<<killColonistsMedium>>
		The planet's plant life is extremely poisonous to humans, and $deaths colonists die before they can clear it away from their settlement.
	<<else>>
		<<killColonistsMany>>
		A storage failure leads to the colony's food supply being contaminated with the poisonous native plants, and $deaths colonists die.
	<</if>>
<</if>>

<br><br>

<<if $colonists == 0>>
	<<set $hiscore.summary = "Construction Failure">>
<</if>>

<<if  $planet.surface_features.includes("Monumental ruins")
	| $planet.surface_features.includes("High-tech ruins")
	| $planet.surface_features.includes("Dangerous ruins") >>
	<<FCNextPassage [[FC Ruins]]>>\s
<<else>>
	<<FCNextPassage [[FC Technology]]>>
<</if>>
</div><div tiddler="FC Done" tags="nobr" created="201703061900" modifier="twee" twine-position="1130,1830">/* Social media icons */
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

/* Add score for databases only if culture survived. */
<<if $hiscore.final_culture != -1>>
	<<set $hiscore.score_scientific_database = $system_scientific_database * 10>>
	<<set $hiscore.score_cultural_database = $system_cultural_database * 10>>
<</if>>

<<set $hiscore.date = Date.now()>>

<<calculate_final_score>>

<<addHiscore>>

<<display "Endgame Summary">>
<br><br>
<<displayScore $hiscore false>>
<br>

<<link "Title screen">>
	<<script>>
		$('#ui-bar').hide();
		Save.autosave.delete();
		Engine.restart();
	<</script>>
<</link>>

<br>

<<display [[Share links]]>>
<<scrollToPostPlanetStats>>
</div><div tiddler="Show shared summary" tags="nobr no-status-display front-matter" created="201703171154" modifier="twee" twine-position="710,10">/* $query_string has already been set to the string */

/* Example string: ?nHctpcq.Arid.1000.380.0.3.7 */



/* Set up score variables */
<<set $hiscore = {
	final_tech_level: -1,
	final_culture: -1,
	native_relations: -1,
	final_score: 0,
	score_landing: 0,
	score_construction: 0,
	score_native_relations: 0,
	score_technology: 0,
	score_culture: 0,
	score_scientific_database: 0,
	score_cultural_database: 0,
	score_atmosphere: 0,
	score_gravity: 0,
	score_temperature: 0,
	score_water: 0,
	score_resources: 0,
	summary: "" } >>

<<set _strings = $query_string.split(".")>>

/* Planet string */
<<set _planet_string = _strings[0]>>

/* _planet_string[0] is always "?" so ignore and start with _planet_string[1] */

<<if _planet_string[1] == "X">>
	/* No planet - destroyed in space */
	<<unset $planet>>
<<else>>
	/* Set up planet variable */
	<<set $planet = {
		temperature: "",
		gravity: "",
		resources: "",
		atmosphere: "",
		water: "",
		surface_features: [],
		anomalies: [],
		native_tech_level: 0,
			} >>

		/* PLANET ATTRIBUTES */
	<<switch _planet_string[1]>>
		<<case "b">>	<<set $planet.atmosphere = "Breathable">>
		<<case "m">>	<<set $planet.atmosphere = "Marginal">>
		<<case "v">>	<<set $planet.atmosphere = "None">>
		<<case "n">>	<<set $planet.atmosphere = "Non-breathable">>
		<<case "t">>	<<set $planet.atmosphere = "Toxic">>
		<<case "c">>	<<set $planet.atmosphere = "Corrosive">>
		<<default>>	@@.error;Unexpected atmosphere character _planet_string[1]@@
	<</switch>>

	<<switch _planet_string[2]>>
		<<case "H">>	<<set $planet.gravity = "Very high">>
		<<case "h">>	<<set $planet.gravity = "High">>
		<<case "m">>	<<set $planet.gravity = "Moderate">>
		<<case "l">>	<<set $planet.gravity = "Low">>
		<<case "L">>	<<set $planet.gravity = "Very low">>
		<<default>>	@@.error;Unexpected gravity character _planet_string[2]@@
	<</switch>>

	<<switch _planet_string[3]>>
		<<case "H">>	<<set $planet.temperature = "Very hot">>
		<<case "h">>	<<set $planet.temperature = "Hot">>
		<<case "m">>	<<set $planet.temperature = "Moderate">>
		<<case "c">>	<<set $planet.temperature = "Cold">>
		<<case "C">>	<<set $planet.temperature = "Very cold">>
		<<default>>	@@.error;Unexpected temperature character _planet_string[3]@@
	<</switch>>

	<<switch _planet_string[4]>>
		<<case "o">>	<<set $planet.water = "Oceans">>
		<<case "O">>	<<set $planet.water = "Planet-wide ocean">>
		<<case "i">>	<<set $planet.water = "Ice caps">>
		<<case "I">>	<<set $planet.water = "Ice-covered surface">>
		<<case "t">>	<<set $planet.water = "Trace">>
		<<case "n">>	<<set $planet.water = "None">>
		<<default>>	@@.error;Unexpected water character _planet_string[4]@@
	<</switch>>

	<<switch _planet_string[5]>>
		<<case "r">>	<<set $planet.resources = "Rich">>
		<<case "p">>	<<set $planet.resources = "Poor">>
		<<case "n">>	<<set $planet.resources = "None">>
		<<default>>	@@.error;Unexpected resources character _planet_string[5]@@
	<</switch>>

	/* Any remaining characters are planet features */
	<<for _n = 6; _n < _planet_string.length; _n++>>
		<<switch _planet_string[_n]>>
					/* Moon */
			<<case "a">>	<<set $planet.surface_features.push("Barren moon")>>
			<<case "b">>	<<set $planet.surface_features.push("Metal-rich moon")>>
			<<case "c">>	<<set $planet.surface_features.push("Unstable moon")>>

					/* Beauty/ugliness */
			<<case "d">>	<<set $planet.surface_features.push("Outstanding beauty")>>
			<<case "e">>	<<set $planet.surface_features.push("Outstanding ugliness")>>

					/* Caves */
			<<case "f">>	<<set $planet.surface_features.push("Airtight caves")>>
			<<case "g">>	<<set $planet.surface_features.push("Insulated caves")>>
			<<case "h">>	<<set $planet.surface_features.push("Unstable geology")>>

					/* Plants */
			<<case "i">>	<<set $planet.surface_features.push("Plant life")>>
			<<case "j">>	<<set $planet.surface_features.push("Edible plants")>>
			<<case "k">>	<<set $planet.surface_features.push("Poisonous plants")>>
			<<case "l">>	<<set $planet.surface_features.push("Quasi-organic crystals")>>

					/* Animals */
			<<case "m">>	<<set $planet.surface_features.push("Animal life")>>
			<<case "n">>	<<set $planet.surface_features.push("Useful animals")>>
			<<case "o">>	<<set $planet.surface_features.push("Dangerous animals")>>

					/* Intelligent life */
			<<case "p">>	<<set $planet.surface_features.push("Intelligent life")>>

					/* Ruins */
			<<case "q">>	<<set $planet.surface_features.push("Monumental ruins")>>
			<<case "r">>	<<set $planet.surface_features.push("High-tech ruins")>>
			<<case "s">>	<<set $planet.surface_features.push("Dangerous ruins")>>
			<<case "t">>	<<set $planet.surface_features.push("Regular geological formations")>>

			<<default>>
				@@.error;Unexpected surface feature character _n : _planet_string[_n].@@
		<</switch>>
	<</for>>

	/* Native tech level */
	<<set $planet.native_tech_level = Number(_strings[1])>>

	/* Planet name */
	<<set $planet.name = decodeURIComponent(_strings[2])>>

	<<set $hiscore.planet = $planet>>
<</if>>

/* Landing score */
<<set $hiscore.score_landing = Number(_strings[3])>>

/* Construction score */
<<set $hiscore.score_construction = Number(_strings[4])>>

/* Natives result */
<<set $hiscore.native_relations = Number(_strings[5])>>

/* Technology result */
<<set $hiscore.final_tech_level = Number(_strings[6])>>

/* Culture result */
<<set $hiscore.final_culture = Number(_strings[7])>>

/* Scientific database */
<<set $hiscore.score_scientific_database = Number(_strings[8])>>

/* Cultural database */
<<set $hiscore.score_cultural_database = Number(_strings[9])>>



<<calculate_final_score>>


/* Display */
<<starfield>>
<h1 style="text-align:center">Seedship Mission Report</h1>
<<if $planet>>
	<<displayPlanet true false>><br>
<</if>>
<<display "Endgame Summary">><br><br>
<<displayScore $hiscore true>>

<div style="text-align:center; font-size:150%; font-weight:bold">
<<link "Play Seedship">>
	<<set _full_url = location.href>>
	<<set _split_url = _full_url.split("?")>>
	<<set _new_url = _split_url[0]>>
	<<run Engine.restart()>>
	<<run location.assign(_new_url)>>
<</link>>
</div></div><div tiddler="Display score" tags="widget nobr" created="201703061900" modifier="twee" twine-position="1270,1830">/* args[0] should be a hiscore object */
/* If args[1] is true, display the date, otherwise don't */
<<widget displayScore>>
	<table class="score-table">
		<colgroup>
			<col>
			<col style="width:4em">
		</colgroup>
		<tr><td colspan=2>''Score''</td></tr>
<<if $args[0].planet>>
		<tr><td>Planet atmosphere:</td><td style="text-align:right"><<displayColouredScore $args[0].score_atmosphere 1000>></td></tr>
		<tr><td>Planet gravity:</td><td style="text-align:right"><<displayColouredScore $args[0].score_gravity 1000>></td></tr>
		<tr><td>Planet temperature:</td><td style="text-align:right"><<displayColouredScore $args[0].score_temperature 1000>></td></tr>
		<tr><td>Planet water:</td><td style="text-align:right"><<displayColouredScore $args[0].score_water 1000>></td></tr>
		<tr><td>Planet resources:</td><td style="text-align:right"><<displayColouredScore $args[0].score_resources 1000>></td></tr>
<</if>>
		<<if $args[0].score_landing != 0>><tr><td>Survivors after landing:</td><td style="text-align:right"><<displayColouredScore $args[0].score_landing 1000>></td></tr><</if>>
		<<if $args[0].score_construction != 0>><tr><td>Survivors after settlement construction:</td><td style="text-align:right"><<displayColouredScore $args[0].score_construction 1000>></td></tr><</if>>
		<<if $args[0].final_tech_level != -1>><tr><td>Final technology level (<<print $tech_level_names[$args[0].final_tech_level].toUpperFirst()>>):</td><td style="text-align:right"><<displayColouredScore $args[0].score_technology 2000>></td></tr><</if>>
		<<if $args[0].native_relations != -1>><tr><td>Native relations (<<print $native_relations_names[$args[0].native_relations]>>):</td><td style="text-align:right"><<displayColouredScore $args[0].score_native_relations 2000>></td></tr><</if>>
		<<if $args[0].final_culture != -1>><tr><td>Final culture (<<print $culture_names[$args[0].final_culture]>>):</td><td style="text-align:right"><<displayColouredScore $args[0].score_culture 2000>></td></tr><</if>>
		<<if $args[0].score_scientific_database != 0>><tr><td>Surviving scientific database &times; 10:</td><td style="text-align:right"><<displayColouredScore $args[0].score_scientific_database 1000>></td></tr><</if>>
		<<if $args[0].score_cultural_database != 0>><tr><td>Surviving cultural database &times; 10:</td><td style="text-align:right"><<displayColouredScore $args[0].score_cultural_database 1000>></td></tr><</if>>
		<tr><td>Total:</td><td style="text-align:right">''$args[0].final_score''</td></tr>
	</table>
<</widget>>

/* args[0] should be a hiscore object */
<<widget displayHiscoreDate>>
	<<set _dateString = "">>
	<<script>>
		var d = new Date(State.variables.args[0].date);
		TempVariables.dateString = d.toDateString();
	<</script>>
	<<print _dateString>>
<</widget>>

<<widget displayColouredScore>>
	/* Display $args[0] in an appropriate colour. */
	/* $args[0] is the number to display. */
	/* $args[1] is the max valuef or the colour scheme. */
	/* <<if $args[0] >= $args[1]>>
		@@.good;$args[0]@@
	<<elseif $args[0] > 0>>
		@@.mediocre;$args[0]@@
	<<else>>
		@@.bad;$args[0]@@
	<</if>> */

	$args[0]

<</widget>></div><div tiddler="MO Racist Program" tags="nobr" created="201703061900" modifier="twee" twine-position="1970,850"><<set _number = Math.ceil(random($colonists/15, $colonists/5))>>
<<randomSystemExcluding "sleep chambers" "destroyed">>
An alert from the sleep chambers jolts the AI awake. Chambers across the ship are executing their shutdown command, and in a few moments the colonists within them will die.
<br><br>
The AI traces the shutdown command to a rogue program hidden in the control software of the $system. The program is targeting colonists with a particular set of genetic characteristics. A message embedded in the program, apparently meant to be found by the colonists after landing, talks about "purging" humanity of an "inferior" race.
<br><br>
The program is affecting _number sleep capsules. The AI cannot stop it in time to save the colonists without damaging the $system.

<br><br>
<div id="result-area">
<<link "Stop the program">>
	<<replace "#result-area">>
		<<randomDamageMedium>>
		<<damageSystem $system $damage>>
		<<refreshStatusDisplay>>
		The AI frantically purges data from the $system until it has wiped the rogue program and the sleep chambers return to normal.

		<br><br><<continueLink [[MO Done]]>>
	<</replace>>
	<<fadeIn "#result-area">>
<</link>>
<br>
<<link "Allow the program to run">>
	<<replace "#result-area">>
		<<set $colonists -= _number>>
		<<refreshStatusDisplay>>
		The AI is programmed to treat all of its colonists equally, but also to make tough choices regarding their survival, and it decides that those lives are less important to humanity's survival than the $system. The rogue program finishes, leaving its triumphant message for the colonists to find, and the medical monitoring program reports that those _number colonists have transitioned from frozen sleep to frozen death.

		<br><br><<continueLink [[MO Done]]>>
	<</replace>>
	<<fadeIn "#result-area">>
<</link>>
</div></div><div tiddler="MO Alien Probe Reply" tags="nobr" created="201703061900" modifier="twee" twine-position="2110,1550">
The reply comes after a few moments. It is in the same format as the seedship's inter-species greeting, starting with the same prime numbers, but the diagram is changed to depict alien beings and suggest that the object is an exploration probe. There is more to the message that the AI does not understand, but it appears to have established communication.

<br><br>

<div id="result-area2">
<<link "Transmit scientific information">>
	<<replace "#result-area2">>
		The AI transmits <<if $system_scientific_database >= 100>>the contents of<<else>>what remains of<</if>> the scientific database to the alien ship.
		<<if random(0,99) < $system_scientific_database>>
			It responds almost at once with a similar signal: the alien intelligence must have decoded the seedship's scientific database and replied with scientific information of its own. The AI files this new information away for analysis by the colonists when they awake.
			<<set $system_scientific_database += random(5,25)>>
		<<else>>
			It responds with more mathematical pulses. It seems that it either did not understand the seedship's scientific database, or did not find it interesting.
		<</if>>
		<br><br>The alien ship appears to have had enough of conversation, and accelerates away again into space.
		<br><br><<link $continue_text>><<goto [[MO Done]]>><</link>>
	<</replace>>
	<<fadeIn "#result-area2">>
	<<refreshStatusDisplay>>
<</link>>
<br>
<<link "Transmit cultural information">>
	<<replace "#result-area2">>
		The AI transmits <<if $system_cultural_database >= 100>>the contents of<<else>>what remains of<</if>> the cultural database to the alien ship.
		<<if random(0,99) < $system_cultural_database>>
			It responds almost at once with a similar signal: the alien intelligence must have decoded the seedship's cultural database and replied with information about its own alien culture. The AI files this new information away for analysis by the colonists when they awake.
			<<set $system_cultural_database += random(5,25)>>
		<<else>>
			It responds with more mathematical pulses. It seems that it either did not understand the seedship's cultural database, or did not find it interesting.
		<</if>>
		<br><br>The alien ship appears to have had enough of conversation, and accelerates away again into space.
		<br><br><<link $continue_text>><<goto [[MO Done]]>><</link>>
	<</replace>>
	<<fadeIn "#result-area2">>
	<<refreshStatusDisplay>>
<</link>>
</div></div><div tiddler="High scores" tags="no-status-display front-matter nobr" created="201703061900" modifier="twee" twine-position="850,150"><<starfield>>
<h1 style="text-align:center">Past Seedship Missions</h1>

<table class="hiscore-table" style="width: 100%">
	/*<colgroup>
		<col style="width:25%">
		<col style="width:25%">
		<col style="width:25%">
		<col style="width:25%">
	</colgroup>*/
	<tr>
		<th></th>
		<th style="text-align:left">Date</th>
		<th style="text-align:center">Planet</th>
		<th style="text-align:center">Result</th>
		<th style="text-align:right">Score</th>
	</tr>
<<for _n = 0; _n < $PERM_hiscores.length; _n++>>
	<tr>
		<td style="text-align:left"><<print _n+1>></td>
		<td style="text-align:left"><<displayHiscoreDate $PERM_hiscores[_n]>></td>
		<td style="text-align:center"><<if $PERM_hiscores[_n].planet>><<print $PERM_hiscores[_n].planet.name>><</if>></td>
		<td style="text-align:center"><<print $PERM_hiscores[_n].summary>></td>
		<td style="text-align:right"><<print "[[" + $PERM_hiscores[_n].final_score + "|Examine high score][$hiscore_to_show = " + _n + "]]">></td>
	</tr>
<</for>>
</table>

[[Back|Start]]

<div class="credits-small-text" style="text-align:right">
	<<link "Clear records">>
		<<script>>
			$('#clear-confirm').slideToggle();
			$('html, body').animate({
				scrollTop: $('#clear-confirm').offset().top
			});
		<</script>>
	<</link>>


	/%<br>%/

	<div id="clear-confirm" style="display: none;" class="credits-small-text">
		This will delete all recorded games. Are you sure?
		<<link "Yes">>
			<<forget $PERM_hiscores>>
			<<goto [[Start]]>>
		<</link>>
		<span class="main-loop-link-spacer"> | </span>
		<<link "No">>
			<<script>>
				$('#clear-confirm').slideUp();
			<</script>>
		<</link>>
	</div>
</div>
</div><div tiddler="MO System Failure" tags="nobr" created="201703061900" modifier="twee" twine-position="2390,1410"><<if $system_landing <= 0 & $system_constructors <= 0>>
	The components of the landing and construction system continue to decay, but they have already been damaged past usefulness.

	<br><br><<continueLink [[MO Done]]>>
<<elseif $system_constructors <= 0>>
	<<randomDamageMedium>>
	<<damageSystem "landing system" $damage>>
	The aging seedship can no longer maintain its landing system.

	<br><br><<continueLink [[MO Done]]>>
<<elseif $system_landing <= 0>>
	<<randomDamageMedium>>
	<<damageSystem "construction system" $damage>>
	The aging seedship can no longer maintain its construction system.

	<br><br><<continueLink [[MO Done]]>>
<<else>>
	<<if visited() == 1>>
		The seedship's body is designed to form the core of an initial settlement once it has landed on an alien planet, so the landing and construction systems share many components. As the seedship ages, these components are starting to decay, but the AI can focus on preserving the landing system or the construction system.
	<<else>>
		The landing and construction systems continue to decay, and the AI must once again choose which one it will focus on preserving.
	<</if>>
	<br><br>
	<div id="result-area">
	<<link "Preserve the landing system">>
		<<randomDamageMedium>>
		<<damageSystem "construction system" $damage>>
		<<refreshStatusDisplay>>
		<<replace "#result-area">>
			The AI focuses on preserving the landing system, and allows the construction system to decay.

			<br><br><<continueLink [[MO Done]]>>
		<</replace>>
		<<fadeIn "#result-area">>
	<</link>>
	<br>
	<<link "Preserve the construction system">>
		<<randomDamageMedium>>
		<<damageSystem "landing system" $damage>>
		<<refreshStatusDisplay>>
		<<replace "#result-area">>
			The AI focuses on preserving the construction system, and allows the landing system to decay.

			<br><br><<continueLink [[MO Done]]>>
		<</replace>>
		<<fadeIn "#result-area">>
	<</link>></div>
        <</if>></div>
                <div tiddler="MO Trailing Drone Mistake" tags="" created="201703061900" modifier="twee" twine-position="2110,990">The Seedship arrives in the new system, but the AI finds that it can no longer detect the ground control signal. A malfunction in the radio antenna must have triggered old computer protocols and led to the AI's false hope. The AI grieves the loss of ground control once again, and then turns its sensors on the system in which it has arrived.

<<continueLink [[MO Done]]>></div></div>



*/
